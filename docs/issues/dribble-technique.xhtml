<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — DRIBBLE-TECHNIQUE</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">DRIBBLE-TECHNIQUE</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-dribble-technique:make-explicitly-vague">Proposal MAKE-EXPLICITLY-VAGUE</a><ol> </ol></li><li><a href="#section-Test Case">Test Case</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to implementors">Cost to implementors</a><ol> </ol></li><li><a href="#section-Cost to users">Cost to users</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue DRIBBLE-TECHNIQUE [NIL] [CLARIFICATION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, 1988 (not sure which meeting) </section><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> (p443) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>06-Dec-87, Version 1 by Pitman 14-Feb-88, Version 2 by Masinter </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>The intent and effect of <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> is not very clearly specified. Users have complained that <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> behaves quite differently in different implementations. <br/></section><section class="status-passed proposal" id="issue-dribble-technique:make-explicitly-vague"><h2 class="section-title">Proposal MAKE-EXPLICITLY-VAGUE</h2>Clarify that <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> is intended primarily for interactive debugging and that its effect cannot be relied upon from programs. <br/></section><section id="section-Test Case" class="section"><h2 class="section-title">Test Case</h2><pre> #1: <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> <span class="syntax-string">"temp"</span>)</span>
	    <span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">FOO</span></span>)</span>
            <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>)</span>)</span>
</span></code></pre><br/><br/> #2: <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> <span class="syntax-string">"temp"</span>)</span>
</span></code><br/>     <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">FOO</span></span>)</span>
            <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>)</span>
	    <span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-princ">princ</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">BAR</span></span>)</span>)</span>
</span></code></pre>	 <br/><br/></pre></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>Users of <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> have been surprised about how differently <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> behaves in different implementations. This makes the status quo much more explicit and will lead to less surprise. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>Some implementations implement <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> as a function which simply assigns streams such as <a class="variable-reference" href="../chapter-21.xhtml#variable-*standard-output*">*standard-output*</a> to broadcast streams <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <span class="syntax-interned-symbol">approximate</span> <span class="syntax-interned-symbol">equivalent</span> <span class="syntax-interned-symbol">thereof</span>)</span>
</span></code>.  Even within this camp, there is not widespread agreement about which streams are affected. However, typically test case #1 will capture the output of <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">FOO</span></span>)</span>
</span></code> in the file "temp" and will execute <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">BAR</span></span>)</span>
</span></code> but not capture its output. <br/>Some implementations (eg, Symbolics) push to a recursive command loop when <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> is called with an argument, and return from that command loop when <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> is called with no argument. In these implementations, test case #1 will enter a recursive command loop upon the first call to <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> and will not execute the <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">FOO</span></span>)</span>
</span></code> until <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>)</span>
</span></code> is done interactively. When the second <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>)</span>
</span></code> in test case #1 is executed, <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> will complain that output is not currently being recorded. In test case #2, the output of <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">FOO</span></span>)</span>
</span></code> will be captured, but the form <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">BAR</span></span>)</span>
</span></code> will never be executed because <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>)</span>
</span></code> does not return normally <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">it</span> <span class="syntax-interned-symbol">throws</span>)</span>
</span></code>. <br/></section><section id="section-Cost to implementors" class="section"><h2 class="section-title">Cost to implementors</h2>None. This is just a clarification. <br/></section><section id="section-Cost to users" class="section"><h2 class="section-title">Cost to users</h2>Anyone who currently uses <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> in code that is believed to be portable is kidding himself. If such code works in some implementations, it can continue to work. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>Users will be aware that they cannot rely on <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> in portable code. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>No apparent effect. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2><a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a>, like other environment features, is a standard interface to a non-standard feature. As such, there is some question as to its place in the ANSI standard. However, if <a class="function-reference" href="../chapter-25.xhtml#function-dribble">dribble</a> remains in the standard, its behavior is made explicitly vague by this proposal. <br/></section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>