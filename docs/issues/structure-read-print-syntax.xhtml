<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — STRUCTURE-READ-PRINT-SYNTAX</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">STRUCTURE-READ-PRINT-SYNTAX</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-structure-read-print-syntax:keywords">Proposal KEYWORDS</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue STRUCTURE-READ-PRINT-SYNTAX [NIL] [CHANGE]</h1><h2>Related issues</h2><ul><li><a class="issue-reference" href="../issues/defstruct-slots-constraints-name.xhtml#issue-defstruct-slots-constraints-name">X3J13 Issue DEFSTRUCT-SLOTS-CONSTRAINTS-NAME</a></li></ul><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>V1, 11 May 90, Sandra Loosemore V2, 29 May 90, Sandra Loosemore (cross-references) </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>The use of non-keywords for slot names in #S reader/printer syntax is ugly.  The standard ought to encourage a cleaner style. <br/></section><section class="status-unknown proposal" id="issue-structure-read-print-syntax:keywords"><h2 class="section-title">Proposal KEYWORDS</h2><ol><li> Deprecate the use of non-keywords to name slots in #S syntax  for reading structures. <br/></li><li> Require that #S syntax for printing structures print slot  names as keywords. <br/></li></ol></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  This encourages a cleaner style while maintaining backward   compatibility for users. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  Some implementations already use keywords for printing   structures, while some use unqualified symbols.  Practice among   users is also mixed.  Many users tend to follow the example of   whatever implementation they use most frequently. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  The actual implementation cost of changing the #S printer    is trivial, but there may be more work involved in updating    documentation. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>   None. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  See "esthetics". <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  Using keywords is probably slightly more efficient than using   unqualified symbols, at least on the reader end. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  See "esthetics". <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  The use of non-keywords to name slots in #s syntax is ugly.   Technically, there is no reason now why both users and   implementors cannot use keywords, but the fact that CLtL   goes out of its way to explain that it's not necessary to   do so, and that all of the examples of #s syntax use non-keywords,    has encouraged both users and implementors to follow this style. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  Proposal <a class="issue-reference" href="../issues/defstruct-slots-constraints-name.xhtml#issue-defstruct-slots-constraints-name:duplicates-error">DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</a> made   it clear that <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> slot names must have unique   symbol-names.  Therefore there is no possibility for conflicts   if the slot names are printed as keyword symbols. <br/>  Several people have voiced support for at least changing the   examples in the standard to use keywords, to encourage both   users and implementors to adopt the style. <br/>  Dan Pierson says:     Yes, YEs, YES!  I've been wanting this fix for bogus implementations     since CLtL came out and ******lisp interpreted it the other way. </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>