<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — COPY-SYMBOL-COPY-PLIST</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">COPY-SYMBOL-COPY-PLIST</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-copy-symbol-copy-plist:copy-list">Proposal COPY-LIST</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue COPY-SYMBOL-COPY-PLIST [NIL] [CLARIFICATION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, Mar 89 X3J13 </section><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="function-reference" href="../chapter-10.xhtml#function-copy-symbol">copy-symbol</a> (p 169), <a class="function-reference" href="../chapter-14.xhtml#function-copy-list">copy-list</a> (p 268), <a class="function-reference" href="../chapter-14.xhtml#function-copy-tree">copy-tree</a> (p 269). </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>10-Jan-89, Version 1 by Margolin </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>The description of <a class="function-reference" href="../chapter-10.xhtml#function-copy-symbol">copy-symbol</a>, where the COPY-PROPS optional argument is <a class="glossary-reference" href="../chapter-26.xhtml#glossary-non-nil">non-nil</a>, says that a copy of the property list is used as the new symbol's property list.  However, there are several ways in which a list may be copied, most notably <a class="function-reference" href="../chapter-14.xhtml#function-copy-list">copy-list</a> and <a class="function-reference" href="../chapter-14.xhtml#function-copy-tree">copy-tree</a>, and the description doesn't say which mechanism should be used. <br/></section><section class="status-passed proposal" id="issue-copy-symbol-copy-plist:copy-list"><h2 class="section-title">Proposal COPY-LIST</h2>Clarify that when <a class="function-reference" href="../chapter-10.xhtml#function-copy-symbol">copy-symbol</a> copies the property list of the symbol, it is as if <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-14.xhtml#function-copy-list">copy-list</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-10.xhtml#function-symbol-plist">symbol-plist</a> <span class="syntax-interned-symbol">sym</span>)</span>)</span>
</span></code></pre> were used as the new symbol's property list. <br/></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2><a class="function-reference" href="../chapter-14.xhtml#function-copy-list">copy-list</a> is the simplest list-copying primitive.  The result of this copy is that <a class="function-reference" href="../chapter-10.xhtml#function-get">get</a> returns <a class="function-reference" href="../chapter-5.xhtml#function-eql">eql</a> results for the two symbols until one of the property lists is altered, but altering either of the property lists doesn't affect the other.  This is current practice in the implementations I tested, and probably what most users assume. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>Symbolics Genera and Sun Common Lisp currently implement this.  I suspect most others do, too. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>Little or none. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>None unless they've been assuming some other type of copy. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>Less ambiguity. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>Well, I like it. <br/><br/>     &mdash;&ndash; End Forwarded Messages &mdash;&ndash; </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>