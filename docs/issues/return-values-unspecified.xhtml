<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — RETURN-VALUES-UNSPECIFIED</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">RETURN-VALUES-UNSPECIFIED</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-return-values-unspecified:specify">Proposal SPECIFY</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Cost to users">Cost to users</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li><li><a href="#section-Notes from Oct 88 X3J13">Notes from Oct 88 X3J13</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue RETURN-VALUES-UNSPECIFIED [NIL] [CLARIFICATION]</h1><h2>Related issues</h2><ul><li><a class="issue-reference" href="../issues/require-pathname-defaults.xhtml#issue-require-pathname-defaults">REQUIRE-PATHNAME-DEFAULTS</a></li><li><a class="issue-reference" href="../issues/closed-stream-operations.xhtml#issue-closed-stream-operations">CLOSED-STREAM-OPERATIONS</a></li></ul><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, Jan 89 X3J13 </section><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="function-reference" href="../chapter-21.xhtml#function-close">CLOSE</a> (p 332), <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a> (p 183), <a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a> (p 184), <a class="macro-reference" href="../chapter-25.xhtml#macro-trace">TRACE</a> (p 440), <a class="macro-reference" href="../chapter-25.xhtml#macro-untrace">UNTRACE</a> (p 440), <a class="function-reference" href="../chapter-25.xhtml#function-inspect">INSPECT</a> (p 442),  <a class="function-reference" href="../chapter-23.xhtml#function-set-syntax-from-char">SET-SYNTAX-FROM-CHAR</a> (p 361), <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-locally">LOCALLY</a> (p 156), <a class="function-reference" href="../chapter-24.xhtml#function-provide">PROVIDE</a> (p 188), <a class="function-reference" href="../chapter-24.xhtml#function-require">REQUIRE</a> (P 188) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>26-Aug-88, Version 1 by Chapman 19-Sept-88, Version 2 by Chapman 6-Oct-88, Version 3 by Masinter 7-Oct-88, Version 4 by Masinter 26-Nov-88, Version 5 by Masinter 9-Dec-88, Version 6 by Masinter <br/></section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>The descriptions of <a class="function-reference" href="../chapter-21.xhtml#function-close">CLOSE</a>, <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a>, <a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a>, <a class="macro-reference" href="../chapter-25.xhtml#macro-trace">TRACE</a>, <a class="macro-reference" href="../chapter-25.xhtml#macro-untrace">UNTRACE</a>, <a class="function-reference" href="../chapter-25.xhtml#function-inspect">INSPECT</a>, <a class="function-reference" href="../chapter-23.xhtml#function-set-syntax-from-char">SET-SYNTAX-FROM-CHAR</a>, <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-locally">LOCALLY</a>, <a class="function-reference" href="../chapter-24.xhtml#function-provide">PROVIDE</a>, and <a class="function-reference" href="../chapter-24.xhtml#function-require">REQUIRE</a>  are not clear about the values returned from those constructs. <br/></section><section class="status-passed proposal" id="issue-return-values-unspecified:specify"><h2 class="section-title">Proposal SPECIFY</h2>Clarify that the return values for the listed constructs are as follows: <br/><a class="function-reference" href="../chapter-21.xhtml#function-close">CLOSE</a> &ndash; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a> &ndash; the new package, i.e. the value of <a class="variable-reference" href="../chapter-11.xhtml#variable-*package*">*PACKAGE*</a> after the execution of <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a>. <a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a> &ndash; the renamed package. <a class="macro-reference" href="../chapter-25.xhtml#macro-trace">TRACE</a> <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-when">when</a> <span class="syntax-interned-symbol">called</span> <span class="syntax-interned-symbol">with</span> <span class="syntax-interned-symbol">arguments</span>)</span>
</span></code> &ndash; <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>. <a class="macro-reference" href="../chapter-25.xhtml#macro-untrace">UNTRACE</a> &ndash; <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>. <a class="function-reference" href="../chapter-25.xhtml#function-inspect">INSPECT</a> &ndash; <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>. <a class="function-reference" href="../chapter-23.xhtml#function-set-syntax-from-char">SET-SYNTAX-FROM-CHAR</a> &ndash; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-locally">LOCALLY</a> &ndash; the return values of the last form of its body, i.e. the body is 	surrounded by an implicit <a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-progn">PROGN</a>. <a class="function-reference" href="../chapter-24.xhtml#function-provide">PROVIDE</a> &ndash; <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>. <a class="function-reference" href="../chapter-24.xhtml#function-require">REQUIRE</a> &ndash; <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>. <br/>(NB: the <a class="issue-reference" href="../issues/closed-stream-operations.xhtml#issue-closed-stream-operations">X3J13 Issue CLOSED-STREAM-OPERATIONS</a> proposes modifying the return value of <a class="function-reference" href="../chapter-21.xhtml#function-close">CLOSE</a> on closed streams. The issue  <a class="issue-reference" href="../issues/require-pathname-defaults.xhtml#issue-require-pathname-defaults">REQUIRE-PATHNAME-DEFAULTS</a> proposes removing  <a class="function-reference" href="../chapter-24.xhtml#function-require">REQUIRE</a> and <a class="function-reference" href="../chapter-24.xhtml#function-provide">PROVIDE</a>. Those proposals would take  priority over this one.) <br/></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>This clarification allows users to know when they can and can not count on the values returned from these constructs.  <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>Varies; the choices made here are consistent with many but not all implementations. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>Small. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>This clarification will assist users in writing portable code. <br/></section><section id="section-Cost to users" class="section"><h2 class="section-title">Cost to users</h2>Small; it seems unlikely that there is much code that currently depends on the return values of these functions; such code isn't portable. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>Specified is better than not, when it makes sense. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2><a class="function-reference" href="../chapter-24.xhtml#function-provide">PROVIDE</a> and <a class="function-reference" href="../chapter-24.xhtml#function-require">REQUIRE</a> are not likely to appear except in the "top level" of files, and so their return value is possibly moot.  Another proposal would eliminate them from the language, and then their return value would definitely be moot! <br/>There is some sentiment for leaving unspecified the values of the debugging/environment features such as <a class="macro-reference" href="../chapter-25.xhtml#macro-trace">TRACE</a> and <a class="macro-reference" href="../chapter-25.xhtml#macro-untrace">UNTRACE</a>, for the same reasons that so much else of their behavior is unspecified. <br/></section><section id="section-Notes from Oct 88 X3J13" class="section"><h2 class="section-title">Notes from Oct 88 X3J13</h2>Except for <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-locally">LOCALLY</a>, why bother? <br/>That just causes portability problems. Don't want to leave it unspecified -unless<a class="function-reference" href="../chapter-12.xhtml#function--">-</a> someone can cite a reason to do so. <br/>"If many weren't defined, maybe we should leave 'em, but since nearly all -are<a class="function-reference" href="../chapter-12.xhtml#function--">-</a> defined, let's just go ahead and round out the set." <br/>Most text books she's seen show <a class="function-reference" href="../chapter-21.xhtml#function-close">CLOSE</a> returning <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>. One text book shows it returning <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>. Since some people like to think of <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> as success and <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> as failure, maybe it should always return <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>. (See Issue: <a class="issue-reference" href="../issues/closed-stream-operations.xhtml#issue-closed-stream-operations">CLOSED-STREAM-OPERATIONS</a>.) </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>