<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — SLOT-MISSING-VALUES</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">SLOT-MISSING-VALUES</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-slot-missing-values:specify">Proposal SPECIFY</a><ol> </ol></li><li><a href="#section-Current practice">Current practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue SLOT-MISSING-VALUES [NIL] [CLARIFICATION]</h1><section id="section-References" class="section"><h2 class="section-title">References</h2>88-002R p.2-78..79 </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>29-Apr-90, Version 1 by Moon </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>  The document says that all values returned by a <a class="function-reference" href="../chapter-7.xhtml#function-slot-unbound">slot-unbound</a> or   <a class="function-reference" href="../chapter-7.xhtml#function-slot-missing">slot-missing</a> method are returned from <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a>, <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">setf</a>, <a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">slot-boundp</a>, or   <a class="function-reference" href="../chapter-7.xhtml#function-slot-makunbound">slot-makunbound</a>.  However, the language mandates particular values to be   returned by <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">setf</a> and by <a class="function-reference" href="../chapter-7.xhtml#function-slot-makunbound">slot-makunbound</a>, and mandates that <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a> and   <a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">slot-boundp</a> return exactly one value.  If methods can change this,   efficient compilation becomes very difficult. <br/>  This is Symbolics issue #19. <br/></section><section class="status-unknown proposal" id="issue-slot-missing-values:specify"><h2 class="section-title">Proposal SPECIFY</h2>  Specify exactly what is done with the values returned from a <a class="function-reference" href="../chapter-7.xhtml#function-slot-unbound">slot-unbound</a>   or <a class="function-reference" href="../chapter-7.xhtml#function-slot-missing">slot-missing</a> method, as follows: <br/>  If the operation was <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">setf</a> or <a class="function-reference" href="../chapter-7.xhtml#function-slot-makunbound">slot-makunbound</a>, the values are ignored. <br/>  If the operation was <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a> or <a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">slot-boundp</a>, exactly one value is   returned; extra values returned by the method are ignored, and if the   method returns no values, <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> is returned. <br/>  If the operation was <a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">slot-boundp</a> and the method returns a value other   than <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>, <a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">slot-boundp</a> might return any object other than <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> that it can   validly return; only the truth or falsity of the method's value matters. <br/></section><section id="section-Current practice" class="section"><h2 class="section-title">Current practice</h2>  It's likely that all CLOS implementations already conform to the proposal,   since implementing what the document says would be extremely difficult.   I have not actually tested any implementations. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  What's proposed is what's easiest to implement. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  None, since it's unlikely that any users would depend on being able to   force <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a> to return two values, or to force <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">setf</a> of <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a> to   return something different from new-value. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  CLOS will be seriously difficult to implement correctly. <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  Implementing CLOS correctly will cause a serious efficiency impact on   <a class="function-reference" href="../chapter-7.xhtml#function-slot-value">slot-value</a> if this proposal is not adopted, since it will have to be   capable of dynamically deciding at run time to return multiple values. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  Simpler and more consistent language. <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  Simpler and more consistent language. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  None. </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>