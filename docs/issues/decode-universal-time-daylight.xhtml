<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — DECODE-UNIVERSAL-TIME-DAYLIGHT</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">DECODE-UNIVERSAL-TIME-DAYLIGHT</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-decode-universal-time-daylight:like-encode">Proposal LIKE-ENCODE</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Test Case">Test Case</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of Non-Adoption">Cost of Non-Adoption</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue DECODE-UNIVERSAL-TIME-DAYLIGHT [NIL] [CLARIFICATION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, Jan 89 X3J13 </section><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> (p445) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>20-Jun-88, Version 1 by Pitman 30-Sep-88, Version 2 by Masinter </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>  The description of <a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> does not say what happens with   TIME-ZONE. Since the description of <a class="function-reference" href="../chapter-25.xhtml#function-encode-universal-time">encode-universal-time</a> mentions that   its behavior differs depending on whether a time zone is explicitly passed,   some implementors may have assumed that <a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> should do   likewise. <br/>  Even if all implementations did the same thing, it should still be clarified   whether an implementation were permitted to return dsp=NIL tz=n rather than   dsp=T tz=n+1 for time zones in which daylight savings time was believed to   be <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">known</span> <span class="syntax-interned-symbol">to</span> <span class="syntax-interned-symbol">be</span>)</span>
</span></code> in effect. Currently, you cannot tell whether "<a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>" for   daylight-savings-time-p means "daylight savings time is in effect" or   just "daylight savings time is not known to not be in effect". <br/>  These tools appear to be more portable than they are. <br/></section><section class="status-passed proposal" id="issue-decode-universal-time-daylight:like-encode"><h2 class="section-title">Proposal LIKE-ENCODE</h2>  Specify that, like <a class="function-reference" href="../chapter-25.xhtml#function-encode-universal-time">encode-universal-time</a>, <a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> ignores   daylight savings information if a timezone is explicitly specified. <br/></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  This makes things consistent with <a class="function-reference" href="../chapter-25.xhtml#function-encode-universal-time">encode-universal-time</a>. <br/></section><section id="section-Test Case" class="section"><h2 class="section-title">Test Case</h2><pre>  ;; ### This test case relies on time zone not changing in real<br/>  ;; ###   time, in defiance of warning in note at bottom<br/>  ;; ###   of p445.<br/><br/>  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-let*">let*</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">HERE</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-14.xhtml#function-nth">nth</a> <span class="syntax-number">8</span> <span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-multiple-value-list">multiple-value-list</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-get-decoded-time">get-decoded-time</a>)</span>)</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;Time zone
</span>	 <span class="syntax-cons">(<span class="syntax-interned-symbol">RECENTLY</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-get-universal-time">get-universal-time</a>)</span>)</span>
	 <span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-14.xhtml#function-nthcdr">nthcdr</a> <span class="syntax-number">7</span> <span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-multiple-value-list">multiple-value-list</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> <span class="syntax-interned-symbol">RECENTLY</span>)</span>)</span>)</span>)</span>
	 <span class="syntax-cons">(<span class="syntax-interned-symbol">B</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-14.xhtml#function-nthcdr">nthcdr</a> <span class="syntax-number">7</span> <span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-multiple-value-list">multiple-value-list</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> <span class="syntax-interned-symbol">RECENTLY</span> <span class="syntax-interned-symbol">HERE</span>)</span>)</span>)</span>)</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="../chapter-14.xhtml#function-list">list</a> <span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-5.xhtml#function-equal">equal</a> <span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span>)</span>)</span>)</span>
</span></code></pre><br/><br/>Under this proposal, this would return <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-cons">(<a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> <span class="syntax-number">5</span>)</span> <span class="syntax-cons">(<a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-number">5</span>)</span> <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>)</span>
</span></code> in EDT, for example. <br/><br/></pre></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2> Symbolics Genera, Symbolics Cloe, Lucid 3.0 and Envos Medley seem to   implement this proposal. Some other implementations do not. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  The cost of changing this should be trivial. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  This feature is already not well-defined since no portable program can rely   on the current behavior, so the cost is small. <br/></section><section id="section-Cost of Non-Adoption" class="section"><h2 class="section-title">Cost of Non-Adoption</h2>  The time primitives are considerably less useful if this point is not   clearly spelled out. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  The cost of non-adoption would be avoided. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>  Anything that improves the intelligibility of language primitives improves   language aesthetics. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  An alternative would be to specify that, unlike <a class="function-reference" href="../chapter-25.xhtml#function-encode-universal-time">encode-universal-time</a>,   <a class="function-reference" href="../chapter-25.xhtml#function-decode-universal-time">decode-universal-time</a> treats daylight savings information the same   regardless of whether a time zone argument is explicitly or not. This seems    actually to be what was intended originally. <br/>  This problem arose while trying to port Macsyma between different   Common Lisp implementations. The cleanup committee does not have   a strong opinion on this matter, as long as the behavior is specified. </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>