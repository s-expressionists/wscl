<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — DEFVAR-INITIALIZATION</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">DEFVAR-INITIALIZATION</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-defvar-initialization:conservative">Proposal CONSERVATIVE</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Adoption Cost">Adoption Cost</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Conversion Cost">Conversion Cost</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue DEFVAR-INITIALIZATION [NIL] [CLARIFICATION/CHANGE]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>passed, Jun 87 </section><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">defvar</a> (p68) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>Version 1 by Pitman 02/26/87 Version 2 by cleanup committee 15-Mar-87 <span class="issue-reference error">issue:14:45</span>:18 Version 3 by Masinter (format) 15-Mar-87 <span class="issue-reference error">issue:18:34</span>:28 Version 4 by Masinter  5-Jun-87 </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>The description of <a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">defvar</a> on p.68 is not adequately clear on what happens if an initialization value is not provided, as in <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">defvar</a> <span class="syntax-interned-symbol">FOO</span>)</span>
</span></code></pre>. Does this initialize the variable? <br/></section><section class="status-passed proposal" id="issue-defvar-initialization:conservative"><h2 class="section-title">Proposal CONSERVATIVE</h2>If the one-argument form of <a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">defvar</a> is used, the value <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">lack</span> <span class="syntax-interned-symbol">of</span> <span class="syntax-interned-symbol">value</span>)</span>
</span></code></pre> of the variable is not changed. <br/></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>In parent languages to <a class="package-reference" href="../chapter-11.xhtml#package-cl">cl</a>, such behavior was documented. The omission of clear documentation in <a class="package-reference" href="../chapter-11.xhtml#package-cl">cl</a> is presumably an accident. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>Most implementations already do not initialize the variable. Some implementations, however, assume that the missing initial value defaults to <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> and assume that the variable is always to be initialized if unbound. <br/></section><section id="section-Adoption Cost" class="section"><h2 class="section-title">Adoption Cost</h2>Some implementations suffer a minor incompatible change.  The modification to systems is presumably trivial. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>It's sometimes useful to have the ability to declare a variable without initializing it. More importantly, though, <a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">defvar</a> is used by lots of users in every implementation and it deserves uniform treatment. <br/></section><section id="section-Conversion Cost" class="section"><h2 class="section-title">Conversion Cost</h2>It's stylistically poor to be relying on the variable to be initialized without writing the initial value explicitly anyway. Except for very rare situations where a conditional action is taken based on a <a class="function-reference" href="../chapter-10.xhtml#function-boundp">boundp</a> test of the variable, user programs are unlikely to be affected in practice. <br/>Very few user programs are likely to be affected. The incidence rate is probably sufficiently low that the issue of automatic tools for conversion is irrelevant. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>No significant issues are obvious. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>The cleanup committee generally supports this clarification. <br/>[Version 3 was distributed at the last X3J13 meeting. This version has changed only to bring it in line with the current proposal format.] </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>