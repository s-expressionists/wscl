<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — PARSE-ERROR-STREAM</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">PARSE-ERROR-STREAM</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit History">Edit History</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-parse-error-stream:split-types">Proposal SPLIT-TYPES</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue PARSE-ERROR-STREAM [Cleanup] [CHANGE/CLARIFICATION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Version 3 passed, 6/8/90 </section><section id="section-References" class="section"><h2 class="section-title">References</h2>Condition System, Version 18 <a class="issue-reference" href="../issues/reader-error.xhtml#issue-reader-error">X3J13 Issue READER-ERROR</a> <a class="issue-reference" href="../issues/clos-conditions.xhtml#issue-clos-conditions">X3J13 Issue CLOS-CONDITIONS</a> </section><section id="section-Edit History" class="section"><h2 class="section-title">Edit History</h2>Version 1, 1/3/90 by Kim A. Barrett Version 2, 6/6/90 by Kim A. Barrett Version 3, 6/11/90 by Kim A. Barrett (X3J13 ammendments) </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>  The recently passed <a class="issue-reference" href="../issues/reader-error.xhtml#issue-reader-error">X3J13 Issue READER-ERROR</a> defined the new condition type   <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> as a subtype of <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a>.  This means that <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a>   inherits behavior on the function <a class="function-reference" href="../chapter-21.xhtml#function-stream-error-stream">stream-error-stream</a>, and has :STREAM as   the associated initarg.  The description of <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> can be read to   imply that the value of <a class="function-reference" href="../chapter-21.xhtml#function-stream-error-stream">stream-error-stream</a> is in fact a <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a>.  That is,   that <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-typep">typep</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-21.xhtml#function-stream-error-stream">stream-error-stream</a> <span class="syntax-interned-symbol">c</span>)</span> <span class="syntax-quote">'<a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a></span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function--">-</a>&gt; true.  However, it is fairly   easy to imagine a program which might want to signal <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> under some   circumstance, but which is not using a Common Lisp stream as its source of   input. <br/></section><section class="status-passed proposal" id="issue-parse-error-stream:split-types"><h2 class="section-title">Proposal SPLIT-TYPES</h2><ol><li> Define that <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> has the class precedence list   <code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code>  thus making it no longer be a subtype of <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a>. <br/></li><li> Define a new condition called <a class="type-reference" href="../chapter-23.xhtml#type-reader-error">reader-error</a>, with class precedence list    <code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-23.xhtml#type-reader-error">reader-error</a> <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code>. <br/></li></ol>  <a class="issue-reference" href="../issues/reader-error.xhtml#issue-reader-error">X3J13 Issue READER-ERROR</a> (version 3, passed 11/89) specified that the reader was to   signal errors of type <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> for serious conditions that relate to   lexical analysis <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <span class="syntax-interned-symbol">building</span> <a class="macro-reference" href="../chapter-5.xhtml#macro-and">and</a> <span class="syntax-interned-symbol">interpretation</span> <span class="syntax-interned-symbol">of</span> <span class="syntax-interned-symbol">tokens</span>)</span>
</span></code> and parsing   <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">errors</span> <span class="syntax-interned-symbol">in</span> <span class="syntax-interned-symbol">reader</span> <span class="syntax-interned-symbol">macro</span> <span class="syntax-interned-symbol">syntax</span>)</span>
</span></code> by the Lisp reader.  Change this to instead   specify that the reader signals errors of type <a class="type-reference" href="../chapter-23.xhtml#type-reader-error">reader-error</a> for such   situations.  There are numerous places <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">especially</span> <span class="syntax-interned-symbol">in</span> <span class="syntax-interned-symbol">chapter</span> <span class="syntax-number">3</span>)</span>
</span></code> that would   be affected. <br/>Rational: <br/>  <a class="proposal-reference" href="#issue-parse-error-stream:split-types">SPLIT-TYPES</a> fixes the problem in the obvious way.  If a program needs a   condition which inherits from both is desired, such a condition can be   trivially defined, since <a class="issue-reference" href="../issues/clos-conditions.xhtml#issue-clos-conditions">X3J13 Issue CLOS-CONDITIONS</a> says that we now have   multiple inheritance for conditions. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> is sufficiently new that few implementations are likely to   have added it. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  Should be trivial. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  If this does not passe then some programs which might otherwise reasonably   signal <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a>s will not be able to do so. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  Barrett supports <a class="proposal-reference" href="#issue-parse-error-stream:split-types">SPLIT-TYPES</a>.  He had some qualms about the merging when   he first saw the <a class="type-reference" href="../chapter-23.xhtml#type-reader-error">reader-error</a> issue, but didn't have time to think about   it much before the issue was voted on. <br/><br/></section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>