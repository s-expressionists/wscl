<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — PACKAGE-FUNCTION-CONSISTENCY</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">PACKAGE-FUNCTION-CONSISTENCY</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-package-function-consistency:more-permissive">Proposal MORE-PERMISSIVE</a><ol> </ol></li><li><a href="#section-Examples">Examples</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of Non-Adoption">Cost of Non-Adoption</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue PACKAGE-FUNCTION-CONSISTENCY [NIL] [CLARIFICATION/CHANGE]</h1><section id="section-References" class="section"><h2 class="section-title">References</h2>11.7 Package System Functions and Variables (pp182-188) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>21-Oct-88, Version 1 by Pitman 12-Jan-89, Version 2 by Masinter (add <a class="proposal-reference" href="#issue-package-function-consistency:more-permissive">MORE-PERMISSIVE</a> option) 17-Mar-89, Version 3, by Masinter, <a class="proposal-reference" href="#issue-package-function-consistency:more-permissive">MORE-PERMISSIVE</a> as amended &amp; adopted at Jan 89 X3j13 17-Mar-89, Version 4, by Moon, correct amended wording </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>  CLtL is vague about whether either or both of package or package name   are permissible in some cases. <br/></section><section class="status-unknown proposal" id="issue-package-function-consistency:more-permissive"><h2 class="section-title">Proposal MORE-PERMISSIVE</h2>  Clarify that it is permissible to pass either a package object   or a package name <code><span class="syntax-root"><span class="syntax-cons">(<a class="symbol-reference" href="../chapter-2.xhtml#symbol-symbol">symbol</a> <a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <a class="function-reference" href="../chapter-16.xhtml#function-string">string</a>)</span>
</span></code> in the following situations:     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the :USE argument to <a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> or <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a>     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the first argument to <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a>, <a class="function-reference" href="../chapter-11.xhtml#function-find-package">FIND-PACKAGE</a>, <a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a> 			or <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the second argument to <a class="function-reference" href="../chapter-11.xhtml#function-intern">INTERN</a>, <a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a>, <a class="function-reference" href="../chapter-11.xhtml#function-unintern">UNINTERN</a>     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the second argument to <a class="function-reference" href="../chapter-11.xhtml#function-export">EXPORT</a>, <a class="function-reference" href="../chapter-11.xhtml#function-unexport">UNEXPORT</a>, <a class="function-reference" href="../chapter-11.xhtml#function-import">IMPORT</a>,       <a class="function-reference" href="../chapter-11.xhtml#function-shadowing-import">SHADOWING-IMPORT</a>, and <a class="function-reference" href="../chapter-11.xhtml#function-shadow">SHADOW</a>     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the first argument <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">a</span> <a class="function-reference" href="../chapter-14.xhtml#function-member">member</a> <span class="syntax-interned-symbol">of</span> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <a class="function-reference" href="../chapter-14.xhtml#function-list">list</a> <span class="syntax-interned-symbol">which</span> <span class="syntax-interned-symbol">is</span> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <a class="function-reference" href="../chapter-14.xhtml#function-first">first</a>
      <span class="syntax-interned-symbol">argument</span>)</span>
</span></code></pre> to <a class="function-reference" href="../chapter-11.xhtml#function-use-package">USE-PACKAGE</a> or <a class="function-reference" href="../chapter-11.xhtml#function-unuse-package">UNUSE-PACKAGE</a>.     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> all <a class="function-reference" href="../chapter-11.xhtml#function-package-name">package-name</a> arguments in <a class="macro-reference" href="../chapter-11.xhtml#macro-defpackage">DEFPACKAGE</a> except for the name and       nicknames of the package being defined.     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the first argument to <a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a>, <a class="function-reference" href="../chapter-11.xhtml#function-package-nicknames">PACKAGE-NICKNAMES</a>,        <a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a>, or <a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a>     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> argument to <a class="macro-reference" href="../chapter-11.xhtml#macro-do-symbols">DO-SYMBOLS</a>.     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> argument to <a class="macro-reference" href="../chapter-11.xhtml#macro-do-external-symbols">DO-EXTERNAL-SYMBOLS</a>.     <a class="function-reference" href="../chapter-12.xhtml#function--">-</a> the <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> argument to <a class="macro-reference" href="../chapter-11.xhtml#macro-do-all-symbols">DO-ALL-SYMBOLS</a>. <br/>  If <a class="function-reference" href="../chapter-11.xhtml#function-find-package">FIND-PACKAGE</a> is given a package object as an argument, it simply   returns it. <br/>  Clarify that the function <a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> permits only a package name   as an argument since it does not make sense to create an existing   package. <br/>  Clarify that package nicknames must always be expressed as package   names <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">symbols</span> <a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">strings</span>)</span>
</span></code> and may never be actual package objects. <br/>  In the list above, <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a> may be changed to SELECT-PACKAGE   if <span class="issue-reference error">issue:IN-PACKAGE-FUNCTIONALITY</span> passes. <br/></section><section id="section-Examples" class="section"><h2 class="section-title">Examples</h2><pre>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-intern">INTERN</a> <span class="syntax-string">"FOO"</span> <span class="syntax-string">"KEYWORD"</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; :FOO<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-defvar">DEFVAR</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> <span class="syntax-string">"FOO"</span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a> <span class="syntax-string">"FOO"</span> <span class="syntax-string">"FOO0"</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "FOO0"<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-string">"SYS"</span>)</span>
</span></code> might return "<a class="package-reference" href="../chapter-A.xhtml#package-system">SYSTEM</a>".<br/><br/></pre></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>   This makes things more consistent.    It also adds a generally useful capability. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  Symbolics Genera &amp; Lucid permit strings as package names.   Symbolics Cloe does not permit strings as package names.   In Lucid <a class="function-reference" href="../chapter-11.xhtml#function-find-package">FIND-PACKAGE</a> and <a class="macro-reference" href="../chapter-11.xhtml#macro-in-package">IN-PACKAGE</a> require names. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  Small. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  None. This change is upward compatible. <br/></section><section id="section-Cost of Non-Adoption" class="section"><h2 class="section-title">Cost of Non-Adoption</h2>  Implementations would continue to vary gratuitously, leaving a potential   for portability problems. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  The cost of non-adoption is avoided. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>  This makes things more regular, and so presumably more aesthetic. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  Pitman ran across this problem while trying to port Macsyma to various   implementations. Discussion with other maintainers of portable programs   shows this is a common source of aggravation in portable code. <br/>  It would be possible to say that <a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> took package objects as   arguments and just returned that package. That might have limited   usefulness on rare occasions, but mostly seemed too far out in left   field to bother suggesting it. </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>