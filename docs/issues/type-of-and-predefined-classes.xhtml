<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp â€” TYPE-OF-AND-PREDEFINED-CLASSES</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">TYPE-OF-AND-PREDEFINED-CLASSES</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit History">Edit History</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-type-of-and-predefined-classes:unify-and-extend">Proposal UNIFY-AND-EXTEND</a><ol> </ol></li><li><a href="#issue-type-of-and-predefined-classes:float-subclasses">Proposal FLOAT-SUBCLASSES</a><ol> </ol></li><li><a href="#issue-type-of-and-predefined-classes:type-of-handles-floats">Proposal TYPE-OF-HANDLES-FLOATS</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue TYPE-OF-AND-PREDEFINED-CLASSES [Cleanup] [Change]</h1><section id="section-References" class="section"><h2 class="section-title">References</h2>Draft 8/29/89, sections 2.2 and 2.3 Draft 8/29/89, <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> <a class="issue-reference" href="../issues/type-of-underconstrained.xhtml#issue-type-of-underconstrained">X3J13 Issue TYPE-OF-UNDERCONSTRAINED</a> <a class="issue-reference" href="../issues/data-types-hierarchy-underspecified.xhtml#issue-data-types-hierarchy-underspecified">X3J13 Issue DATA-TYPES-HIERARCHY-UNDERSPECIFIED</a> <a class="issue-reference" href="../issues/function-type.xhtml#issue-function-type">X3J13 Issue FUNCTION-TYPE</a> <a class="issue-reference" href="../issues/floating-point-condition-names.xhtml#issue-floating-point-condition-names">X3J13 Issue FLOATING-POINT-CONDITION-NAMES</a> <a class="issue-reference" href="../issues/reader-error.xhtml#issue-reader-error">X3J13 Issue READER-ERROR</a> Condition System, Version 18 </section><section id="section-Edit History" class="section"><h2 class="section-title">Edit History</h2>Version 1, 1/2/90 by Kim A. Barrett Version 2, 2/16/90 by Kim A. Barrett (from Moon's comments) </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2> In the 8/29/89 Draft there are three different lists of built-in type  specifiers, all of which are slightly different.  Since some of the  differences seem to be simply oversights, it would probably be helpful if they  could be merged together.  <br/> The locations of these lists in the Draft are <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">1</span>)</span>
</span></code></pre> Section 2.2, in the  description of the type disjointness requirements in the subsection entitled  "Type Relationships", <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">2</span>)</span>
</span></code></pre> Section 2.3, in Figure 2-13 "Classes that correspond  to pre-defined type specifiers", and <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">3</span>)</span>
</span></code></pre> in the description of the function  <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a>.  <br/> The following table indicates which type names do not appear in all three  places.  The groupings were made to facilitate the discussion below.  <br/><ol><li>            <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">2</span>)</span>
</span></code></pre>             <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">3</span>)</span>
</span></code></pre> </li></ol>  Group 1   <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a>             x                               x   <a class="function-reference" href="../chapter-14.xhtml#function-list">list</a>                  x               x   <a class="function-reference" href="../chapter-19.xhtml#function-logical-pathname">logical-pathname</a>   <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a>                  x               x   <a class="type-reference" href="../chapter-9.xhtml#type-restart">restart</a>               x                               x   Group 2   <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>           special                         x   <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>          special                         x   <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>          special                         x   <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>            special                         x   Group 3   <a class="type-reference" href="../chapter-21.xhtml#type-broadcast-stream">broadcast-stream</a>      x   <a class="type-reference" href="../chapter-21.xhtml#type-concatenated-stream">concatenated-stream</a>   x   <a class="type-reference" href="../chapter-21.xhtml#type-echo-stream">echo-stream</a>           x   <a class="type-reference" href="../chapter-21.xhtml#type-file-stream">file-stream</a>           x   <a class="type-reference" href="../chapter-21.xhtml#type-string-stream">string-stream</a>         x   <a class="type-reference" href="../chapter-21.xhtml#type-synonym-stream">synonym-stream</a>        x   <a class="type-reference" href="../chapter-21.xhtml#type-two-way-stream">two-way-stream</a>        x   Group 4   <a class="symbol-reference" href="../chapter-2.xhtml#symbol-simple-bit-vector">simple-bit-vector</a>     x   <a class="type-reference" href="../chapter-16.xhtml#type-simple-string">simple-string</a>         x   <a class="symbol-reference" href="../chapter-2.xhtml#symbol-simple-vector">simple-vector</a>         x   Group 5   <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a>     x   <a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a>      x   <a class="type-reference" href="../chapter-9.xhtml#type-warning">warning</a>               x   Group 6   <a class="type-reference" href="../chapter-12.xhtml#type-fixnum">fixnum</a>                x   <a class="type-reference" href="../chapter-12.xhtml#type-bignum">bignum</a>                x <br/></section><section class="status-unknown proposal" id="issue-type-of-and-predefined-classes:unify-and-extend"><h2 class="section-title">Proposal UNIFY-AND-EXTEND</h2><ol><li> Make the following changes to the disjointness requirements specified in Section 2.2, subsection Type Relationships.  This supersedes issue <a class="issue-reference" href="../issues/data-types-hierarchy-underspecified.xhtml#issue-data-types-hierarchy-underspecified">data-types-hierarchy-underspecified</a> and the corresponding sections of issue <a class="issue-reference" href="../issues/function-type.xhtml#issue-function-type">function-type</a>. <br/>1a. Change the third bullet to <br/>  "Among the types which correspond to predefined classes (listed in Figure    {insert figure number here, currently 2-13 }) only the subtype    relationships specified for those classes may exist.  Any type created by    <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">defstruct</a>, <a class="macro-reference" href="../chapter-7.xhtml#macro-defclass">defclass</a>, or <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a> is disjoint from any of the    listed types and from any other type created by these forms, except for    type relationships explicitly established by specifying superclasses in    <a class="macro-reference" href="../chapter-7.xhtml#macro-defclass">defclass</a> or <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a>, or through the use of the :include option of    <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">defstruct</a>." <br/>1b. Strike bullets 4-6 and 21 <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">since</span> <span class="syntax-interned-symbol">they</span> <span class="syntax-interned-symbol">now</span> <span class="syntax-interned-symbol">follow</span> <span class="syntax-interned-symbol">from</span> <span class="syntax-interned-symbol">bullet</span> <span class="syntax-number">3</span>)</span>
</span></code></pre>. <br/></li><li> Make the following changes to the constraints on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a>. </li></ol><br/> 2a. Change the first constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> to be <br/>   "For any object for which <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-typep">typep</a> <span class="syntax-interned-symbol">object</span> <a class="symbol-reference" href="../chapter-25.xhtml#symbol-type">type</a>)</span>
</span></code></pre> is true when type is one of     the types for which there is a corresponding predefined class listed in     Figure { insert figure number here, currently 2-13 }, the result of     <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> is a type specifier for which <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-subtypep">subtypep</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> <span class="syntax-interned-symbol">object</span>)</span> <a class="symbol-reference" href="../chapter-25.xhtml#symbol-type">type</a>)</span>
</span></code></pre>     returns <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>, i.e., either the type or a subtype of it <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">a</span> <span class="syntax-interned-symbol">subtype</span> <span class="syntax-interned-symbol">that</span> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a>
    <span class="syntax-interned-symbol">implementation</span><span class="syntax-quote">'<span class="syntax-interned-symbol">s</span></span> <a class="function-reference" href="../chapter-4.xhtml#function-subtypep">subtypep</a> <span class="syntax-interned-symbol">can</span> <span class="syntax-interned-symbol">recognize</span>)</span>
</span></code></pre>." <br/> 2b. Change the fifth constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> to also include condition types  defined with <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a> and objects created with <a class="function-reference" href="../chapter-9.xhtml#function-make-condition">make-condition</a>. <br/> 3. Make the following additions to the set of predefined classes. <br/> 3a. Add the following condition classes, with the specified class precedence  lists: <br/>  <a class="type-reference" href="../chapter-12.xhtml#type-arithmetic-error">arithmetic-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-cell-error">cell-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-cell-error">cell-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-5.xhtml#type-control-error">control-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-5.xhtml#type-control-error">control-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-12.xhtml#type-division-by-zero">division-by-zero</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-division-by-zero">division-by-zero</a> <span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-end-of-file">end-of-file</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-end-of-file">end-of-file</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-20.xhtml#type-file-error">file-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-20.xhtml#type-file-error">file-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-12.xhtml#type-floating-point-inexact">floating-point-inexact</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-floating-point-inexact">floating-point-inexact</a> <span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-12.xhtml#type-floating-point-invalid-operation">floating-point-invalid-operation</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-floating-point-invalid-operation">floating-point-invalid-operation</a>
                        <span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-12.xhtml#type-floating-point-overflow">floating-point-overflow</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-floating-point-overflow">floating-point-overflow</a> <span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-12.xhtml#type-floating-point-underflow">floating-point-underflow</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-floating-point-underflow">floating-point-underflow</a> <span class="syntax-interned-symbol">ARITHMENTIC-ERROR</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-11.xhtml#type-package-error">package-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-11.xhtml#type-package-error">package-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>    <a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-parse-error">parse-error</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-22.xhtml#type-print-not-readable">print-not-readable</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-22.xhtml#type-print-not-readable">print-not-readable</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <span class="syntax-interned-symbol">SERIOUS-CONDIITON</span> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-5.xhtml#type-program-error">program-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-5.xhtml#type-program-error">program-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-simple-error">simple-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-simple-error">simple-error</a> <a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-simple-type-error">simple-type-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-simple-type-error">simple-type-error</a> <a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a> <a class="type-reference" href="../chapter-4.xhtml#type-type-error">type-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-simple-warning">simple-warning</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-simple-warning">simple-warning</a> <a class="type-reference" href="../chapter-9.xhtml#type-simple-condition">simple-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-warning">warning</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-storage-condition">storage-condition</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-storage-condition">storage-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-stream-error">stream-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-style-warning">style-warning</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-style-warning">style-warning</a> <a class="type-reference" href="../chapter-9.xhtml#type-warning">warning</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-type-error">type-error</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-type-error">type-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-7.xhtml#type-unbound-slot">unbound-slot</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-7.xhtml#type-unbound-slot">unbound-slot</a> <a class="type-reference" href="../chapter-9.xhtml#type-cell-error">cell-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-10.xhtml#type-unbound-variable">unbound-variable</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-10.xhtml#type-unbound-variable">unbound-variable</a> <a class="type-reference" href="../chapter-9.xhtml#type-cell-error">cell-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-5.xhtml#type-undefined-function">undefined-function</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-5.xhtml#type-undefined-function">undefined-function</a> <a class="type-reference" href="../chapter-9.xhtml#type-cell-error">cell-error</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <a class="type-reference" href="../chapter-9.xhtml#type-serious-condition">serious-condition</a>
                        <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-9.xhtml#type-warning">warning</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-warning">warning</a> <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/> 3b. Add the class <a class="type-reference" href="../chapter-9.xhtml#type-restart">restart</a>, with a class precedence list of <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-9.xhtml#type-restart">restart</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>. <br/> 3c. Add the class <a class="function-reference" href="../chapter-19.xhtml#function-logical-pathname">logical-pathname</a>, with a class precedence list of  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-19.xhtml#function-logical-pathname">logical-pathname</a> <a class="function-reference" href="../chapter-19.xhtml#function-pathname">pathname</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>. <br/> 3d. Add the following classes with the specified class precedence lists:   <a class="type-reference" href="../chapter-21.xhtml#type-broadcast-stream">broadcast-stream</a>              <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-broadcast-stream">broadcast-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-concatenated-stream">concatenated-stream</a>           <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-concatenated-stream">concatenated-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-echo-stream">echo-stream</a>                   <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-echo-stream">echo-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-file-stream">file-stream</a>                   <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-file-stream">file-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-string-stream">string-stream</a>                 <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-string-stream">string-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-synonym-stream">synonym-stream</a>                <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-synonym-stream">synonym-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-21.xhtml#type-two-way-stream">two-way-stream</a>                <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-21.xhtml#type-two-way-stream">two-way-stream</a> <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>  Remove the 23rd bullet from Section 2.2, subsection Type Relationships,  which lists the above types as being disjoint subtypes of <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a>. <br/> 3e. Add the following classes from the CLOS specification, with the specified  class precedence lists:   <a class="type-reference" href="../chapter-4.xhtml#type-built-in-class">built-in-class</a>                <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-built-in-class">built-in-class</a> <a class="type-reference" href="../chapter-4.xhtml#type-class">class</a> <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-class">class</a>                         <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-class">class</a> <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-generic-function">generic-function</a>              <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-generic-function">generic-function</a> <a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-function">function</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-method">method</a>                        <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-method">method</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="symbol-reference" href="../chapter-25.xhtml#symbol-method-combination">method-combination</a>            <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="symbol-reference" href="../chapter-25.xhtml#symbol-method-combination">method-combination</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-standard-class">standard-class</a>                <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-standard-class">standard-class</a> <a class="type-reference" href="../chapter-4.xhtml#type-class">class</a> <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-standard-generic-function">standard-generic-function</a>     <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-standard-generic-function">standard-generic-function</a> <a class="type-reference" href="../chapter-4.xhtml#type-generic-function">generic-function</a>
                                        <a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-function">function</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-standard-method">standard-method</a>               <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-standard-method">standard-method</a> <a class="type-reference" href="../chapter-4.xhtml#type-method">method</a> <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a>               <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-structure-class">structure-class</a>               <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-structure-class">structure-class</a> <a class="type-reference" href="../chapter-4.xhtml#type-class">class</a> <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>   <a class="type-reference" href="../chapter-4.xhtml#type-structure-object">structure-object</a>              <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-4.xhtml#type-structure-object">structure-object</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/> 4. Allow implementations to modify the class precedence lists of classes  which are not specified to include either <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> or <a class="type-reference" href="../chapter-4.xhtml#type-structure-object">structure-object</a>  to include those classes, placed before the class <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> but after all of the  other specified classes. <br/></section><section class="status-unknown proposal" id="issue-type-of-and-predefined-classes:float-subclasses"><h2 class="section-title">Proposal FLOAT-SUBCLASSES</h2> Add the following to <a class="issue-reference" href="#issue-type-of-and-predefined-classes:unify-and-extend">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a>: <br/> 3f. Add the following subclasses of <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a>:  <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>,  <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>.  It is <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-defined">implementation-defined</a> which among these  classes are pairwise disjoint.  If there are fewer than four internal  representations for floats, then some of these classes will not have proper  names.  Instead, the rules for handling fewer than four internal  representations (described in Section 2.2 subsection Data Type Definition) are  used to determine the principal type name, for which there will be a class  which has a proper name.  The other types which share the internal  representation will all share the principal class.  The class precedence list  for the properly named classes are  <br/>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/> where '<a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>' is the name of the class.  Thus we get the following rules  to handle a situation where there are fewer than four internal representations  of floats.  <br/><ol><li> If there is only one internal representation for floats, then there is one class, named <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>.  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns this class for all four of the subclasses of <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a>.  The class precedence list for this class is <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>. <br/></li><li> If there are two internal representations for floats, then they can be arranged in either of the following ways:  <br/>* Two classes are provided, named <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a> and <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>.   <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns the class <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> for any of the   names <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>, or <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>.  The class precedence   lists of these classes are:   <br/>    <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>     <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/>* Two classes are provided, names <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> and <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>.   <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns the class <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> for either of the   names <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a> or <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>.  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns the   class <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> for either of the names <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> or <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>.   The class precedence lists for these classes are:  <br/>    <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/></li><li> If there are three internal representations for floats, then they can be arranged in either of the following ways: <br/>* Three classes are provided, named <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>, and   <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>.  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns the class <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> for   either of the names <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> or <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>.  The class precedence   lists for these classes are:  <br/>    <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>     <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/>* Three classes are provided, named <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>, and   <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>.  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">find-class</a> <a class="function-reference" href="../chapter-7.xhtml#function-class-name">class-name</a>)</span>
</span></code></pre> returns the class <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> for   either of the names <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a> or <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>.  The class precedence   lists for these classes are:  <br/>    <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>    <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre>     <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>      <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a> <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <a class="type-reference" href="../chapter-12.xhtml#type-number">number</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>)</span>
</span></code></pre> <br/></li></ol></section><section class="status-unknown proposal" id="issue-type-of-and-predefined-classes:type-of-handles-floats"><h2 class="section-title">Proposal TYPE-OF-HANDLES-FLOATS</h2> Add the following to <a class="issue-reference" href="#issue-type-of-and-predefined-classes:unify-and-extend">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a>: <br/> 2c. Add the following additional constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a>. <br/>  "For any object for which <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-typep">typep</a> <span class="syntax-interned-symbol">object</span> <a class="symbol-reference" href="../chapter-25.xhtml#symbol-type">type</a>)</span>
</span></code></pre> is true when type is one of    the types <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>, or <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>, the    result of <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> is a type specifier for which <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-subtypep">subtypep</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> <span class="syntax-interned-symbol">object</span>)</span>
   <a class="symbol-reference" href="../chapter-25.xhtml#symbol-type">type</a>)</span>
</span></code></pre> returns <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>, i.e, either the type or a subtype of it <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">a</span> <span class="syntax-interned-symbol">subtype</span> <span class="syntax-interned-symbol">that</span>
   <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <span class="syntax-interned-symbol">implementation</span><span class="syntax-quote">'<span class="syntax-interned-symbol">s</span></span> <a class="function-reference" href="../chapter-4.xhtml#function-subtypep">subtypep</a> <span class="syntax-interned-symbol">can</span> <span class="syntax-interned-symbol">recognize</span>)</span>
</span></code></pre>." <br/></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2> Changing the list of disjoint types and the first constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> to  reference the table of predefined classes merges three places with almost  identical information, resulting in simplification and improved cohesion.  Note that one effect of this is to remove the subtypes of <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> (<a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>,  <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>, <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>, and <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a>) from the list of type specifiers  mentioned in the first constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">but</span> <span class="syntax-interned-symbol">see</span> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <span class="syntax-interned-symbol">subproposals</span>
 <span class="syntax-interned-symbol">FLOAT-SUBCLASSES</span> <a class="macro-reference" href="../chapter-5.xhtml#macro-and">and</a> <span class="syntax-interned-symbol">TYPE-OF-HANDLES-FLOATS</span>)</span>
</span></code></pre>, and to add the types <a class="function-reference" href="../chapter-14.xhtml#function-list">list</a>  (which is not necessary, since <a class="function-reference" href="../chapter-14.xhtml#function-cons">cons</a> and <a class="function-reference" href="../chapter-14.xhtml#function-null">null</a> form an exhaustive partition of  <a class="function-reference" href="../chapter-14.xhtml#function-list">list</a>) and <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">which</span> <span class="syntax-interned-symbol">is</span> <span class="syntax-interned-symbol">probably</span> <span class="syntax-interned-symbol">missing</span> <span class="syntax-interned-symbol">due</span> <span class="syntax-interned-symbol">to</span> <span class="syntax-interned-symbol">oversight</span>)</span>
</span></code></pre>. <br/> Adding <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a> to the third bullet brings it inline with the intent  of <a class="issue-reference" href="../issues/clos-conditions.xhtml#issue-clos-conditions">X3J13 Issue CLOS-CONDITIONS</a>. <br/> Adding <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a> and <a class="function-reference" href="../chapter-9.xhtml#function-make-condition">make-condition</a> to the fifth constraint brings it  inline with the intent of <a class="issue-reference" href="../issues/clos-conditions.xhtml#issue-clos-conditions">X3J13 Issue CLOS-CONDITIONS</a>. <br/> Adding classes for the predefined condition types matches up with the  disjointness requirements specified by the Condition System, and corresponds  to the intent of <a class="issue-reference" href="../issues/clos-conditions.xhtml#issue-clos-conditions">X3J13 Issue CLOS-CONDITIONS</a>.  It could be argued that those two  places already mandate this addition, but this proposal ensures that we are  agreed on that. <br/> Adding <a class="type-reference" href="../chapter-9.xhtml#type-restart">restart</a> as a predefined class matches up with the disjointness  requirements specified by the Condition System.  It could be argued that  the Condition System already mandates the addition of this class, but this  proposal ensures that we are agreed on that. <br/> Adding <a class="function-reference" href="../chapter-19.xhtml#function-logical-pathname">logical-pathname</a> as a predefined class seems inline with the  expressed intent for making it a type.  It is sufficiently new that it may  simply have not been propagated to all the places that should mention it. <br/> Adding the stream subclasses seems reasonable, since we are already  requiring them to be disjoint subtypes of <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a>. <br/> Adding the CLOS classes fixes an oversight. <br/> Allowing implementations to add <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a> or <a class="type-reference" href="../chapter-4.xhtml#type-structure-object">structure-object</a> to the  class precedence lists allows them to implement any of the predefined classes  using the standard metaclasses <a class="type-reference" href="../chapter-4.xhtml#type-standard-class">standard-class</a> and <a class="type-reference" href="../chapter-4.xhtml#type-structure-class">structure-class</a>. <br/> The two subproposals, <a class="proposal-reference" href="#issue-type-of-and-predefined-classes:float-subclasses">FLOAT-SUBCLASSES</a> and <a class="proposal-reference" href="#issue-type-of-and-predefined-classes:type-of-handles-floats">TYPE-OF-HANDLES-FLOATS</a>, are two  different ways we could undo the removal of the subtypes of <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> from the  list of types mentioned by the first constraint on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a>. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2> Up to some "bugs" because they haven't caught up with X3J13 on some of  these yet, IIM mostly implements this proposal. <br/> Other implementations were not surveyed. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2> Redirecting the disjointness requirements to reference the list of  predefined classes and modifying the constraints on <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> primarily  affects documentation, especially in the writing of the Standard.  The  requirements on implementors are largely unchanged. <br/> The effect of adding the various classes are probably minimal.  Implementations which already have the <a class="type-reference" href="../chapter-21.xhtml#type-stream">stream</a> subtypes as distinguished  types can probably easily support them as classes too, since they are  probably implemented using <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">defstruct</a>, CLOS, FLAVORS, or some other similar  mechanism, and making <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> return the right type name in this case is  probably trivial.  Implementations which don't have these stream types  already have some work to do, and the necessary support for the types will  probably produce the necessary support for the other stuff.  Similarly for  <a class="type-reference" href="../chapter-9.xhtml#type-condition">condition</a> and its subtypes, <a class="function-reference" href="../chapter-19.xhtml#function-logical-pathname">logical-pathname</a>, <a class="type-reference" href="../chapter-9.xhtml#type-restart">restart</a>, and the CLOS classes. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2> Minimal.  Many of the types mentioned here are new.  The changes to <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a>  would probably be an improvement for most users. <br/>Benifits: <br/> Fewer distributed tables which need to be maintained while writing the  Standard. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2> An alternative to the unification would be to fix <a class="function-reference" href="../chapter-4.xhtml#function-type-of">type-of</a> by adding <a class="type-reference" href="../chapter-12.xhtml#type-real">real</a> to  the list of built-in types referenced by the first constraint, to modify the  fifth constraint to mention <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a>, and to modify the third bullet  of the type relationships to also mention <a class="macro-reference" href="../chapter-9.xhtml#macro-define-condition">define-condition</a>. <br/> A consequence of this proposal is that the following type names do not have  associated classes.  Perhaps we should add a table to the standard which  lists these as specifically not required to have associated classes <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">though</span>
 <span class="syntax-interned-symbol">they</span> <span class="syntax-interned-symbol">may</span> <span class="syntax-interned-symbol">be</span> <span class="syntax-interned-symbol">classes</span> <span class="syntax-interned-symbol">in</span> <a class="function-reference" href="../chapter-5.xhtml#function-some">some</a> <span class="syntax-interned-symbol">implementations</span>)</span>
</span></code></pre>. <br/> Subtypes of <a class="type-reference" href="../chapter-12.xhtml#type-integer">integer</a>            Subtypes of <a class="function-reference" href="../chapter-13.xhtml#function-character">character</a>    <a class="type-reference" href="../chapter-12.xhtml#type-bignum">bignum</a>                         BASE-CHARACTER    <a class="function-reference" href="../chapter-15.xhtml#function-bit">bit</a>                            EXTENDED-CHARACTER    <a class="type-reference" href="../chapter-12.xhtml#type-fixnum">fixnum</a>                         <a class="type-reference" href="../chapter-13.xhtml#type-standard-char">standard-char</a>    <a class="type-reference" href="../chapter-12.xhtml#type-signed-byte">signed-byte</a>    <a class="type-reference" href="../chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <br/> Subtypes of <a class="symbol-reference" href="../chapter-2.xhtml#symbol-array">array</a>              Subtypes of <a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-function">function</a>            Other    <a class="type-reference" href="../chapter-16.xhtml#type-base-string">base-string</a>                    <a class="type-reference" href="../chapter-4.xhtml#type-compiled-function">compiled-function</a>               <a class="function-reference" href="../chapter-14.xhtml#function-atom">atom</a>    <a class="type-reference" href="../chapter-15.xhtml#type-simple-array">simple-array</a>                                                   <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>    <a class="type-reference" href="../chapter-16.xhtml#type-simple-base-string">simple-base-string</a>           Subtypes of <a class="symbol-reference" href="../chapter-2.xhtml#symbol-symbol">symbol</a>    <a class="symbol-reference" href="../chapter-2.xhtml#symbol-simple-bit-vector">simple-bit-vector</a>              <a class="type-reference" href="../chapter-10.xhtml#type-keyword">keyword</a>    <a class="type-reference" href="../chapter-16.xhtml#type-simple-string">simple-string</a>    <a class="symbol-reference" href="../chapter-2.xhtml#symbol-simple-vector">simple-vector</a> <br/> Subtypes of <a class="function-reference" href="../chapter-12.xhtml#function-float">float</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-interned-symbol">FLOAT-SUBCLASSES</span> <span class="syntax-interned-symbol">is</span> <a class="function-reference" href="../chapter-5.xhtml#function-not">not</a> <span class="syntax-interned-symbol">adopted</span>)</span>
</span></code></pre>    <a class="type-reference" href="../chapter-12.xhtml#type-short-float">short-float</a>    <a class="type-reference" href="../chapter-12.xhtml#type-single-float">single-float</a>    <a class="type-reference" href="../chapter-12.xhtml#type-double-float">double-float</a>    <a class="type-reference" href="../chapter-12.xhtml#type-long-float">long-float</a> <br/> Barrett isn't entirely happy with the class precedence lists specified for  the CLOS classes.  He feels that they might be overly constrained in some  cases.  For example, it should be possible to have an implementation make  <a class="type-reference" href="../chapter-4.xhtml#type-structure-class">structure-class</a> a trivial subclass of <a class="type-reference" href="../chapter-4.xhtml#type-standard-class">standard-class</a>, define <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">defstruct</a>  <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">without</span> <a class="special-operator-reference" href="../chapter-3.xhtml#special-operator-the">the</a> <span class="syntax-keyword-symbol">:type</span> <span class="syntax-interned-symbol">option</span>)</span>
</span></code></pre> in terms of <a class="macro-reference" href="../chapter-7.xhtml#macro-defclass">defclass</a>, and make <a class="type-reference" href="../chapter-4.xhtml#type-structure-object">structure-object</a> be  a subclass of <a class="type-reference" href="../chapter-4.xhtml#type-standard-object">standard-object</a>. </section></div></main><footer>Copyright Â© 2021 Jan Moringen</footer></body></html>