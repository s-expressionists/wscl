<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — PRINT-CIRCLE-SHARED</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">PRINT-CIRCLE-SHARED</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-print-circle-shared:respect-print-circle">Proposal RESPECT-PRINT-CIRCLE</a><ol> </ol></li><li><a href="#issue-print-circle-shared:new-variable">Proposal NEW-VARIABLE</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue PRINT-CIRCLE-SHARED [NIL] [NIL]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>proposal <a class="proposal-reference" href="#issue-print-circle-shared:respect-print-circle">RESPECT-PRINT-CIRCLE</a> passed, as amended, Jun 89 X3J13 (another proposal NEW-VALUE was passed and then reconsidered.) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>Version 1, 		KMP 3/30/89 Version 2, Masinter, 2 Jul 89, as amended Jun 89 X3J13 </section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2> A label defined with #n<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a> is valid for the rest of   the top-level call to <a class="function-reference" href="../chapter-23.xhtml#function-read">read</a> on input, permitting     '(#1<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span>)</span>
</span></code> #1#)  to designate <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span>)</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span>)</span>)</span>
</span></code>, where the two lists  <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span>)</span>
</span></code> are <a class="function-reference" href="../chapter-5.xhtml#function-eq">eq</a>.  However, on output the implementations  are only required to detect circularities, not sharing,  when <a class="symbol-reference" href="../chapter-2.xhtml#symbol-*print-circle*">*print-circle*</a> is <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a>.  That is     (<a class="function-reference" href="../chapter-22.xhtml#function-print">print</a> '(#1<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>(A #1#) #1#))  may print as     (#1<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>(A #1#) #2<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>(A #2#))  or (#1<a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>(A #1#) #1#) <br/></section><section class="status-passed proposal" id="issue-print-circle-shared:respect-print-circle"><h2 class="section-title">Proposal RESPECT-PRINT-CIRCLE</h2> Require the printer to use #n# to identify sharing  of <a class="function-reference" href="../chapter-5.xhtml#function-eql">eql</a> objects that would not <a class="function-reference" href="../chapter-23.xhtml#function-read">read</a> to be <a class="function-reference" href="../chapter-5.xhtml#function-eql">eql</a>  when <a class="symbol-reference" href="../chapter-2.xhtml#symbol-*print-circle*">*print-circle*</a> is true, and not if false. <br/></section><section class="status-unknown proposal" id="issue-print-circle-shared:new-variable"><h2 class="section-title">Proposal NEW-VARIABLE</h2> Introduce *PRINT-SHARED*.  When <a class="symbol-reference" href="../chapter-2.xhtml#symbol-*print-circle*">*print-circle*</a>  and *PRINT-SHARED* are both true [rationale:   check one variable first for efficiency], identify sharing   with #n# in the printer. Otherwise, don't. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2> Storage needed for detecting shared structure is slightly more. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2> Several implementations implement <a class="proposal-reference" href="#issue-print-circle-shared:respect-print-circle">RESPECT-PRINT-CIRCLE</a>. <br/></section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>