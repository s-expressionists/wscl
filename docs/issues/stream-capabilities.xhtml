<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp â€” STREAM-CAPABILITIES</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">STREAM-CAPABILITIES</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-stream-capabilities:interactive-stream-p">Proposal INTERACTIVE-STREAM-P</a><ol> </ol></li><li><a href="#section-Examples">Examples</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current practice">Current practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue STREAM-CAPABILITIES [NIL] [ADDITION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, Jun 89 X3J13 </section><section id="section-References" class="section"><h2 class="section-title">References</h2>Standard streams (pp. 327-329) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>Version 1 by Pierson 5-Jul-88, add redesign per Pitman Version 2 by Moon, 10-May-89, remove controversial parts Version 3 by Moon, 12-May-89, improve wording and examples </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>  Programs cannot currently distinguish between interactive use and batch   <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">background</span>)</span>
</span></code></pre> use without using <a class="glossary-reference" href="../chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> extensions.   For example, there is currently no way to tell whether it is useful to   ask a question when an unexpected situation is encountered. <br/>  Note: earlier versions of this issue tried to solve another problem   as well.  See discussion section. <br/></section><section class="status-passed proposal" id="issue-stream-capabilities:interactive-stream-p"><h2 class="section-title">Proposal INTERACTIVE-STREAM-P</h2>  Add the following function: <br/>    <a class="function-reference" href="../chapter-21.xhtml#function-interactive-stream-p">interactive-stream-p</a> stream <br/>    Returns <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> if the stream is interactive, otherwise <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>.  Signals     an error of type <a class="type-reference" href="../chapter-4.xhtml#type-type-error">type-error</a> if the argument is not a stream. <br/>    The precise meaning of <a class="function-reference" href="../chapter-21.xhtml#function-interactive-stream-p">interactive-stream-p</a> is implementation     dependent, and may depend on the underlying operating system.  However     the general intent is to distinguish between interactive and batch <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a>
    <span class="syntax-interned-symbol">background</span> <a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">command-file</span>)</span>
</span></code></pre> operations. <br/>    Some examples of the things that might identify a stream as interactive     include: <ol><li> The stream is connected to a person <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">equivalent</span>)</span>
</span></code></pre> in  such a way that the program can prompt for information and  expect to receive different input depending on the prompt. </li><li> The program is expected to prompt for input and support  "normal input editing". </li><li> <a class="function-reference" href="../chapter-21.xhtml#function-read-char">read-char</a> might hang waiting for the user to type something  instead of quickly returning a character or EOF. <br/></li></ol>    <a class="variable-reference" href="../chapter-21.xhtml#variable-*terminal-io*">*terminal-io*</a> might or might not be interactive. <br/></section><section id="section-Examples" class="section"><h2 class="section-title">Examples</h2><pre>  <pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-when">when</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-12.xhtml#function-&gt;">&gt;</a> <span class="syntax-interned-symbol">measured</span> <span class="syntax-interned-symbol">limit</span>)</span>
    <span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-12.xhtml#function-round">round</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-12.xhtml#function-*">*</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-12.xhtml#function--">-</a> <span class="syntax-interned-symbol">measured</span> <span class="syntax-interned-symbol">limit</span>)</span> <span class="syntax-number">100</span>)</span>
                        <span class="syntax-interned-symbol">limit</span>)</span>)</span>)</span>
      <span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-unless">unless</a> <span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-21.xhtml#function-interactive-stream-p">interactive-stream-p</a> <a class="variable-reference" href="../chapter-21.xhtml#variable-*query-io*">*query-io*</a>)</span>
                  <span class="syntax-cons">(<a class="function-reference" href="../chapter-21.xhtml#function-yes-or-no-p">yes-or-no-p</a> <span class="syntax-string">"The frammis is out of tolerance by ~D%.~@
                                Is it safe to proceed? "</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>)</span>
                  <span class="syntax-cons">(<a class="function-reference" href="../chapter-12.xhtml#function-&lt;">&lt;</a> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <span class="syntax-number">15</span>)</span>)</span>  <span class="syntax-line-comment syntax-comment">;15% is acceptable
</span>        <span class="syntax-cons">(<a class="function-reference" href="../chapter-9.xhtml#function-error">error</a> <span class="syntax-string">"The frammis is out of tolerance by ~D%."</span> <a class="function-reference" href="../chapter-9.xhtml#function-error">error</a>)</span>)</span>)</span>)</span>
</span></code></pre><br/><br/></pre></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  <a class="function-reference" href="../chapter-21.xhtml#function-interactive-stream-p">interactive-stream-p</a> has been proposed several times and is clearly   needed by any program that alters its behavior depending on whether   it is interacting with a user or running in a "batch" mode. <br/></section><section id="section-Current practice" class="section"><h2 class="section-title">Current practice</h2>  Most implementations have this feature already, often under a   different name. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  Implementations will have to support this new function.  Correct support   will require some thought for each operating system supported. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  None, this is an upward-compatible extension. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  Less featureful language.  <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  None. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  More featureful language. <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  More featureful language. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  It's not possible to make a specific definition of "interactive" that   applies to all operating systems, we concluded from earlier discussion.   However, "everyone knows" appoximately what it means.  Hence the idea   of describing it by example rather than defining it. <br/>  Note that some proposed features for telling whether two streams are   connected to the same source or sink of information have been removed   from this version of the proposal.  These were the functions   STREAM-SAME-SOURCE-P, STREAM-SAME-DESTINATION-P, STREAM-SOURCE-ID-LIST,   and STREAM-DESTINATION-ID-LIST.  These could be revived in another   proposal if desired, but Moon thought <a class="function-reference" href="../chapter-21.xhtml#function-interactive-stream-p">interactive-stream-p</a> was   important and didn't want it to be lost due to controversy over these    unrelated functions. </section></div></main><footer>Copyright Â© 2021 Jan Moringen</footer></body></html>