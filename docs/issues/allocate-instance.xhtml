<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — ALLOCATE-INSTANCE</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">ALLOCATE-INSTANCE</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-allocate-instance:add">Proposal ADD</a><ol> </ol></li><li><a href="#section-Examples">Examples</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current practice">Current practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue ALLOCATE-INSTANCE [NIL] [ADDITION]</h1><h2>Related issues</h2><ul><li><a class="issue-reference" href="../issues/load-objects.xhtml#issue-load-objects">LOAD-OBJECTS</a></li></ul><section id="section-References" class="section"><h2 class="section-title">References</h2>88-002R p.1-41 89-003 p.3-35 </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>30-Apr-90, Version 1 by Moon </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>  The function page for the generic function <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> was   accidentally omitted from 88-002R. <br/></section><section class="status-unknown proposal" id="issue-allocate-instance:add"><h2 class="section-title">Proposal ADD</h2>  Add a generic function <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> that takes one required   argument, a class, plus initialization arguments, and returns one value,   a freshly created instance of the given class.  The class argument must   be an actual class, not a class name, and must not be a built-in class. <br/>  The object returned by <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> is "uninitialized"; when the   class is a standard class, this means the slots are unbound; when the   class is a structure class, this means the slots' values are unspecified. <br/>  Common Lisp does not specify how to add methods to <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a>;   this capability might be added by the Metaobject Protocol. <br/>  This is Symbolics issue #32 and Loosemore's issue #6 of 27 Feb 90. <br/></section><section id="section-Examples" class="section"><h2 class="section-title">Examples</h2><pre>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-7.xhtml#macro-defclass">DEFCLASS</a> <span class="syntax-interned-symbol">MYCLASS</span> <span class="syntax-symbol">()</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">A</span> <span class="syntax-interned-symbol">B</span> <span class="syntax-interned-symbol">C</span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> <span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-find-class">FIND-CLASS</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">MYCLASS</span></span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-7.xhtml#function-slot-boundp">SLOT-BOUNDP</a> <a class="function-reference" href="../chapter-12.xhtml#function-*">*</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">B</span></span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a><br/><br/></pre></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  Some of the authors of 88-002R say the omission of <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> was   simply a mistake.  Note that <a class="issue-reference" href="../issues/load-objects.xhtml#issue-load-objects:make-load-form">LOAD-OBJECTS:MAKE-LOAD-FORM</a> assumes the   existence of <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> and that user-written <a class="function-reference" href="../chapter-7.xhtml#function-make-load-form">MAKE-LOAD-FORM</a>   methods that return two values will typically use <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> in   the first value. <br/></section><section id="section-Current practice" class="section"><h2 class="section-title">Current practice</h2>  Symbolics Genera 8.0 does not provide <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">although</span>
  <span class="syntax-interned-symbol">it</span> <span class="syntax-interned-symbol">does</span> <span class="syntax-interned-symbol">exist</span> <span class="syntax-interned-symbol">in</span> <span class="syntax-interned-symbol">an</span> <span class="syntax-interned-symbol">internal</span> <a class="type-reference" href="../chapter-11.xhtml#type-package">package</a>)</span>
</span></code></pre>.  Lucid 4.0.0 Beta-1 provides   <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a>. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  Any CLOS implementation needs <a class="function-reference" href="../chapter-7.xhtml#function-allocate-instance">ALLOCATE-INSTANCE</a> or something like it   internally, so implementing this proposal is largely a matter of   exporting the symbol from the <a class="package-reference" href="../chapter-1.xhtml#package-common-lisp">COMMON-LISP</a> package and documenting it. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  None. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  <a class="function-reference" href="../chapter-7.xhtml#function-make-load-form">MAKE-LOAD-FORM</a> would be considerably less useful. <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  None other than the impact of adding a symbol to the <a class="package-reference" href="../chapter-1.xhtml#package-common-lisp">COMMON-LISP</a> package. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  Missing piece of CLOS provided. <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  Neutral. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  None. </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>