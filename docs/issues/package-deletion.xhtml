<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp â€” PACKAGE-DELETION</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">PACKAGE-DELETION</span><br/><ol class="local-toc"><li><a href="#section-Status">Status</a><ol> </ol></li><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem Description">Problem Description</a><ol> </ol></li><li><a href="#issue-package-deletion:new-function">Proposal NEW-FUNCTION</a><ol> </ol></li><li><a href="#section-Examples">Examples</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of Non-Adoption">Cost of Non-Adoption</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Aesthetics">Aesthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue PACKAGE-DELETION [Cleanup] [ADDITION]</h1><section id="section-Status" class="status-passed section"><h2 class="section-title">Status</h2>Passed, Jan 89 X3J13 </section><section id="section-References" class="section"><h2 class="section-title">References</h2>Packages (pp171-192), <a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> (p184), <a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> (p76) </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>30-Sep-88, Version 1 by Pitman 01-Oct-88, Version 2 by Pitman 04-Oct-88, Version 3 by Pitman (provide for correctable errors in some cases) 07-Oct-88, Version 4 by JonL 21-Nov-88, Version 5 by Masinter <br/></section><section id="section-Problem Description" class="section"><h2 class="section-title">Problem Description</h2>  There is no way to get rid of a package in Common Lisp. <br/>  This absence makes interactive development work tricky in some   implementations. If a package is accidentally built incorrectly, the   user must either rename the package to another package or start over   by reloading his program in a fresh lisp image. <br/>  Some programs need to create and destroy packages at runtime.   Without such a facility, some clumsy combination of <a class="function-reference" href="../chapter-11.xhtml#function-rename-package">RENAME-PACKAGE</a>,   <a class="function-reference" href="../chapter-11.xhtml#function-unintern">UNINTERN</a>, and <a class="function-reference" href="../chapter-11.xhtml#function-unuse-package">UNUSE-PACKAGE</a> is usually made to work. However, it is   easy for a casual programmer to forget to undo some of the    bookkeeping, leading to unwanted effects. <br/></section><section class="status-passed proposal" id="issue-package-deletion:new-function"><h2 class="section-title">Proposal NEW-FUNCTION</h2>  Introduce the function <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>, described as follows: <br/>  <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> package                                 [Function] <br/>   Deletes <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> from all package system data structures. <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> may    be either a package or the name of a package. <br/>   If <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> is a package name (i.e., not type <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a>) which does not    currently name a package, a correctable error is signalled. If    continued, no deletion action is attempted. Instead, <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>    immediately returns <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>. <br/>   If <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> is a package object (i.e., an object of type <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a>)    which has already been deleted, no error is signalled and no further    deletion action is attempted. Instead, <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> immediately    returns <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>. <br/>   If the designated package is used by other packages, a correctable    error is signalled. If continued, the effect of <a class="function-reference" href="../chapter-11.xhtml#function-unuse-package">UNUSE-PACKAGE</a> is    done to remove any dependencies, causing its external symbols to stop    being accessible to those packages. Once this is done, <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>    goes on to delete the package just as it would had there been no     packages that used it. <br/>   After this operation completes, the contents of the <a class="function-reference" href="../chapter-10.xhtml#function-symbol-package">symbol-package</a>      slot of any symbol homed in the deleted package is unspecified; for     those symbols not homed in that package, the contents remain unchanged.    Except for this, symbols in the deleted package are not modified in    any other way.   <br/>   The effect of <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> is that the name and    nicknames of the designated package cease to be recognized package    names.   The package object is still a package &ndash; <a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> is true    of it &ndash; but  <a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> will return <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>.  The effect of any other     package operation on <a class="type-reference" href="../chapter-11.xhtml#type-package">PACKAGE</a> once it has been deleted is undefined.    In particular, <a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a>, <a class="function-reference" href="../chapter-11.xhtml#function-intern">INTERN</a> and other functions that   look for a symbol name in a package will have unspecified results if   called with <a class="variable-reference" href="../chapter-11.xhtml#variable-*package*">*PACKAGE*</a> bound to the deleted package or with the   deleted package as an argument. <br/>   <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> returns <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a> if the deletion attempt was successful    and <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> otherwise. <br/></section><section id="section-Examples" class="section"><h2 class="section-title">Examples</h2><pre>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-setq">SETQ</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> <span class="syntax-string">"FOO"</span> <span class="syntax-keyword-symbol">:USE</span> <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-setq">SETQ</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span>  <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-intern">INTERN</a> <span class="syntax-string">"FOO"</span> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-export">EXPORT</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-setq">SETQ</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> <span class="syntax-string">"BAR"</span> <span class="syntax-keyword-symbol">:USE</span> <span class="syntax-quote">'<span class="syntax-cons">(<span class="syntax-string">"FOO"</span>)</span></span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-setq">SETQ</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span>  <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-intern">INTERN</a> <span class="syntax-string">"BAR"</span> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-export">EXPORT</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-export">EXPORT</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="../chapter-5.xhtml#special-operator-setq">SETQ</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span> <span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-make-package">MAKE-PACKAGE</a> <span class="syntax-string">"BAZ"</span> <span class="syntax-keyword-symbol">:USE</span> <span class="syntax-quote">'<span class="syntax-cons">(<span class="syntax-string">"BAR"</span>)</span></span>)</span>)</span>
</span></code><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-10.xhtml#function-symbol-package">SYMBOL-PACKAGE</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span>)</span>
</span></code>        <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; #&lt;Package "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-foo">FOO</a>"&gt;<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-10.xhtml#function-symbol-package">SYMBOL-PACKAGE</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span>)</span>
</span></code>        <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; #&lt;Package "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>"&gt;<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-prin1-to-string">PRIN1-TO-STRING</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span>)</span>
</span></code>       <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<span class="issue-reference error">issue:FOO</span>"<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-prin1-to-string">PRIN1-TO-STRING</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span>)</span>
</span></code>       <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<span class="issue-reference error">issue:BAR</span>"<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"FOO"</span> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>    <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <span class="issue-reference error">issue:FOO</span>, :EXTERNAL<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"FOO"</span> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>    <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <span class="issue-reference error">issue:FOO</span>, :INHERITED<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"BAR"</span> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>    <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <span class="issue-reference error">issue:BAR</span>, :INHERITED<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-foo">FOO</a>"<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>"<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-baz">BAZ</a>"<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>     <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>     <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; (#&lt;Package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-foo">FOO</a>&gt;)<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>     <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; (#&lt;Package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>&gt;)<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; (#&lt;Package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>&gt;)<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; (#&lt;Package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-baz">BAZ</a>&gt;)<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code><br/>  Error: Package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-baz">BAZ</a> uses package <a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>.<br/>  If continued, <a class="index/code-reference" href="../chapter-1.xhtml#index/code-baz">BAZ</a> will be made to <a class="function-reference" href="../chapter-11.xhtml#function-unuse-package">unuse-package</a> <a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a>,<br/>	        and then <a class="index/code-reference" href="../chapter-1.xhtml#index/code-bar">BAR</a> will be deleted.<br/>  Type :CONTINUE to continue.<br/>  Debug&gt; :CONTINUE<br/>  				       <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-10.xhtml#function-symbol-package">SYMBOL-PACKAGE</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span>)</span>
</span></code>        <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; #&lt;Package "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-foo">FOO</a>"&gt;<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-10.xhtml#function-symbol-package">SYMBOL-PACKAGE</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span>)</span>
</span></code>        is unspecified<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-prin1-to-string">PRIN1-TO-STRING</a> <span class="syntax-interned-symbol">*FOO-SYMBOL*</span>)</span>
</span></code>       <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<span class="issue-reference error">issue:FOO</span>"<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-22.xhtml#function-prin1-to-string">PRIN1-TO-STRING</a> <span class="syntax-interned-symbol">*BAR-SYMBOL*</span>)</span>
</span></code>       is unspecified<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"FOO"</span> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>    is undefined<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"FOO"</span> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>    <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>, <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-find-symbol">FIND-SYMBOL</a> <span class="syntax-string">"BAR"</span> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>    <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a>, <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-packagep">PACKAGEP</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>             <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-26.xhtml#section-T">T</a><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-foo">FOO</a>"<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>         <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; "<a class="index/code-reference" href="../chapter-1.xhtml#index/code-baz">BAZ</a>"<br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code>     <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code>     is undefined<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-use-list">PACKAGE-USE-LIST</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code>     <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*FOO-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*BAR-PACKAGE*</span>)</span>
</span></code> is undefined<br/>  <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-11.xhtml#function-package-used-by-list">PACKAGE-USED-BY-LIST</a> <span class="syntax-interned-symbol">*BAZ-PACKAGE*</span>)</span>
</span></code> <a class="function-reference" href="../chapter-12.xhtml#function-=">=</a>&gt; <code><span class="syntax-root"><span class="syntax-symbol">()</span>
</span></code><br/><br/></pre></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  This facility corrects the deficiency described in the problem description. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  Symbolics has a function PKG-KILL which satisfies the proposed behavior   except that an error is not signalled if the package is used.   When a package is killed by PKG-KILL, the home package of all symbols   in that package are left undisturbed (i.e., local symbols pointing to   the killed package); this aspect is compatible with the stated proposal. <br/>  Procyon Common Lisp has a function called <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a> already. It   returns the name   of the package so deleted <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">as</span> <span class="syntax-interned-symbol">a</span> <a class="function-reference" href="../chapter-16.xhtml#function-string">string</a>)</span>
</span></code>. [Perhaps it also   differs in the correctability of the errors it signals?] <br/>  Lucid Common Lisp implements <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>, except that the continuation   option for a name that doesn't name a package is different. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  The cost of providing this facility is probably small. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  Very slight to none. This change is essentially compatible. <br/>  Some code which cached packages in variables might have to be slightly   more cautious, but experience in the Symbolics implementation suggests   that it's really the responsibility of the person doing the <a class="function-reference" href="../chapter-11.xhtml#function-delete-package">DELETE-PACKAGE</a>   to take care of worrying about the effects of having deleted the package:   normal programs need not bother testing a package for validity <pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">using</span>
  <a class="function-reference" href="../chapter-11.xhtml#function-package-name">PACKAGE-NAME</a>)</span>
</span></code></pre> before using it. <br/></section><section id="section-Cost of Non-Adoption" class="section"><h2 class="section-title">Cost of Non-Adoption</h2>  Getting rid of a package would continue to be difficult to do portably. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  Better control of storage usage would be available portably. <br/></section><section id="section-Aesthetics" class="section"><h2 class="section-title">Aesthetics</h2>  No significant effect. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>  This was discussed as part of a larger bulk issue of how to undo all   sorts of definitions. Since that proposal has not gone anywhere    <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">perhaps</span> <span class="syntax-interned-symbol">bogged</span> <span class="syntax-interned-symbol">down</span> <span class="syntax-interned-symbol">under</span> <span class="syntax-interned-symbol">its</span> <span class="syntax-interned-symbol">own</span> <span class="syntax-interned-symbol">weight</span>)</span>
</span></code>, this subtopic has been   broken off for separate discussion. <br/>  Note that if a symbol's package component is modified as a result   of being "unintern'd" from a delete packaged, then it is unspecified   as to how it will  be printed. <br/></section></div></main><footer>Copyright Â© 2021 Jan Moringen</footer></body></html>