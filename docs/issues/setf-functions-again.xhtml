<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp â€” SETF-FUNCTIONS-AGAIN</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">SETF-FUNCTIONS-AGAIN</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-setf-functions-again:minimal-changes">Proposal MINIMAL-CHANGES</a><ol> </ol></li><li><a href="#section-Rationale">Rationale</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue SETF-FUNCTIONS-AGAIN [NIL] [CLARIFICATION]</h1><h2>Related issues</h2><ul><li><a class="issue-reference" href="../issues/function-name.xhtml#issue-function-name">X3J13 Issue FUNCTION-NAME</a></li><li><a class="issue-reference" href="../issues/setf-of-apply.xhtml#issue-setf-of-apply">X3J13 Issue SETF-OF-APPLY</a></li></ul><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a>, <a class="function-reference" href="../chapter-5.xhtml#function-fboundp">FBOUNDP</a>, <a class="function-reference" href="../chapter-5.xhtml#function-fdefinition">FDEFINITION</a>, <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>V1, 13 May 90, Sandra Loosemore </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>The addition of <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions to the language has left some lingering questions: <br/><a class="function-reference" href="../chapter-12.xhtml#function--">-</a> Whether <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-5.xhtml#function-fboundp">FBOUNDP</a> <span class="syntax-quote">'<span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">&lt;name&gt;</span>)</span></span>)</span>
</span></code> is supposed to be true of &lt;name&gt;s  that have <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">as</span> <span class="syntax-interned-symbol">defined</span> <span class="syntax-interned-symbol">with</span> <a class="macro-reference" href="../chapter-5.xhtml#macro-defsetf">DEFSETF</a> <a class="macro-reference" href="../chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">DEFINE-SETF-METHOD</span>)</span>
</span></code> defined, or only &lt;name&gt;s where there are globally defined functions named <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">&lt;name&gt;</span>)</span>
</span></code>.  (Issue #17 from Loosemore's list.) <br/><a class="function-reference" href="../chapter-12.xhtml#function--">-</a> Whether <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> is required to generate <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions, or required to generate <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods, or whether this is unspecified.  (Issue #19) <br/><a class="function-reference" href="../chapter-12.xhtml#function--">-</a> Whether <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> places defined in the standard are required to be implemented by <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions, by <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods, or whether this is unspecified.  (Issue #20) <br/><a class="function-reference" href="../chapter-12.xhtml#function--">-</a> Whether it is permissible for a &lt;name&gt; to have both a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> method defined via <a class="macro-reference" href="../chapter-5.xhtml#macro-defsetf">DEFSETF</a> or DEFINE-SETF-METHOD, and an associated <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> function at the same time.   <br/></section><section class="status-unknown proposal" id="issue-setf-functions-again:minimal-changes"><h2 class="section-title">Proposal MINIMAL-CHANGES</h2><ol><li> Clarify that <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-5.xhtml#function-fboundp">FBOUNDP</a> <span class="syntax-quote">'<span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">&lt;name&gt;</span>)</span></span>)</span>
</span></code> must return true if and only if there is a function named <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">&lt;name&gt;</span>)</span>
</span></code> defined.  It must return <a class="section-reference" href="../chapter-1.xhtml#section-NIL">NIL</a> if &lt;name&gt; has a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> method defined but not a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> function. <br/></li><li> Clarify that it is unspecified whether <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> generates <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods or <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions for non<a class="function-reference" href="../chapter-12.xhtml#function--">-</a>:READ-ONLY slot accessors. <br/></li><li> Clarify that, unless a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> function is explicitly documented in the standard, it is unspecified whether <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> places defined in the standard must be implemented as <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods or <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions. In combination with item <code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-number">1</span>)</span>
</span></code>, this implies that it is unspecified whether <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">&lt;name&gt;</span>)</span>
</span></code> is <a class="function-reference" href="../chapter-5.xhtml#function-fboundp">FBOUNDP</a> for these standard <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> places. <br/></li><li> Clarify that it is possible, but generally not very useful,  to have both a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> method and a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> function defined for the same name. <br/></li></ol></section><section id="section-Rationale" class="section"><h2 class="section-title">Rationale</h2>  This proposal requires minimal changes for implementors. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  Most implementations use <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods <code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="../chapter-5.xhtml#macro-and">and</a> <a class="function-reference" href="../chapter-5.xhtml#function-not">not</a> <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> <span class="syntax-interned-symbol">functions</span>)</span>
</span></code>   to implement <a class="macro-reference" href="../chapter-8.xhtml#macro-defstruct">DEFSTRUCT</a> accessors and the standard <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> places.   In most implementations, the namespaces for <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> methods and   <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions are disjoint. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  Probably none. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  Probably none. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  Imprecision in the language specification. <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  Probably not significant. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>   The language specification is made more precise. <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  It would probably be better to specify whether standard <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a>   places must be implemented as <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> functions or as <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a>   methods, instead of leaving it explicitly vague.  See also   <a class="issue-reference" href="../issues/setf-of-apply.xhtml#issue-setf-of-apply">X3J13 Issue SETF-OF-APPLY</a> for one particular case <code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="../chapter-15.xhtml#function-aref">AREF</a>)</span>
</span></code> where it   seems like a good idea to specify that the <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> place must be   implemented as a <a class="macro-reference" href="../chapter-5.xhtml#macro-setf">SETF</a> function. </section></div></main><footer>Copyright Â© 2021 Jan Moringen</footer></body></html>