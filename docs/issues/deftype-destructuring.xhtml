<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="../style.css"/><script src="../permalink.js"/><script src="../navigation.js"/><title>Well-specified Common Lisp — DEFTYPE-DESTRUCTURING</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="../chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="../symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="../figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="../issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="../note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="../chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">DEFTYPE-DESTRUCTURING</span><br/><ol class="local-toc"><li><a href="#section-References">References</a><ol> </ol></li><li><a href="#section-Edit history">Edit history</a><ol> </ol></li><li><a href="#section-Problem description">Problem description</a><ol> </ol></li><li><a href="#issue-deftype-destructuring:yes">Proposal YES</a><ol> </ol></li><li><a href="#issue-deftype-destructuring:no">Proposal NO</a><ol> </ol></li><li><a href="#section-Current Practice">Current Practice</a><ol> </ol></li><li><a href="#section-Cost to Implementors">Cost to Implementors</a><ol> </ol></li><li><a href="#section-Cost to Users">Cost to Users</a><ol> </ol></li><li><a href="#section-Cost of non-adoption">Cost of non-adoption</a><ol> </ol></li><li><a href="#section-Performance impact">Performance impact</a><ol> </ol></li><li><a href="#section-Benefits">Benefits</a><ol> </ol></li><li><a href="#section-Esthetics">Esthetics</a><ol> </ol></li><li><a href="#section-Discussion">Discussion</a><ol> </ol></li></ol></nav><div class="content"><h1>X3J13 Issue DEFTYPE-DESTRUCTURING [NIL] [CLARIFICATION, CHANGE]</h1><h2>Related issues</h2><ul><li><a class="issue-reference" href="../issues/deftype-key.xhtml#issue-deftype-key">DEFTYPE-KEY</a></li></ul><section id="section-References" class="section"><h2 class="section-title">References</h2><a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> </section><section id="section-Edit history" class="section"><h2 class="section-title">Edit history</h2>V1, 23 May 90, Sandra Loosemore </section><section id="section-Problem description" class="section"><h2 class="section-title">Problem description</h2>  The specification of <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> is not clear on the issue of whether   it is supposed to support destructuring.  The description in CLtL   twice compares its syntax to that of <a class="macro-reference" href="../chapter-3.xhtml#macro-defmacro">DEFMACRO</a>, leading some   people to think that it does support destructuring.  However,   since destructuring is not explicitly mentioned, other people   think it does not. <br/>  There are two proposals, <a class="proposal-reference" href="#issue-deftype-destructuring:yes">YES</a> and <a class="proposal-reference" href="#issue-deftype-destructuring:no">NO</a>. <br/></section><section class="status-unknown proposal" id="issue-deftype-destructuring:yes"><h2 class="section-title">Proposal YES</h2>  Clarify that <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> does support destructuring of the lambda list.   The lambda-list syntax for <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> is identical to that of   <a class="macro-reference" href="../chapter-3.xhtml#macro-defmacro">DEFMACRO</a>. <br/>  Rationale for proposal <a class="proposal-reference" href="#issue-deftype-destructuring:yes">YES</a>:     Some people think this is the way it was really supposed to     work, and that supporting destructuring makes the syntax of      <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> more consistent with other defining macros. <br/></section><section class="status-unknown proposal" id="issue-deftype-destructuring:no"><h2 class="section-title">Proposal NO</h2>  Clarify that <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> does not support destructuring of the lambda   list.   <br/>  Rationale for proposal <a class="proposal-reference" href="#issue-deftype-destructuring:no">NO</a>:     This requires minimal changes for implementors.  The use of     destructuring with <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> is rare and since some     implementations do not support it now, code that relies on     it working is already nonportable. <br/></section><section id="section-Current Practice" class="section"><h2 class="section-title">Current Practice</h2>  Spice Lisp implemented a destructuring <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a>, and a number   of implementations have copied this behavior.  Other   implementations do not support destructuring in <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a>. <br/></section><section id="section-Cost to Implementors" class="section"><h2 class="section-title">Cost to Implementors</h2>  For proposal <a class="proposal-reference" href="#issue-deftype-destructuring:yes">YES</a>, fairly small, since every implementation   already has support for destructuring for other parts of   the language. <br/>  For proposal <a class="proposal-reference" href="#issue-deftype-destructuring:no">NO</a>, none.  Implementations that now support    destructuring can continue to do so as an extension. <br/></section><section id="section-Cost to Users" class="section"><h2 class="section-title">Cost to Users</h2>  None for either proposal.  Code that relies on destructuring    with <a class="macro-reference" href="../chapter-4.xhtml#macro-deftype">DEFTYPE</a> is already not portable, but on the other hand   adding destructing support shouldn't break code that doesn't   use it. <br/></section><section id="section-Cost of non-adoption" class="section"><h2 class="section-title">Cost of non-adoption</h2>  Continuing vagueness in this part of the language specification. <br/></section><section id="section-Performance impact" class="section"><h2 class="section-title">Performance impact</h2>  Probably insignificant. <br/></section><section id="section-Benefits" class="section"><h2 class="section-title">Benefits</h2>  This part of the language specification is made more clear. <br/></section><section id="section-Esthetics" class="section"><h2 class="section-title">Esthetics</h2>  Seems to be a matter of personal taste. <br/></section><section id="section-Discussion" class="section"><h2 class="section-title">Discussion</h2>&mdash;&mdash;<a class="function-reference" href="../chapter-12.xhtml#function--">-</a> </section></div></main><footer>Copyright © 2021 Jan Moringen</footer></body></html>