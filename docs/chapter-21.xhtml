<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
  "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><link rel="stylesheet" type="text/css" href="style.css"/><script src="permalink.js"/><script src="navigation.js"/><title>Well-specified Common Lisp â€” Streams</title></head><body><main><nav class="sidebar"><span class="name">Entry Points</span><br/><ol><li><a href="chap-0.xhtml#section-Figures">Table of Contents</a></li><li><a href="symbol-index.xhtml#section-SymbolIndex">Symbol Index</a></li><li><a href="figure-index.xhtml#section-FigureIndex">Figure Index</a></li><li><a href="issue-index.xhtml#section-IssueIndices">Issue Index</a></li><li><a href="note-indices.xhtml#section-ReviewerNoteIndex">Note Indices</a></li><li><a href="chapter-26.xhtml#section-Glossary">Glossary</a></li></ol><hr/><span class="name">Streams</span><br/><ol class="local-toc"><li><a href="#section-StreamConcepts">Stream Concepts</a><ol> <li><a href="#section-IntroductiontoStreams">Introduction to Streams</a><ol> <li><a href="#section-AbstractClassificationsofStreams">Abstract Classifications of Streams</a><ol> <li><a href="#section-Input,Output,andBidirectionalStreams">Input, Output, and Bidirectional Streams</a><ol> </ol></li><li><a href="#section-OpenAndClosedStreams2">Open and Closed Streams</a><ol> </ol></li><li><a href="#section-InteractiveStreams">Interactive Streams</a><ol> </ol></li><li><a href="#section-FileStreams">File Streams</a><ol> </ol></li></ol></li><li><a href="#section-OtherSubclassesofStream">Other Subclasses of Stream</a><ol> </ol></li></ol></li><li><a href="#section-StreamVariables">Stream Variables</a><ol> </ol></li><li><a href="#section-StreamArgsToStandardizedFns">Stream Arguments to Standardized Functions</a><ol> </ol></li><li><a href="#section-RestrictionsonCompositeStreams">Restrictions on Composite Streams</a><ol> </ol></li></ol></li><li><a href="#section-Dictionary">Dictionary</a><ol> <li><a href="#type-stream">stream</a></li><li><a href="#type-broadcast-stream">broadcast-stream</a></li><li><a href="#type-concatenated-stream">concatenated-stream</a></li><li><a href="#type-echo-stream">echo-stream</a></li><li><a href="#type-file-stream">file-stream</a></li><li><a href="#type-string-stream">string-stream</a></li><li><a href="#type-synonym-stream">synonym-stream</a></li><li><a href="#type-two-way-stream">two-way-stream</a></li><li><a href="#function-input-stream-p">input-stream-p, output-stream-p</a></li><li><a href="#function-interactive-stream-p">interactive-stream-p</a></li><li><a href="#function-open-stream-p">open-stream-p</a></li><li><a href="#function-stream-element-type">stream-element-type</a></li><li><a href="#function-streamp">streamp</a></li><li><a href="#function-read-byte">read-byte</a></li><li><a href="#function-write-byte">write-byte</a></li><li><a href="#function-peek-char">peek-char</a></li><li><a href="#function-read-char">read-char</a></li><li><a href="#function-read-char-no-hang">read-char-no-hang</a></li><li><a href="#function-terpri">terpri, fresh-line</a></li><li><a href="#function-unread-char">unread-char</a></li><li><a href="#function-write-char">write-char</a></li><li><a href="#function-read-line">read-line</a></li><li><a href="#function-write-string">write-string, write-line</a></li><li><a href="#function-read-sequence">read-sequence</a></li><li><a href="#function-write-sequence">write-sequence</a></li><li><a href="#function-file-length">file-length</a></li><li><a href="#function-file-position">file-position</a></li><li><a href="#function-file-string-length">file-string-length</a></li><li><a href="#function-open">open</a></li><li><a href="#function-stream-external-format">stream-external-format</a></li><li><a href="#macro-with-open-file">with-open-file</a></li><li><a href="#function-close">close</a></li><li><a href="#macro-with-open-stream">with-open-stream</a></li><li><a href="#function-listen">listen</a></li><li><a href="#function-clear-input">clear-input</a></li><li><a href="#function-finish-output">finish-output, force-output, clear-output</a></li><li><a href="#function-y-or-n-p">y-or-n-p, yes-or-no-p</a></li><li><a href="#function-make-synonym-stream">make-synonym-stream</a></li><li><a href="#function-synonym-stream-symbol">synonym-stream-symbol</a></li><li><a href="#function-broadcast-stream-streams">broadcast-stream-streams</a></li><li><a href="#function-make-broadcast-stream">make-broadcast-stream</a></li><li><a href="#function-make-two-way-stream">make-two-way-stream</a></li><li><a href="#function-two-way-stream-input-stream">two-way-stream-input-stream, two-way-stream-output-stream</a></li><li><a href="#function-echo-stream-input-stream">echo-stream-input-stream, echo-stream-output-stream</a></li><li><a href="#function-make-echo-stream">make-echo-stream</a></li><li><a href="#function-concatenated-stream-streams">concatenated-stream-streams</a></li><li><a href="#function-make-concatenated-stream">make-concatenated-stream</a></li><li><a href="#function-get-output-stream-string">get-output-stream-string</a></li><li><a href="#function-make-string-input-stream">make-string-input-stream</a></li><li><a href="#function-make-string-output-stream">make-string-output-stream</a></li><li><a href="#macro-with-input-from-string">with-input-from-string</a></li><li><a href="#macro-with-output-to-string">with-output-to-string</a></li><li><a href="#variable-*debug-io*">*debug-io*, *error-output*, *query-io*, *standard-input*, *standard-output*, *trace-output*</a></li><li><a href="#variable-*terminal-io*">*terminal-io*</a></li><li><a href="#type-stream-error">stream-error</a></li><li><a href="#function-stream-error-stream">stream-error-stream</a></li><li><a href="#type-end-of-file">end-of-file</a></li></ol></li></ol></nav><div class="content"><section id="section-ChapTwentyOne"><h1 class="section-title">21. Streams</h1><section id="section-StreamConcepts"><h2 class="section-title">Stream Concepts</h2>

<section id="section-IntroductiontoStreams"><h3 class="section-title">Introduction to Streams</h3>A <span class="newterm">stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a> that can be used with an input or output
function to identify an appropriate source or sink of <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> or 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-byte">bytes</a> for that operation.
A <span class="newterm">character</span> <span class="newterm">stream</span> is a source or sink of <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a>.
A <span class="newterm">binary</span> <span class="newterm">stream</span> is a source or sink of <a class="glossary-reference" href="chapter-26.xhtml#glossary-byte">bytes</a>.<br/>Some operations may be performed on any kind of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>;
Figure <span class="explicit-mono">()</span>&ndash; provides a list of <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> operations
that are potentially useful with any kind of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="float" id="figure-Some General-Purpose Stream Operations"><table><tbody><tr><td><a class="function-reference" href="#function-close">close</a></td><td><a class="function-reference" href="#function-stream-element-type">stream-element-type</a></td></tr><tr><td><a class="function-reference" href="#function-input-stream-p">input-stream-p</a></td><td><a class="function-reference" href="#function-streamp">streamp</a></td></tr><tr><td><a class="function-reference" href="#function-interactive-stream-p">interactive-stream-p</a></td><td><a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a></td></tr><tr><td><a class="function-reference" href="#function-output-stream-p">output-stream-p</a></td><td/></tr></tbody></table><div class="caption">Some General-Purpose Stream Operations</div></span><br/>Other operations are only meaningful on certain <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">types</a>.
For example, <a class="function-reference" href="#function-read-char">read-char</a> is only defined for <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>
and <a class="function-reference" href="#function-read-byte">read-byte</a> is only defined for <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/><section id="section-AbstractClassificationsofStreams"><h4 class="section-title">Abstract Classifications of Streams</h4><section id="section-Input,Output,andBidirectionalStreams"><h5 class="section-title">Input, Output, and Bidirectional Streams</h5>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, whether a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> or a <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>,
can be an <span class="newterm">input</span> <span class="newterm">stream</span> (source of data),
       an <span class="newterm">output</span> <span class="newterm">stream</span> (sink for data),
       both, 
    or (<span class="explicit-italic"> e.g.</span>,  when ``<pre><code><span class="syntax-root"><span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:probe</span>
</span></code></pre>'' is given to <a class="function-reference" href="#function-open">open</a>) neither.<br/>Figure <span class="explicit-mono">()</span>&ndash; shows <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> relating to
<a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>
<span class="float" id="figure-InputStreamOps"><table><tbody><tr><td><a class="function-reference" href="#function-clear-input">clear-input</a></td><td><a class="function-reference" href="#function-read-byte">read-byte</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read-from-string">read-from-string</a></td></tr><tr><td><a class="function-reference" href="#function-listen">listen</a></td><td><a class="function-reference" href="#function-read-char">read-char</a></td><td><a class="function-reference" href="#function-read-line">read-line</a></td></tr><tr><td><a class="function-reference" href="#function-peek-char">peek-char</a></td><td><a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read-preserving-whitespace">read-preserving-whitespace</a></td></tr><tr><td><a class="function-reference" href="chapter-23.xhtml#function-read">read</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read-delimited-list">read-delimited-list</a></td><td><a class="function-reference" href="#function-unread-char">unread-char</a></td></tr></tbody></table><div class="caption">Operators relating to Input Streams.</div></span><br/>Figure <span class="explicit-mono">()</span>&ndash; shows <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> relating to
<a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>
<span class="float" id="figure-OutputStreamOps"><table><tbody><tr><td><a class="function-reference" href="#function-clear-output">clear-output</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-write">write</a></td></tr><tr><td><a class="function-reference" href="#function-finish-output">finish-output</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-prin1-to-string">prin1-to-string</a></td><td><a class="function-reference" href="#function-write-byte">write-byte</a></td></tr><tr><td><a class="function-reference" href="#function-force-output">force-output</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-princ">princ</a></td><td><a class="function-reference" href="#function-write-char">write-char</a></td></tr><tr><td><a class="function-reference" href="chapter-22.xhtml#function-format">format</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-princ-to-string">princ-to-string</a></td><td><a class="function-reference" href="#function-write-line">write-line</a></td></tr><tr><td><a class="function-reference" href="#function-fresh-line">fresh-line</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-print">print</a></td><td><a class="function-reference" href="#function-write-string">write-string</a></td></tr><tr><td><a class="function-reference" href="chapter-22.xhtml#function-pprint">pprint</a></td><td><a class="function-reference" href="#function-terpri">terpri</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-write-to-string">write-to-string</a></td></tr></tbody></table><div class="caption">Operators relating to Output Streams.</div></span><br/>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is both an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> and an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
is called a <span class="newterm">bidirectional</span> <span class="newterm">stream</span>.
See the <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">functions</a> <a class="function-reference" href="#function-input-stream-p">input-stream-p</a> and <a class="function-reference" href="#function-output-stream-p">output-stream-p</a>.<br/>Any of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> listed in <a class="figure-reference" href="#figure-InputStreamOps">InputStreamOps</a> or <a class="figure-reference" href="#figure-OutputStreamOps">OutputStreamOps</a>
can be used with <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.  In addition, Figure <span class="explicit-mono">()</span>&ndash;
shows a list of <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> that relate specificaly to 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/><span class="float" id="figure-Operators relating to Bidirectional Streams."><table><tbody><tr><td><a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a></td><td><a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a></td><td/></tr></tbody></table><div class="caption">Operators relating to Bidirectional Streams.</div></span><br/></section><section id="section-OpenAndClosedStreams2"><h5 class="section-title">Open and Closed Streams</h5><br/><a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">Streams</a> are either <span class="newterm">open</span> or <span class="newterm">closed</span>.  <br/>Except as explicitly specified otherwise,
operations that create and return <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> return <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>The action of <span class="glossary-reference error">glossary:closing</span> a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> marks the end of its use as a source
or sink of data, permitting the <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> to reclaim its internal data
structures, and to free any external resources which might have been locked by the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> when it was opened.<br/>Except as explicitly specified otherwise,
the consequences are undefined when a <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
is used where a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is called for.<br/>Coercion of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> to <a class="glossary-reference" href="chapter-26.xhtml#glossary-pathname">pathnames</a> 
is permissible for <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>;
in some situations, such as for a <a class="glossary-reference" href="chapter-26.xhtml#glossary-truename">truename</a> computation, 
the result might be different for an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
and for that same <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> once it has been <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a>.<br/></section><section id="section-InteractiveStreams"><h5 class="section-title">Interactive Streams</h5><br/>An <span class="newterm">interactive stream</span> is one on which it makes sense to perform
interactive querying.<br/>The precise meaning of an <a class="glossary-reference" href="chapter-26.xhtml#glossary-interactive stream">interactive stream</a> is
<a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-defined">implementation-defined</a>, and may depend on the underlying
operating system.  Some examples of the things that an
<a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> might choose to use as identifying characteristics
of an <a class="glossary-reference" href="chapter-26.xhtml#glossary-interactive stream">interactive stream</a> include:<br/><ul><li>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is connected to a person (or equivalent) in such a way
  that the program can prompt for information and expect to receive different
  input depending on the prompt.<br/></li><li>The program is expected to prompt for input and support ``normal input editing''.<br/></li><li><a class="function-reference" href="#function-read-char">read-char</a> might wait for the user to type something before returning
  instead of immediately returning a character or end-of-file. <br/></li></ul> <br/>The general intent of having some <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> be classified as
<a class="glossary-reference" href="chapter-26.xhtml#glossary-interactive stream">interactive streams</a> is to allow them to be distinguished from
streams containing batch (or background or command-file) input.
Output to batch streams is typically discarded or saved for later viewing, 
so interactive queries to such streams might not have the expected effect.<br/><a class="glossary-reference" href="chapter-26.xhtml#glossary-terminal i/o">Terminal I/O</a> might or might not be an <a class="glossary-reference" href="chapter-26.xhtml#glossary-interactive stream">interactive stream</a>.<br/></section><section id="section-FileStreams"><h5 class="section-title">File Streams</h5>Some <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>, called <span class="newterm">file streams</span>, provide access to <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">files</a>.
An <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-class">class</a> <a class="type-reference" href="#type-file-stream">file-stream</a> is used to represent a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/>The basic operation for opening a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> is <a class="function-reference" href="#function-open">open</a>,
which typically returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> 
(see its dictionary entry for details).
The basic operation for closing a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is <a class="function-reference" href="#function-close">close</a>.
The macro <a class="macro-reference" href="#macro-with-open-file">with-open-file</a> is useful 
to express the common idiom of opening a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> 
for the duration of a given body of <a class="glossary-reference" href="chapter-26.xhtml#glossary-code">code</a>, 
and assuring that the resulting <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is closed upon exit from that body.<br/></section></section><section id="section-OtherSubclassesofStream"><h4 class="section-title">Other Subclasses of Stream</h4>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-class">class</a> <a class="type-reference" href="#type-stream">stream</a> has a number of <a class="glossary-reference" href="chapter-26.xhtml#glossary-subclass">subclasses</a> defined 
by this specification.  Figure <span class="explicit-mono">()</span>&ndash; shows some information 
about these subclasses.<br/><span class="float" id="figure-Defined Names related to Specialized Streams"><table><thead><th>Class</th><th>Related Operators</th></thead><tbody><tr><td><a class="type-reference" href="#type-broadcast-stream">broadcast-stream</a>    </td><td> <a class="function-reference" href="#function-make-broadcast-stream">make-broadcast-stream</a>        </td></tr><tr><td/><td> <a class="function-reference" href="#function-broadcast-stream-streams">broadcast-stream-streams</a>     </td></tr><tr><td><a class="type-reference" href="#type-concatenated-stream">concatenated-stream</a> </td><td> <a class="function-reference" href="#function-make-concatenated-stream">make-concatenated-stream</a>     </td></tr><tr><td/><td> <a class="function-reference" href="#function-concatenated-stream-streams">concatenated-stream-streams</a>  </td></tr><tr><td><a class="type-reference" href="#type-echo-stream">echo-stream</a>         </td><td> <a class="function-reference" href="#function-make-echo-stream">make-echo-stream</a>             </td></tr><tr><td/><td> <a class="function-reference" href="#function-echo-stream-input-stream">echo-stream-input-stream</a>     </td></tr><tr><td/><td> <a class="function-reference" href="#function-echo-stream-output-stream">echo-stream-output-stream</a>    </td></tr><tr><td><a class="type-reference" href="#type-string-stream">string-stream</a>       </td><td> <a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a>     </td></tr><tr><td/><td> <a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a>       </td></tr><tr><td/><td> <a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>    </td></tr><tr><td/><td> <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a>        </td></tr><tr><td/><td> <a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a>     </td></tr><tr><td><a class="type-reference" href="#type-synonym-stream">synonym-stream</a>      </td><td> <a class="function-reference" href="#function-make-synonym-stream">make-synonym-stream</a>          </td></tr><tr><td/><td> <a class="function-reference" href="#function-synonym-stream-symbol">synonym-stream-symbol</a>        </td></tr><tr><td><a class="type-reference" href="#type-two-way-stream">two-way-stream</a>      </td><td> <a class="function-reference" href="#function-make-two-way-stream">make-two-way-stream</a>          </td></tr><tr><td/><td> <a class="function-reference" href="#function-two-way-stream-input-stream">two-way-stream-input-stream</a>  </td></tr><tr><td/><td> <a class="function-reference" href="#function-two-way-stream-output-stream">two-way-stream-output-stream</a> </td></tr></tbody></table><div class="caption">Defined Names related to Specialized Streams</div></span><br/></section></section><section id="section-StreamVariables"><h3 class="section-title">Stream Variables</h3><a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">Variables</a> whose <span class="glossary-reference error">glossary:values</span> must be <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> are sometimes called 
<span class="newterm">stream variables</span>.<br/>Certain <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream variable">stream variables</a> are defined by this specification 
to be the proper source of input or output in various <a class="glossary-reference" href="chapter-26.xhtml#glossary-situation">situations</a> 
where no specific <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> has been specified instead.
A complete list of such <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream variable">stream variables</a>
appears in Figure <span class="explicit-mono">()</span>&ndash;.  
The consequences are undefined if at any time
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of any of these <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variables</a> is not an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>
<span class="float" id="figure-StandardizedStreamVars"><table><thead><th>Glossary Term</th><th>Variable Name</th></thead><tbody><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-debug i/o">debug I/O</a>       </td><td> <a class="variable-reference" href="#variable-*debug-io*">*debug-io*</a>        </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-error output">error output</a>    </td><td> <a class="variable-reference" href="#variable-*error-output*">*error-output*</a>    </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-query i/o">query I/O</a>       </td><td> <a class="variable-reference" href="#variable-*query-io*">*query-io*</a>        </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>  </td><td> <a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>  </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a> </td><td> <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a> </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-terminal i/o">terminal I/O</a>    </td><td> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>     </td></tr><tr><td><a class="glossary-reference" href="chapter-26.xhtml#glossary-trace output">trace output</a>    </td><td> <a class="variable-reference" href="#variable-*trace-output*">*trace-output*</a>    </td></tr></tbody></table><div class="caption">Standardized Stream Variables</div></span><br/>Note that, by convention, <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream variable">stream variables</a> have names 
    ending in ``<pre><code><span class="syntax-root"><span class="syntax-interned-symbol">-input*</span>
</span></code></pre>''  if they must be <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>,
    ending in ``<pre><code><span class="syntax-root"><span class="syntax-interned-symbol">-output*</span>
</span></code></pre>'' if they must be <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>,
 or ending in ``<pre><code><span class="syntax-root"><span class="syntax-interned-symbol">-io*</span>
</span></code></pre>''     if they must be <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>User programs may <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-bind">bind</a> any <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream variable">stream variable</a>
except <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></section><section id="section-StreamArgsToStandardizedFns"><h3 class="section-title">Stream Arguments to Standardized Functions</h3><br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> in Figure <span class="explicit-mono">()</span>&ndash; accept <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-argument">arguments</a> that
might be either <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>
<span class="float" id="figure-OpenOrClosedStreamOps"><table><tbody><tr><td><a class="function-reference" href="#function-broadcast-stream-streams">broadcast-stream-streams</a></td><td><a class="function-reference" href="chapter-20.xhtml#function-file-author">file-author</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-pathnamep">pathnamep</a></td></tr><tr><td><a class="function-reference" href="#function-close">close</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-file-namestring">file-namestring</a></td><td><a class="function-reference" href="chapter-20.xhtml#function-probe-file">probe-file</a></td></tr><tr><td><a class="function-reference" href="chapter-24.xhtml#function-compile-file">compile-file</a></td><td><a class="function-reference" href="chapter-20.xhtml#function-file-write-date">file-write-date</a></td><td><a class="function-reference" href="chapter-20.xhtml#function-rename-file">rename-file</a></td></tr><tr><td><a class="function-reference" href="chapter-24.xhtml#function-compile-file-pathname">compile-file-pathname</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-host-namestring">host-namestring</a></td><td><a class="function-reference" href="#function-streamp">streamp</a></td></tr><tr><td><a class="function-reference" href="#function-concatenated-stream-streams">concatenated-stream-streams</a></td><td><a class="function-reference" href="chapter-24.xhtml#function-load">load</a></td><td><a class="function-reference" href="#function-synonym-stream-symbol">synonym-stream-symbol</a></td></tr><tr><td><a class="function-reference" href="chapter-20.xhtml#function-delete-file">delete-file</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-logical-pathname">logical-pathname</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-translate-logical-pathname">translate-logical-pathname</a></td></tr><tr><td><a class="function-reference" href="chapter-20.xhtml#function-directory">directory</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-merge-pathnames">merge-pathnames</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-translate-pathname">translate-pathname</a></td></tr><tr><td><a class="function-reference" href="chapter-19.xhtml#function-directory-namestring">directory-namestring</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-namestring">namestring</a></td><td><a class="function-reference" href="chapter-20.xhtml#function-truename">truename</a></td></tr><tr><td><a class="function-reference" href="chapter-25.xhtml#function-dribble">dribble</a></td><td><a class="function-reference" href="#function-open">open</a></td><td><a class="function-reference" href="#function-two-way-stream-input-stream">two-way-stream-input-stream</a></td></tr><tr><td><a class="function-reference" href="#function-echo-stream-input-stream">echo-stream-input-stream</a></td><td><a class="function-reference" href="#function-open-stream-p">open-stream-p</a></td><td><a class="function-reference" href="#function-two-way-stream-output-stream">two-way-stream-output-stream</a></td></tr><tr><td><a class="function-reference" href="#function-echo-stream-output-stream">echo-stream-output-stream</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-parse-namestring">parse-namestring</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-wild-pathname-p">wild-pathname-p</a></td></tr><tr><td><a class="function-reference" href="chapter-25.xhtml#function-ed">ed</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-pathname">pathname</a></td><td><a class="macro-reference" href="#macro-with-open-file">with-open-file</a></td></tr><tr><td><a class="function-reference" href="chapter-19.xhtml#function-enough-namestring">enough-namestring</a></td><td><a class="function-reference" href="chapter-19.xhtml#function-pathname-match-p">pathname-match-p</a></td><td/></tr></tbody></table><div class="caption">Operators that accept either Open or Closed Streams</div></span><br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> in Figure <span class="explicit-mono">()</span>&ndash; accept <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-argument">arguments</a> that
must be <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/><span class="float" id="figure-Operators that accept Open Streams only"><table><tbody><tr><td><a class="function-reference" href="#function-clear-input">clear-input</a></td><td><a class="function-reference" href="#function-output-stream-p">output-stream-p</a></td><td><a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a></td></tr><tr><td><a class="function-reference" href="#function-clear-output">clear-output</a></td><td><a class="function-reference" href="#function-peek-char">peek-char</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read-delimited-list">read-delimited-list</a></td></tr><tr><td><a class="function-reference" href="#function-file-length">file-length</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint">pprint</a></td><td><a class="function-reference" href="#function-read-line">read-line</a></td></tr><tr><td><a class="function-reference" href="#function-file-position">file-position</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-fill">pprint-fill</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read-preserving-whitespace">read-preserving-whitespace</a></td></tr><tr><td><a class="function-reference" href="#function-file-string-length">file-string-length</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-indent">pprint-indent</a></td><td><a class="function-reference" href="#function-stream-element-type">stream-element-type</a></td></tr><tr><td><a class="function-reference" href="#function-finish-output">finish-output</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-linear">pprint-linear</a></td><td><a class="function-reference" href="#function-stream-external-format">stream-external-format</a></td></tr><tr><td><a class="function-reference" href="#function-force-output">force-output</a></td><td><a class="macro-reference" href="chapter-22.xhtml#macro-pprint-logical-block">pprint-logical-block</a></td><td><a class="function-reference" href="#function-terpri">terpri</a></td></tr><tr><td><a class="function-reference" href="chapter-22.xhtml#function-format">format</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-newline">pprint-newline</a></td><td><a class="function-reference" href="#function-unread-char">unread-char</a></td></tr><tr><td><a class="function-reference" href="#function-fresh-line">fresh-line</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-tab">pprint-tab</a></td><td><a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a></td></tr><tr><td><a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-pprint-tabular">pprint-tabular</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-write">write</a></td></tr><tr><td><a class="function-reference" href="#function-input-stream-p">input-stream-p</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a></td><td><a class="function-reference" href="#function-write-byte">write-byte</a></td></tr><tr><td><a class="function-reference" href="#function-interactive-stream-p">interactive-stream-p</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-princ">princ</a></td><td><a class="function-reference" href="#function-write-char">write-char</a></td></tr><tr><td><a class="function-reference" href="#function-listen">listen</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-print">print</a></td><td><a class="function-reference" href="#function-write-line">write-line</a></td></tr><tr><td><a class="function-reference" href="#function-make-broadcast-stream">make-broadcast-stream</a></td><td><a class="function-reference" href="chapter-22.xhtml#function-print-object">print-object</a></td><td><a class="function-reference" href="#function-write-string">write-string</a></td></tr><tr><td><a class="function-reference" href="#function-make-concatenated-stream">make-concatenated-stream</a></td><td><a class="macro-reference" href="chapter-22.xhtml#macro-print-unreadable-object">print-unreadable-object</a></td><td><a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a></td></tr><tr><td><a class="function-reference" href="#function-make-echo-stream">make-echo-stream</a></td><td><a class="function-reference" href="chapter-23.xhtml#function-read">read</a></td><td><a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a></td></tr><tr><td><a class="function-reference" href="#function-make-synonym-stream">make-synonym-stream</a></td><td><a class="function-reference" href="#function-read-byte">read-byte</a></td><td/></tr><tr><td><a class="function-reference" href="#function-make-two-way-stream">make-two-way-stream</a></td><td><a class="function-reference" href="#function-read-char">read-char</a></td><td/></tr></tbody></table><div class="caption">Operators that accept Open Streams only</div></span><br/></section><section id="section-RestrictionsonCompositeStreams"><h3 class="section-title">Restrictions on Composite Streams</h3>The consequences are undefined if any <span class="glossary-reference error">glossary:component</span> of a <a class="glossary-reference" href="chapter-26.xhtml#glossary-composite stream">composite stream</a>
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a> before the <a class="glossary-reference" href="chapter-26.xhtml#glossary-composite stream">composite stream</a> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a>.<br/>The consequences are undefined if the <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream symbol">synonym stream symbol</a> is not <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a>
to an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> from the time of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a>'s creation
until the time it is <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a>.<br/></section>
</section><br/><section id="section-Dictionary"><h2 class="section-title">Dictionary</h2>
<br/>

<br/><div class="component" id="type-stream"><div class="header"><span class="left"><span class="name" id="type-stream">stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/><dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a> that can be used with an input or output
function to identify an appropriate source or sink of <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> or 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-byte">bytes</a> for that operation.<br/>For more complete information, see <span class="section-reference error">section:StreamConcepts.</span><br/>
</dd></dl><dl><dt class="label">See Also</dt><dd><a class="section-reference" href="#section-StreamConcepts">Stream Concepts</a>,
<a class="section-reference" href="chapter-22.xhtml#section-PrintingOtherObjects">Printing Other Objects</a>,
<a class="section-reference" href="chapter-22.xhtml#section-ChapTwentyTwo">Printer</a>,
<a class="section-reference" href="chapter-23.xhtml#section-ChapTwentyThree">Reader</a><br/></dd></dl></div><br/><br/><div class="component" id="type-broadcast-stream"><div class="header"><span class="left"><span class="name" id="type-broadcast-stream">broadcast-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-broadcast-stream">broadcast-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> which 
has associated with it a set of zero or more <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> 
such that any output sent to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a> gets passed on
as output to each of the associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.
(If a <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a> has no <span class="glossary-reference error">glossary:component streams</span>,
then all output to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a> is discarded.)<br/>The set of operations that may be performed on a <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a> 
is the intersection of those for its associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>Some output operations (<span class="explicit-italic"> e.g.</span>,  <a class="function-reference" href="#function-fresh-line">fresh-line</a>) return <span class="glossary-reference error">glossary:values</span> based on the
state of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> at the time of the operation.
Since these <span class="glossary-reference error">glossary:values</span> might differ for each of the <span class="glossary-reference error">glossary:component streams</span>,
it is necessary to describe their return value specifically:<br/><ul><li><a class="function-reference" href="#function-stream-element-type">stream-element-type</a> returns
    the value from the last component stream, 
    or <a class="type-reference" href="chapter-4.xhtml#type-t">t</a> if there are no component streams.<br/></li><li><a class="function-reference" href="#function-fresh-line">fresh-line</a> returns
     the value from the last component stream, 
     or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> if there are no component streams.<br/></li><li>The functions
          <a class="function-reference" href="#function-file-length">file-length</a>,
          <a class="function-reference" href="#function-file-position">file-position</a>,
          <a class="function-reference" href="#function-file-string-length">file-string-length</a>,
      and <a class="function-reference" href="#function-stream-external-format">stream-external-format</a>
   return the value from the last component stream;
   if there are no component streams,
       <a class="function-reference" href="#function-file-length">file-length</a> and <a class="function-reference" href="#function-file-position">file-position</a> return <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre>,
       <a class="function-reference" href="#function-file-string-length">file-string-length</a> returns <pre><code><span class="syntax-root"><span class="syntax-number">1</span>
</span></code></pre>,
   and <a class="function-reference" href="#function-stream-external-format">stream-external-format</a> returns <span class="keyword">:default</span>.<br/></li><li>The functions <a class="function-reference" href="#function-streamp">streamp</a> and <a class="function-reference" href="#function-output-stream-p">output-stream-p</a> 
  always return <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> for <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast streams</a>.<br/></li><li>The functions <a class="function-reference" href="#function-open-stream-p">open-stream-p</a> tests whether the <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a>
  is <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a><sub>2</sub>, not whether its component streams are <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a>.<br/></li><li>The functions <a class="function-reference" href="#function-input-stream-p">input-stream-p</a> and <span class="glossary-reference error">glossary:interactive-stream-p</span> 
  return an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-defined">implementation-defined</a>, <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a> value.<br/></li><li>For the input operations
        <a class="function-reference" href="#function-clear-input">clear-input</a>
        <a class="function-reference" href="#function-listen">listen</a>,
        <a class="function-reference" href="#function-peek-char">peek-char</a>,
        <a class="function-reference" href="#function-read-byte">read-byte</a>,
        <a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a>,
        <a class="function-reference" href="#function-read-char">read-char</a>,
        <a class="function-reference" href="#function-read-line">read-line</a>,
    and <a class="function-reference" href="#function-unread-char">unread-char</a>,
  the consequences are undefined if the indicated operation is performed.
  However, an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> is permitted 
  to define such a behavior as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> extension.
</li></ul><br/>For any output operations not having their return values explicitly specified above
or elsewhere in this document, it is defined that
the <span class="glossary-reference error">glossary:values</span> returned by such an operation are 
the <span class="glossary-reference error">glossary:values</span> resulting from performing the operation 
on the last of its <span class="glossary-reference error">glossary:component streams</span>;
the <span class="glossary-reference error">glossary:values</span> resulting from performing the operation
on all preceding <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> are discarded.                    
If there are no <span class="glossary-reference error">glossary:component streams</span>, 
the value is <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>.

</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-broadcast-stream-streams">broadcast-stream-streams</a>,
<a class="function-reference" href="#function-make-broadcast-stream">make-broadcast-stream</a><br/></dd></dl>
</div><br/><br/><div class="component" id="type-concatenated-stream"><div class="header"><span class="left"><span class="name" id="type-concatenated-stream">concatenated-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-concatenated-stream">concatenated-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> which 
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-composite stream">composite stream</a> of zero or more other <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>, 
such that the sequence of data which can be read from the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> is the same as the concatenation of the 
sequences of data which could be read from each of the 
constituent <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/>Input from a <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> is taken from the first
of the associated <span class="glossary-reference error">glossary:input streams</span> until it reaches <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>1</sub>; 
then that <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is discarded, and subsequent input is taken
from the next <span class="glossary-reference error">glossary:input stream</span>, and so on.
An <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> on the associated <span class="glossary-reference error">glossary:input streams</span> is always managed
invisibly by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a>&mdash;the only time a client of
a <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> sees an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> is when an attempt is
made to obtain data from the <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> but it has no
remaining <span class="glossary-reference error">glossary:input streams</span> from which to obtain such data.<br/>
</dd></dl>
<dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-concatenated-stream-streams">concatenated-stream-streams</a>,
<a class="function-reference" href="#function-make-concatenated-stream">make-concatenated-stream</a><br/></dd></dl></div><br/><br/><div class="component" id="type-echo-stream"><div class="header"><span class="left"><span class="name" id="type-echo-stream">echo-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-echo-stream">echo-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>An <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
that gets  its input  from an associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a>  <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
and  sends its output to   an associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>All input taken from the <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
is echoed to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.
Whether the input is echoed immediately after it is encountered,
or after it has been read from the <span class="glossary-reference error">glossary:input stream</span>
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>.<br/></dd></dl>
<dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-echo-stream-input-stream">echo-stream-input-stream</a>,
<a class="function-reference" href="#function-echo-stream-output-stream">echo-stream-output-stream</a>,
<a class="function-reference" href="#function-make-echo-stream">make-echo-stream</a><br/></dd></dl></div><br/><br/><div class="component" id="type-file-stream"><div class="header"><span class="left"><span class="name" id="type-file-stream">file-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-file-stream">file-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>An <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-file-stream">file-stream</a> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> the direct
source or sink of which is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a>.  Such a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is
created explicitly by <a class="function-reference" href="#function-open">open</a> and <a class="macro-reference" href="#macro-with-open-file">with-open-file</a>, and
implicitly by <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">functions</a> such as <a class="function-reference" href="chapter-24.xhtml#function-load">load</a> that process <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">files</a>.<br/></dd></dl>
<dl><dt class="label">See Also</dt><dd><a class="function-reference" href="chapter-24.xhtml#function-load">load</a>,
<a class="function-reference" href="#function-open">open</a>,
<a class="macro-reference" href="#macro-with-open-file">with-open-file</a><br/></dd></dl></div><br/><br/><div class="component" id="type-string-stream"><div class="header"><span class="left"><span class="name" id="type-string-stream">string-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-string-stream">string-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
which reads input from or writes output to an associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream element type">stream element type</a> of a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> is always
a <a class="glossary-reference" href="chapter-26.xhtml#glossary-subtype">subtype</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a>,
<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>,
<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a>,
<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a><br/></dd></dl>
</div><br/><br/><div class="component" id="type-synonym-stream"><div class="header"><span class="left"><span class="name" id="type-synonym-stream">synonym-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-synonym-stream">synonym-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is an alias for another <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>,
which is the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of a <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic variable">dynamic variable</a>
whose <a class="glossary-reference" href="chapter-26.xhtml#glossary-name">name</a> is the <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream symbol">synonym stream symbol</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a>.<br/>Any operations on a <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a> will be performed 
on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is then the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic variable">dynamic variable</a> named by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream symbol">synonym stream symbol</a>.
If the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> should change,
or if the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> should be <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a>,
then the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> will operate on the new <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-synonym-stream">make-synonym-stream</a>,
<a class="function-reference" href="#function-synonym-stream-symbol">synonym-stream-symbol</a><br/>
</dd></dl>
</div><br/><br/><div class="component" id="type-two-way-stream"><div class="header"><span class="left"><span class="name" id="type-two-way-stream">two-way-stream</span></span><span class="right"><span class="ftype">System Class</span></span></div><br/>
<dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-two-way-stream">two-way-stream</a>,
<a class="type-reference" href="#type-stream">stream</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>A <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-composite stream">composite stream</a> that 
     receives its input  from an associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a>  <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
 and sends    its output to   an associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-two-way-stream">make-two-way-stream</a>,
<a class="function-reference" href="#function-two-way-stream-input-stream">two-way-stream-input-stream</a>,
<a class="function-reference" href="#function-two-way-stream-output-stream">two-way-stream-output-stream</a><br/></dd></dl>
</div><br/>

<br/><div class="component" id="function-input-stream-p"><div class="header"><span class="left"><span class="name" id="function-input-stream-p">input-stream-p</span>, <span class="name" id="function-output-stream-p">output-stream-p</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">input-stream-p</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/>
<span class="function-definition"><span class="name">output-stream-p</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-input-stream-p">input-stream-p</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if <span class="parameter">stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><a class="function-reference" href="#function-output-stream-p">output-stream-p</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if <span class="parameter">stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="function-reference" href="#function-input-stream-p">input-stream-p</a> <a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-input-stream-p">input-stream-p</a> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-input-stream-p">input-stream-p</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>

 <span class="syntax-cons">(<a class="function-reference" href="#function-output-stream-p">output-stream-p</a> <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-output-stream-p">output-stream-p</a> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-output-stream-p">output-stream-p</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"jr"</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-interactive-stream-p"><div class="header"><span class="left"><span class="name" id="function-interactive-stream-p">interactive-stream-p</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">interactive-stream-p</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if <span class="parameter">stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-interactive stream">interactive stream</a>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-when">when</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-&gt;">&gt;</a> <span class="syntax-interned-symbol">measured</span> <span class="syntax-interned-symbol">limit</span>)</span>
  <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<a class="function-reference" href="chapter-9.xhtml#function-error">error</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-round">round</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-*">*</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function--">-</a> <span class="syntax-interned-symbol">measured</span> <span class="syntax-interned-symbol">limit</span>)</span> <span class="syntax-number">100</span>)</span>
                      <span class="syntax-interned-symbol">limit</span>)</span>)</span>)</span>
    <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-unless">unless</a> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-cons">(<a class="function-reference" href="#function-interactive-stream-p">interactive-stream-p</a> <a class="variable-reference" href="#variable-*query-io*">*query-io*</a>)</span>
                <span class="syntax-cons">(<a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> <span class="syntax-string">"The frammis is out of tolerance by ~D%.~@
                              Is it safe to proceed? "</span> <a class="function-reference" href="chapter-9.xhtml#function-error">error</a>)</span>
                <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-&lt;">&lt;</a> <a class="function-reference" href="chapter-9.xhtml#function-error">error</a> <span class="syntax-number">15</span>)</span>)</span>  <span class="syntax-line-comment syntax-comment">;15% is acceptable
</span>      <span class="syntax-cons">(<a class="function-reference" href="chapter-9.xhtml#function-error">error</a> <span class="syntax-string">"The frammis is out of tolerance by ~D%."</span> <a class="function-reference" href="chapter-9.xhtml#function-error">error</a>)</span>)</span>)</span>)</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="section-reference" href="#section-StreamConcepts">Stream Concepts</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="function-open-stream-p"><div class="header"><span class="left"><span class="name" id="function-open-stream-p">open-stream-p</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">open-stream-p</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if <span class="parameter">stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">Streams</a> are open until they have been explicitly closed with <a class="function-reference" href="#function-close">close</a>,
or until they are implicitly closed due to exit from a
  <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a>, 
  <a class="macro-reference" href="#macro-with-open-file">with-open-file</a>,
  <a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a>,  or 
  <a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-open-stream-p">open-stream-p</a> <a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="function-reference" href="#function-close">close</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="function-stream-element-type"><div class="header"><span class="left"><span class="name" id="function-stream-element-type">stream-element-type</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">stream-element-type</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">typespec</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">typespec</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-stream-element-type">stream-element-type</a> returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a> that
indicates the <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">types</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">objects</a> that may be read from 
or written to <span class="parameter">stream</span>.<br/><a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">Streams</a> created by <a class="function-reference" href="#function-open">open</a> have an <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a>
restricted to <a class="type-reference" href="chapter-12.xhtml#type-integer">integer</a> or a <a class="glossary-reference" href="chapter-26.xhtml#glossary-subtype">subtype</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root">;; Note that the stream must accomodate at least the specified type,
;; but might accomodate other types.  Further note that even if it does
;; accomodate exactly the specified type, the type might be specified in
;; any of several ways.
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"test"</span> <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-integer">integer</a> <span class="syntax-number">0</span> <span class="syntax-number">1</span>)</span></span>
                           <span class="syntax-keyword-symbol">:if-exists</span> <span class="syntax-keyword-symbol">:error</span>
                           <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-stream-element-type">stream-element-type</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="type-reference" href="chapter-12.xhtml#type-integer">integer</a>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <span class="syntax-number">16</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <span class="syntax-number">8</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <a class="function-reference" href="chapter-15.xhtml#function-bit">bit</a>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <span class="syntax-number">1</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-integer">integer</a> <span class="syntax-number">0</span> <span class="syntax-number">1</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-integer">integer</a> <span class="syntax-number">0</span> <span class="syntax-cons">(<span class="syntax-number">2</span>)</span>)</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-streamp"><div class="header"><span class="left"><span class="name" id="function-streamp">streamp</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">streamp</span>&nbsp;<span class="lambda-list">object</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">object</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if <span class="parameter">object</span> is of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-stream">stream</a>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><a class="function-reference" href="#function-streamp">streamp</a> is unaffected by whether <span class="parameter">object</span>,
if it is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, is <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> or closed.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-streamp">streamp</a> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
<span class="syntax-cons">(<a class="function-reference" href="#function-streamp">streamp</a> <span class="syntax-number">1</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-streamp">streamp</a> <span class="parameter">object</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>â‰¡</mo></math> <span class="syntax-cons">(<a class="function-reference" href="chapter-4.xhtml#function-typep">typep</a> <span class="parameter">object</span> <span class="syntax-quote">'<a class="type-reference" href="#type-stream">stream</a></span>)</span>
</span></code></pre><br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-read-byte"><div class="header"><span class="left"><span class="name" id="function-read-byte">read-byte</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">read-byte</span>&nbsp;<span class="lambda-list">stream <span class="lambda-list-keyword">&amp;optional</span> eof-error-p eof-value</span>&nbsp;â†’&nbsp;<span class="return-values">byte</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">eof-error-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.<br/><span class="parameter">eof-value</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.
 The default is <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
<span class="parameter">byte</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>,
 or the <span class="parameter">eof-value</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-read-byte">read-byte</a> reads and returns one byte from <span class="parameter">stream</span>.<br/>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>, 
the <span class="parameter">eof-value</span> is returned.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"temp-bytes"</span> 
                     <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span>
                     <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a></span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-write-byte">write-byte</a> <span class="syntax-number">101</span> <span class="syntax-interned-symbol">s</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">101</span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"temp-bytes"</span> <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a></span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"~S ~S"</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-byte">read-byte</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-byte">read-byte</a> <span class="syntax-interned-symbol">s</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">eof</span></span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> 101 EOF
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>Modifies <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-9.xhtml#type-error">error</a> 
if <span class="parameter">stream</span> is not  a <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>If there are no <a class="glossary-reference" href="chapter-26.xhtml#glossary-byte">bytes</a> remaining in the <span class="parameter">stream</span> 
and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>, an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-read-char">read-char</a>,
<a class="function-reference" href="#function-read-sequence">read-sequence</a>,
<a class="function-reference" href="#function-write-byte">write-byte</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-write-byte"><div class="header"><span class="left"><span class="name" id="function-write-byte">write-byte</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">write-byte</span>&nbsp;<span class="lambda-list">byte stream</span>&nbsp;â†’&nbsp;<span class="return-values">byte</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">byte</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream element type">stream element type</a>
		  of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-write-byte">write-byte</a> writes one byte, <span class="parameter">byte</span>, to <span class="parameter">stream</span>.<br/>
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"temp-bytes"</span> 
                   <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span>
                   <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a></span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-write-byte">write-byte</a> <span class="syntax-number">101</span> <span class="syntax-interned-symbol">s</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">101</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="parameter">stream</span> is modified.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> of the <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-9.xhtml#type-error">error</a> 
if <span class="parameter">stream</span> is not  a <a class="glossary-reference" href="chapter-26.xhtml#glossary-binary">binary</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>Might signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a> if <span class="parameter">byte</span> is not
an <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream element type">stream element type</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-read-byte">read-byte</a>,
<a class="function-reference" href="#function-write-char">write-char</a>,
<a class="function-reference" href="#function-write-sequence">write-sequence</a>
</dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-peek-char"><div class="header"><span class="left"><span class="name" id="function-peek-char">peek-char</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">peek-char</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> peek-type input-stream eof-error-p
			       eof-value recursive-p</span>&nbsp;â†’&nbsp;<span class="return-values">char</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">peek-type</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> or <a class="symbol-reference" href="chapter-5.xhtml#symbol-t">t</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/><span class="parameter">input-stream</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
  The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/><span class="parameter">eof-error-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.<br/><span class="parameter">eof-value</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.
 The default is <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
<span class="parameter">recursive-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><span class="parameter">char</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> or the <span class="parameter">eof-value</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-peek-char">peek-char</a> obtains the next character in <span class="parameter">input-stream</span>
without actually reading it, thus leaving the character
to be read at a later time.  It can
also be used to skip over and discard intervening
characters in the <span class="parameter">input-stream</span> 
until a particular character is found.<br/>If <span class="parameter">peek-type</span> is not supplied or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>,
<a class="function-reference" href="#function-peek-char">peek-char</a> returns the next character to be read from 
<span class="parameter">input-stream</span>, without actually removing it from 
<span class="parameter">input-stream</span>.
The next time input is done from <span class="parameter">input-stream</span>, the character will still
be there.  
If <span class="parameter">peek-type</span> is <a class="symbol-reference" href="chapter-5.xhtml#symbol-t">t</a>,
then <a class="function-reference" href="#function-peek-char">peek-char</a> skips over <a class="glossary-reference" href="chapter-26.xhtml#glossary-whitespace">whitespace</a><sub>2</sub> <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a>,
but not comments,
and then performs the peeking operation on the next
character.
The last character examined, the one that starts an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>,
is not removed from <span class="parameter">input-stream</span>.
If <span class="parameter">peek-type</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>,
then <a class="function-reference" href="#function-peek-char">peek-char</a> skips
over input characters until a character that
is <a class="function-reference" href="chapter-13.xhtml#function-char=">char=</a> to that <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> is found;          
that character is left in <span class="parameter">input-stream</span>.<br/>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>,
<span class="parameter">eof-value</span> is returned.  <br/><math xmlns="http://www.w3.org/1998/Math/MathML"/>If <span class="parameter">recursive-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
this call is expected to be embedded in a higher-level call to <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> 
or a similar <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> used by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp reader">Lisp reader</a>.<br/>When <span class="parameter">input-stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a>,
characters that are only peeked at are not echoed. In the
case that <span class="parameter">peek-type</span> is not <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>,
the characters that are passed by <a class="function-reference" href="#function-peek-char">peek-char</a> 
are treated as if by <a class="function-reference" href="#function-read-char">read-char</a>,
and so are echoed unless they have been marked otherwise by <a class="function-reference" href="#function-unread-char">unread-char</a>.
<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">input-stream</span> <span class="syntax-string">"    1 2 3 4 5"</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"~S ~S ~S"</span> 
            <span class="syntax-cons">(<a class="function-reference" href="#function-peek-char">peek-char</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-interned-symbol">input-stream</span>)</span>
            <span class="syntax-cons">(<a class="function-reference" href="#function-peek-char">peek-char</a> <span class="syntax-character">#\4</span> <span class="syntax-interned-symbol">input-stream</span>)</span>
            <span class="syntax-cons">(<a class="function-reference" href="#function-peek-char">peek-char</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-interned-symbol">input-stream</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> #\1 #\4 #\4
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="chapter-23.xhtml#variable-*readtable*">*readtable*</a>,
<a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> and an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled.<br/>If     <span class="parameter">peek-type</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>,
       an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs,
   and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled.<br/>If <span class="parameter">recursive-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
and an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs,
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-read-char"><div class="header"><span class="left"><span class="name" id="function-read-char">read-char</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">read-char</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> input-stream eof-error-p eof-value recursive-p</span>&nbsp;â†’&nbsp;<span class="return-values">char</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/><span class="parameter">eof-error-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.<br/><span class="parameter">eof-value</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.
 The default is <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
<span class="parameter">recursive-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><span class="parameter">char</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> or the <span class="parameter">eof-value</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-read-char">read-char</a> returns the next <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> from <span class="parameter">input-stream</span>.<br/>When <span class="parameter">input-stream</span> is an <span class="parameter">echo stream</span>,
the character is echoed on <span class="parameter">input-stream</span> the first time the character is 
seen.
  Characters that are not echoed by <a class="function-reference" href="#function-read-char">read-char</a> 
are those that were
  put there by <a class="function-reference" href="#function-unread-char">unread-char</a> 
and hence are assumed to have been echoed
  already by a previous call to <a class="function-reference" href="#function-read-char">read-char</a>.

<math xmlns="http://www.w3.org/1998/Math/MathML"/>If <span class="parameter">recursive-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
this call is expected to be embedded in a higher-level call to <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> 
or a similar <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> used by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp reader">Lisp reader</a>.<br/>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>, 
<span class="parameter">eof-value</span> is returned.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">is</span> <span class="syntax-string">"0123"</span>)</span>
    <span class="syntax-cons">(<a class="macro-reference" href="chapter-6.xhtml#macro-do">do</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">c</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a> <span class="syntax-interned-symbol">is</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a> <span class="syntax-interned-symbol">is</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">the-end</span></span>)</span>)</span>)</span>
        <span class="syntax-cons">(<span class="syntax-cons">(<a class="function-reference" href="chapter-5.xhtml#function-not">not</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-13.xhtml#function-characterp">characterp</a> <span class="syntax-interned-symbol">c</span>)</span>)</span>)</span>
     <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"~S "</span> <span class="syntax-interned-symbol">c</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> #\0 #\1 #\2 #\3
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/>
</dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs before a character can be read, and 
<span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>, 
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-read-byte">read-byte</a>,
<a class="function-reference" href="#function-read-sequence">read-sequence</a>,
<a class="function-reference" href="#function-write-char">write-char</a>,
<a class="function-reference" href="chapter-23.xhtml#function-read">read</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd>The corresponding output function is <a class="function-reference" href="#function-write-char">write-char</a>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-read-char-no-hang"><div class="header"><span class="left"><span class="name" id="function-read-char-no-hang">read-char-no-hang</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">read-char-no-hang</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> input-stream eof-error-p
			       eof-value recursive-p</span>&nbsp;â†’&nbsp;<span class="return-values">char</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/><span class="parameter">eof-error-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.<br/><span class="parameter">eof-value</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.
 The default is <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
<span class="parameter">recursive-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><span class="parameter">char</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> or the <span class="parameter">eof-value</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a> returns a character
from <span class="parameter">input-stream</span> if such a character is available.  If no character
is available, <a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a> returns <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/><math xmlns="http://www.w3.org/1998/Math/MathML"/>If <span class="parameter">recursive-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
this call is expected to be embedded in a higher-level call to <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> 
or a similar <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> used by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp reader">Lisp reader</a>.<br/>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs and <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>, 
<span class="parameter">eof-value</span> is returned.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root">;; This code assumes an implementation in which a newline is not
;; required to terminate input from the console.
 <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-defun">defun</a> <span class="syntax-interned-symbol">test-it</span> <span class="syntax-symbol">()</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-unread-char">unread-char</a> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a>)</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-14.xhtml#function-list">list</a> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a>)</span> 
         <span class="syntax-cons">(<a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a>)</span> 
         <span class="syntax-cons">(<a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">TEST-IT</span>
;; Implementation A, where a Newline is not required to terminate
;; interactive input on the console.
 <span class="syntax-cons">(<span class="syntax-interned-symbol">test-it</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxa</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-character">#\a</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
;; Implementation B, where a Newline is required to terminate
;; interactive input on the console, and where that Newline remains
;; on the input stream.
 <span class="syntax-cons">(<span class="syntax-interned-symbol">test-it</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxa<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†©</mi></math></span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-character">#\a</span> <span class="syntax-character">#\Newline</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs
when <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> is signaled .<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-listen">listen</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a> is exactly like <a class="function-reference" href="#function-read-char">read-char</a>, except
that if it would be necessary to wait in order to get a character (as
from a keyboard), <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> is immediately returned without waiting.  <br/>
</dd></dl></div><br/><br/><br/><div class="component" id="function-terpri"><div class="header"><span class="left"><span class="name" id="function-terpri">terpri</span>, <span class="name" id="function-fresh-line">fresh-line</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">terpri</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/>
<span class="function-definition"><span class="name">fresh-line</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-terpri">terpri</a> outputs a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a> to <span class="parameter">output-stream</span>.<br/>
<a class="function-reference" href="#function-fresh-line">fresh-line</a> is similar to <a class="function-reference" href="#function-terpri">terpri</a> but outputs a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a>
only if the <span class="parameter">output-stream</span> is not already at the start of a line.
If for some reason this cannot be determined, then a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a> is output anyway.
<a class="function-reference" href="#function-fresh-line">fresh-line</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if it outputs a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a>;
otherwise it returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"some text"</span> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-terpri">terpri</a> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-terpri">terpri</a> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"more text"</span> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"some text<br/>more text"</span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"some text"</span> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-fresh-line">fresh-line</a> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-fresh-line">fresh-line</a> <span class="syntax-interned-symbol">s</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"more text"</span> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"some text
more text"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">output-stream</span> is modified.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>None.

</dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-terpri">terpri</a> is identical in effect to<br/><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\Newline</span> <span class="syntax-interned-symbol">output-stream</span>)</span>
</span></code></pre><br/></dd></dl></div><br/><br/><br/><div class="component" id="function-unread-char"><div class="header"><span class="left"><span class="name" id="function-unread-char">unread-char</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">unread-char</span>&nbsp;<span class="lambda-list">character <span class="lambda-list-keyword">&amp;optional</span> input-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">character</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>;
  must be the last <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> that was read from <span class="parameter">input-stream</span>.<br/><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-unread-char">unread-char</a> places <span class="parameter">character</span> back onto the front of
<span class="parameter">input-stream</span> so that it will again be the next character
in <span class="parameter">input-stream</span>.<br/>When <span class="parameter">input-stream</span> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a>,
no attempt is made to undo any echoing of the character that might already
have been done on <span class="parameter">input-stream</span>. However, characters placed on 
<span class="parameter">input-stream</span> by <a class="function-reference" href="#function-unread-char">unread-char</a> are marked in such a way 
as to inhibit later re-echo by <a class="function-reference" href="#function-read-char">read-char</a>.

It is an error to invoke <a class="function-reference" href="#function-unread-char">unread-char</a> 
twice consecutively on the same <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
without an intervening call to <a class="function-reference" href="#function-read-char">read-char</a> 
(or some other input operation which implicitly reads characters)
on that <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>Invoking <a class="function-reference" href="#function-peek-char">peek-char</a> or <a class="function-reference" href="#function-read-char">read-char</a> commits all previous characters.
The consequences of invoking <a class="function-reference" href="#function-unread-char">unread-char</a>
on any character preceding that which is returned by 
<a class="function-reference" href="#function-peek-char">peek-char</a> (including those passed over by 
<a class="function-reference" href="#function-peek-char">peek-char</a> that has a <a class="glossary-reference" href="chapter-26.xhtml#glossary-non-nil">non-nil</a> <span class="parameter">peek-type</span>)
are unspecified.
In particular, the consequences of 
invoking <a class="function-reference" href="#function-unread-char">unread-char</a> after <a class="function-reference" href="#function-peek-char">peek-char</a>
are unspecified.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">is</span> <span class="syntax-string">"0123"</span>)</span>
    <span class="syntax-cons">(<a class="macro-reference" href="chapter-6.xhtml#macro-dotimes">dotimes</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">i</span> <span class="syntax-number">6</span>)</span>
      <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">c</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a> <span class="syntax-interned-symbol">is</span>)</span>)</span>)</span>
        <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-evenp">evenp</a> <span class="syntax-interned-symbol">i</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"~&amp;~S ~S~%"</span> <span class="syntax-interned-symbol">i</span> <span class="syntax-interned-symbol">c</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-unread-char">unread-char</a> <span class="syntax-interned-symbol">c</span> <span class="syntax-interned-symbol">is</span>)</span>)</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> 0 #\0
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> 2 #\1
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> 4 #\2
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-peek-char">peek-char</a>,
<a class="function-reference" href="#function-read-char">read-char</a>,
<a class="section-reference" href="#section-StreamConcepts">Stream Concepts</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-unread-char">unread-char</a> is intended to be an efficient mechanism for allowing
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp reader">Lisp reader</a> and other parsers to perform one-character lookahead
in <span class="parameter">input-stream</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-write-char"><div class="header"><span class="left"><span class="name" id="function-write-char">write-char</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">write-char</span>&nbsp;<span class="lambda-list">character <span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values">character</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">character</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>.<br/><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-write-char">write-char</a> outputs <span class="parameter">character</span> to <span class="parameter">output-stream</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\a</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> a
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-character">#\a</span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span>)</span> 
   <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\a</span> <span class="syntax-interned-symbol">s</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\Space</span> <span class="syntax-interned-symbol">s</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\b</span> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"a b"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">output-stream</span> is modified.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-read-char">read-char</a>,
<a class="function-reference" href="#function-write-byte">write-byte</a>,
<a class="function-reference" href="#function-write-sequence">write-sequence</a>
</dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-read-line"><div class="header"><span class="left"><span class="name" id="function-read-line">read-line</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">read-line</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> input-stream eof-error-p eof-value recursive-p</span>&nbsp;â†’&nbsp;<span class="return-values">line, missing-newline-p</span></span><br/>

</dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/><span class="parameter">eof-error-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.<br/><span class="parameter">eof-value</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a>.
 The default is <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
<span class="parameter">recursive-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><span class="parameter">line</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> or the <span class="parameter">eof-value</span>.<br/><span class="parameter">missing-newline-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Reads from <span class="parameter">input-stream</span> a line of text
that is terminated by a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a>.

<math xmlns="http://www.w3.org/1998/Math/MathML"/>If <span class="parameter">recursive-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>,
this call is expected to be embedded in a higher-level call to <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> 
or a similar <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> used by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp reader">Lisp reader</a>.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-primary value">primary value</a>, <span class="parameter">line</span>, is the line that is read,
represented as a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> (without the trailing <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a>, if any).
If  <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a> 
and the <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> for <span class="parameter">input-stream</span> is reached
     before any <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> are read,
<span class="parameter">eof-value</span> is returned as the <span class="parameter">line</span>.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-secondary value">secondary value</a>, <span class="parameter">missing-newline-p</span>, 
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a> that is
    <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a> if the <span class="parameter">line</span> was terminated by a <a class="glossary-reference" href="chapter-26.xhtml#glossary-newline">newline</a>,
 or <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>  if the <span class="parameter">line</span> was terminated by 
		   the <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> for <span class="parameter">input-stream</span>
		   (or if the <span class="parameter">line</span> is the <span class="parameter">eof-value</span>).<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">a</span> <span class="syntax-string">"line 1
 line2"</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"line 1
 line2"</span>
 <span class="syntax-cons">(<a class="function-reference" href="#function-read-line">read-line</a> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">input-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-interned-symbol">a</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"line 1"</span><span class="syntax-verbatim">,</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-read-line">read-line</a> <span class="syntax-interned-symbol">input-stream</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"line2"</span><span class="syntax-verbatim">,</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-read-line">read-line</a> <span class="syntax-interned-symbol">input-stream</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a><span class="syntax-verbatim">,</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>2</sub> occurs before any characters are read in the line,
an error is signaled if <span class="parameter">eof-error-p</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>.  <br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="chapter-23.xhtml#function-read">read</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd>The corresponding output function is <a class="function-reference" href="#function-write-line">write-line</a>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-write-string"><div class="header"><span class="left"><span class="name" id="function-write-string">write-string</span>, <span class="name" id="function-write-line">write-line</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">write-string</span>&nbsp;<span class="lambda-list">string <span class="lambda-list-keyword">&amp;optional</span> output-stream <span class="lambda-list-keyword">&amp;key</span> start end</span>&nbsp;â†’&nbsp;<span class="return-values">string</span></span><br/>
<span class="function-definition"><span class="name">write-line</span>&nbsp;<span class="lambda-list">string <span class="lambda-list-keyword">&amp;optional</span> output-stream <span class="lambda-list-keyword">&amp;key</span> start end</span>&nbsp;â†’&nbsp;<span class="return-values">string</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">string</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.<br/><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.<br/><span class="parameter">start</span>, <span class="parameter">end</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounding index designator">bounding index designators</a> of <span class="parameter">string</span>.
 The defaults for <span class="parameter">start</span> and <span class="parameter">end</span> are <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre> and <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>, respectively.
</dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-write-string">write-string</a> writes the <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> of 
the subsequence of <span class="parameter">string</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by <span class="parameter">start</span> and <span class="parameter">end</span>
to <span class="parameter">output-stream</span>.
<a class="function-reference" href="#function-write-line">write-line</a> does the same thing, 
but then outputs a newline afterwards.  <br/>

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-prog1">prog1</a> <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"books"</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-keyword-symbol">:end</span> <span class="syntax-number">4</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"worms"</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> bookworms
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"books"</span>
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\*</span>)</span>
        <span class="syntax-cons">(<a class="function-reference" href="#function-write-line">write-line</a> <span class="syntax-string">"test12"</span> <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a> <span class="syntax-keyword-symbol">:end</span> <span class="syntax-number">5</span>)</span> 
        <span class="syntax-cons">(<a class="function-reference" href="#function-write-line">write-line</a> <span class="syntax-string">"*test2"</span>)</span>
        <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-character">#\*</span>)</span>
        <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> *test1
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> *test2
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> *
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>,
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-read-line">read-line</a>, <a class="function-reference" href="#function-write-char">write-char</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-write-line">write-line</a> and <a class="function-reference" href="#function-write-string">write-string</a> return <span class="parameter">string</span>,
not the substring <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by <span class="parameter">start</span> and <span class="parameter">end</span>.<br/><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <a class="function-reference" href="chapter-16.xhtml#function-string">string</a>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mo>â‰¡</mo></math> <span class="syntax-cons">(<a class="macro-reference" href="chapter-6.xhtml#macro-dotimes">dotimes</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">i</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-17.xhtml#function-length">length</a> <a class="function-reference" href="chapter-16.xhtml#function-string">string</a>)</span>
      <span class="syntax-cons">(<a class="function-reference" href="#function-write-char">write-char</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-16.xhtml#function-char">char</a> <a class="function-reference" href="chapter-16.xhtml#function-string">string</a> <span class="syntax-interned-symbol">i</span>)</span>)</span>)</span>)</span>

 <span class="syntax-cons">(<a class="function-reference" href="#function-write-line">write-line</a> <a class="function-reference" href="chapter-16.xhtml#function-string">string</a>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mo>â‰¡</mo></math> <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-prog1">prog1</a> <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <a class="function-reference" href="chapter-16.xhtml#function-string">string</a>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-terpri">terpri</a>)</span>)</span>
</span></code></pre>

</dd></dl></div><br/><br/>

<br/><div class="component" id="function-read-sequence"><div class="header"><span class="left"><span class="name" id="function-read-sequence">read-sequence</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">read-sequence</span>&nbsp;<span class="lambda-list">sequence stream <span class="lambda-list-keyword">&amp;key</span> start end</span>&nbsp;â†’&nbsp;<span class="return-values">position</span></span><br/><br/><span class="parameter">sequence</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-sequence">sequence</a>.<br/><span class="parameter">stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">start</span>, <span class="parameter">end</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounding index designator">bounding index designators</a> of
 <span class="parameter">sequence</span>.  The defaults for <span class="parameter">start</span> and <span class="parameter">end</span> are <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre> and <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>, respectively.<br/><span class="parameter">position</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> greater than or equal to zero, and
 less than or equal to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-length">length</a> of the <span class="parameter">sequence</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Destructively modifies <span class="parameter">sequence</span> by replacing the <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a>
of <span class="parameter">sequence</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by <span class="parameter">start</span> and <span class="parameter">end</span> with
<a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> read from <span class="parameter">stream</span>.<br/><span class="parameter">Sequence</span> is destructively modified by copying successive
<a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> into it from <span class="parameter">stream</span>.  If the <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> for
<span class="parameter">stream</span> is reached before copying all <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> of the
subsequence, then the extra <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> near the end of <span class="parameter">sequence</span>
are not updated.<br/><span class="parameter">Position</span> is the index of the first <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">element</a> of <span class="parameter">sequence</span>
that was not updated, which might be less than <span class="parameter">end</span> because the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> was reached.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-defvar">defvar</a> <span class="syntax-interned-symbol">*data*</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-15.xhtml#function-make-array">make-array</a> <span class="syntax-number">15</span> <span class="syntax-keyword-symbol">:initial-element</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>)</span>
<span class="syntax-cons">(<a class="function-reference" href="chapter-5.xhtml#function-values">values</a> <span class="syntax-cons">(<a class="function-reference" href="#function-read-sequence">read-sequence</a> <span class="syntax-interned-symbol">*data*</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"test string"</span>)</span>)</span> <span class="syntax-interned-symbol">*data*</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">11</span><span class="syntax-verbatim">,</span> <span class="syntax-vector">#(<span class="syntax-character">#\t</span> <span class="syntax-character">#\e</span> <span class="syntax-character">#\s</span> <span class="syntax-character">#\t</span> <span class="syntax-character">#\Space</span> <span class="syntax-character">#\s</span> <span class="syntax-character">#\t</span> <span class="syntax-character">#\r</span> <span class="syntax-character">#\i</span> <span class="syntax-character">#\n</span> <span class="syntax-character">#\g</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>Modifies <span class="parameter">stream</span> and <span class="parameter">sequence</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should be prepared to signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			 if <span class="parameter">sequence</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-proper sequence">proper sequence</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">start</span> is not a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">end</span> is not a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/>Might signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a> if an <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">element</a> read from
the <span class="parameter">stream</span> is not a member of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> of the
<span class="parameter">sequence</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="section-reference error">section:ConstantModification</span>,
<a class="function-reference" href="#function-write-sequence">write-sequence</a>,
<a class="function-reference" href="#function-read-line">read-line</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-read-sequence">read-sequence</a> is identical in effect to iterating over the indicated
subsequence and reading one <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">element</a> at a time from <span class="parameter">stream</span> and
storing it into <span class="parameter">sequence</span>, but may be more efficient than the
equivalent loop.  An efficient implementation is more likely to exist
for the case where the <span class="parameter">sequence</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-vector">vector</a> with the same
<a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> as the <span class="parameter">stream</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-write-sequence"><div class="header"><span class="left"><span class="name" id="function-write-sequence">write-sequence</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">write-sequence</span>&nbsp;<span class="lambda-list">sequence stream <span class="lambda-list-keyword">&amp;key</span> start end</span>&nbsp;â†’&nbsp;<span class="return-values">sequence</span></span><br/><br/><span class="parameter">sequence</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-sequence">sequence</a>.<br/><span class="parameter">stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">start</span>, <span class="parameter">end</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounding index designator">bounding index designators</a> of
 <span class="parameter">sequence</span>.  The defaults for <span class="parameter">start</span> and <span class="parameter">end</span> are <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre> and <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>, respectively.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-write-sequence">write-sequence</a> writes the <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> of the subsequence
of <span class="parameter">sequence</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by <span class="parameter">start</span> and <span class="parameter">end</span> to
<span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-write-sequence">write-sequence</a> <span class="syntax-string">"bookworms"</span> <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a> <span class="syntax-keyword-symbol">:end</span> <span class="syntax-number">4</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> book
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"bookworms"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>Modifies <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should be prepared to signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			 if <span class="parameter">sequence</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-proper sequence">proper sequence</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">start</span> is not a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">end</span> is not a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/>Might signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a> if an <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">element</a> of the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-sequence">sequence</a> is not a member of the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-stream element type">stream element type</a> of the <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="section-reference error">section:ConstantModification</span>,
<a class="function-reference" href="#function-read-sequence">read-sequence</a>,
<a class="function-reference" href="#function-write-string">write-string</a>,
<a class="function-reference" href="#function-write-line">write-line</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-write-sequence">write-sequence</a> is identical in effect to iterating over the indicated
subsequence and writing one <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">element</a> at a time to <span class="parameter">stream</span>, but
may be more efficient than the equivalent loop.  An efficient implementation
is more likely to exist for the case where the <span class="parameter">sequence</span> is a
<a class="glossary-reference" href="chapter-26.xhtml#glossary-vector">vector</a> with the same <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> as the <span class="parameter">stream</span>.<br/></dd></dl></div><br/><br/><br/>
<br/><div class="component" id="function-file-length"><div class="header"><span class="left"><span class="name" id="function-file-length">file-length</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">file-length</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">length</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream associated with a file">stream associated with a file</a>.<br/><span class="parameter">length</span>&mdash;a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-file-length">file-length</a> returns the length of <span class="parameter">stream</span>,  
or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> if the length cannot be determined.<br/>For a binary file, the length is measured in units of
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> of the <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"decimal-digits.text"</span> 
                    <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span> <span class="syntax-keyword-symbol">:if-exists</span> <span class="syntax-keyword-symbol">:error</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-princ">princ</a> <span class="syntax-string">"0123456789"</span> <span class="syntax-interned-symbol">s</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-20.xhtml#function-truename">truename</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-pathname">#P<span class="syntax-string">"A:&gt;Joe&gt;decimal-digits.text.1"</span></span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"decimal-digits.text"</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-file-length">file-length</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">10</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream associated with a file">stream associated with a file</a>.

</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-open">open</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-file-position"><div class="header"><span class="left"><span class="name" id="function-file-position">file-position</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">file-position</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">position</span></span><br/>
<span class="function-definition"><span class="name">file-position</span>&nbsp;<span class="lambda-list">stream position-spec</span>&nbsp;â†’&nbsp;<span class="return-values">success-p</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">position-spec</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position designator">file position designator</a>.<br/><span class="parameter">position</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position">file position</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/><span class="parameter">success-p</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns or changes the current position within a <span class="parameter">stream</span>.<br/>When <span class="parameter">position-spec</span> is not supplied,
<a class="function-reference" href="#function-file-position">file-position</a> returns the current <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position">file position</a> in the <span class="parameter">stream</span>,
or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> if this cannot be determined.<br/>When <span class="parameter">position-spec</span> is supplied,
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position">file position</a> in <span class="parameter">stream</span> is set to that <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position">file position</a> (if possible).
<a class="function-reference" href="#function-file-position">file-position</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> 
if the repositioning is performed successfully,
or <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a> if it is not.<br/>
An <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> returned by <a class="function-reference" href="#function-file-position">file-position</a> of one argument 
should be acceptable as <span class="parameter">position-spec</span> for use with the same file.<br/>For a character file,
performing a single <a class="function-reference" href="#function-read-char">read-char</a> or <a class="function-reference" href="#function-write-char">write-char</a> operation
may cause the file position to be increased by more than 1 because of
character-set translations (such as translating between the <span class="explicit-roman">Common Lisp</span>
<pre><code><span class="syntax-root">#\Newline
</span></code></pre> character and an external ASCII
carriage-return/line-feed sequence) and other aspects of the
implementation.  For a binary file, every <a class="function-reference" href="#function-read-byte">read-byte</a> 
or <a class="function-reference" href="#function-write-byte">write-byte</a>
operation increases the file position by 1.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-defun">defun</a> <span class="syntax-interned-symbol">tester</span> <span class="syntax-symbol">()</span>
   <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">noticed</span> <span class="syntax-quote">'<span class="syntax-symbol">()</span></span>)</span> <span class="syntax-interned-symbol">file-written</span>)</span>
     <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-flet">flet</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">x</span>)</span> <span class="syntax-cons">(<a class="macro-reference" href="chapter-14.xhtml#macro-push">push</a> <span class="syntax-interned-symbol">x</span> <span class="syntax-interned-symbol">noticed</span>)</span> <span class="syntax-interned-symbol">x</span>)</span>)</span>
       <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"test.bin"</span> 
                          <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <span class="syntax-number">8</span>)</span></span>
                          <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span>
                          <span class="syntax-keyword-symbol">:if-exists</span> <span class="syntax-keyword-symbol">:error</span>)</span>
          <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="syntax-interned-symbol">s</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;1
</span>          <span class="syntax-cons">(<a class="function-reference" href="#function-write-byte">write-byte</a> <span class="syntax-number">5</span> <span class="syntax-interned-symbol">s</span>)</span> 
          <span class="syntax-cons">(<a class="function-reference" href="#function-write-byte">write-byte</a> <span class="syntax-number">6</span> <span class="syntax-interned-symbol">s</span>)</span>
          <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">p</span> <span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span>
            <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-interned-symbol">p</span>)</span> <span class="syntax-line-comment syntax-comment">;2
</span>            <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-when">when</a> <span class="syntax-interned-symbol">p</span> <span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-1-">1-</a> <span class="syntax-interned-symbol">p</span>)</span>)</span>)</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;3
</span>          <span class="syntax-cons">(<a class="function-reference" href="#function-write-byte">write-byte</a> <span class="syntax-number">7</span> <span class="syntax-interned-symbol">s</span>)</span>
          <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="syntax-interned-symbol">s</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;4
</span>          <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">file-written</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-20.xhtml#function-truename">truename</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span>
        <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-interned-symbol">file-written</span>
                           <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<span class="syntax-cons">(<a class="type-reference" href="chapter-12.xhtml#type-unsigned-byte">unsigned-byte</a> <span class="syntax-number">8</span>)</span></span>
                           <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:input</span>)</span>
          <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="syntax-interned-symbol">s</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;5
</span>          <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<a class="function-reference" href="chapter-17.xhtml#function-length">length</a> <span class="syntax-cons">(<a class="function-reference" href="#function-file-length">file-length</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span>
            <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <a class="function-reference" href="chapter-17.xhtml#function-length">length</a>)</span> <span class="syntax-line-comment syntax-comment">;6
</span>            <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-when">when</a> <a class="function-reference" href="chapter-17.xhtml#function-length">length</a>
              <span class="syntax-cons">(<a class="macro-reference" href="chapter-6.xhtml#macro-dotimes">dotimes</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">i</span> <a class="function-reference" href="chapter-17.xhtml#function-length">length</a>)</span>
                <span class="syntax-cons">(<span class="syntax-interned-symbol">notice</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-byte">read-byte</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span>)</span>)</span>)</span> <span class="syntax-line-comment syntax-comment">;7,...
</span>        <span class="syntax-cons">(<a class="function-reference" href="chapter-17.xhtml#function-nreverse">nreverse</a> <span class="syntax-interned-symbol">noticed</span>)</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">tester</span>
 <span class="syntax-cons">(<span class="syntax-interned-symbol">tester</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-number">0</span> <span class="syntax-number">2</span> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-number">2</span> <span class="syntax-number">0</span> <span class="syntax-number">2</span> <span class="syntax-number">5</span> <span class="syntax-number">7</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<span class="syntax-number">0</span> <span class="syntax-number">2</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-number">3</span> <span class="syntax-number">0</span> <span class="syntax-number">3</span> <span class="syntax-number">5</span> <span class="syntax-number">6</span> <span class="syntax-number">7</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>When the <span class="parameter">position-spec</span> argument is supplied,
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file position">file position</a> in the <span class="parameter">stream</span> might be moved.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd>The value returned by <a class="function-reference" href="#function-file-position">file-position</a> increases monotonically
as input or output operations are performed.  <br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If <span class="parameter">position-spec</span> is supplied, but is too large or otherwise inappropriate, 
an error is signaled.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-file-length">file-length</a>,
<a class="function-reference" href="#function-file-string-length">file-string-length</a>,
<a class="function-reference" href="#function-open">open</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd>Implementations that have character files represented
as a sequence of records of bounded size might choose to encode the
file position as, for example,
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ¨</mi><mi>âŸ¨</mi></math><span class="explicit-italic"> record-number</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ©</mi><mi>âŸ©</mi></math>*<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ¨</mi><mi>âŸ¨</mi></math><span class="explicit-italic"> max-record-size</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ©</mi><mi>âŸ©</mi></math>+<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ¨</mi><mi>âŸ¨</mi></math><span class="explicit-italic"> character-within-record</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>âŸ©</mi><mi>âŸ©</mi></math>.
This is a valid encoding because it increases monotonically as
each character is read or written, though not necessarily by 1 at
each step.  An <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a> might then be considered ``inappropriate''
as <span class="parameter">position-spec</span> to <a class="function-reference" href="#function-file-position">file-position</a> if, when decoded into
record number and character number, it turned out that the
supplied record was too short for the specified character number.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-file-string-length"><div class="header"><span class="left"><span class="name" id="function-file-string-length">file-string-length</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">file-string-length</span>&nbsp;<span class="lambda-list">stream object</span>&nbsp;â†’&nbsp;<span class="return-values">length</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/><span class="parameter">object</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> or a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>.<br/><span class="parameter">length</span>&mdash;a non-negative <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>, or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-file-string-length">file-string-length</a> returns the difference between what 
<pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="#function-file-position">file-position</a> <span class="parameter">stream</span>)</span>
</span></code></pre> would be after writing 
<span class="parameter">object</span> and its current value, or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> if this cannot be determined.  <br/>The returned value corresponds to the current state of <span class="parameter">stream</span>
at the time of the call and might not be 
the same if it is called again
when the state of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> has changed.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/>


<br/><div class="component" id="function-open"><div class="header"><span class="left"><span class="name" id="function-open">open</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">open</span>&nbsp;<span class="lambda-list">filespec <span class="lambda-list-keyword">&amp;key</span> direction element-type
				               if-exists if-does-not-exist
						     external-format</span>&nbsp;â†’&nbsp;<span class="return-values">stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">filespec</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-pathname designator">pathname designator</a>.<br/><span class="parameter">direction</span>&mdash;one of <span class="keyword">:input</span>, <span class="keyword">:output</span>, <span class="keyword">:io</span>, or <span class="keyword">:probe</span>.
 The default is <span class="keyword">:input</span>.<br/><span class="parameter">element-type</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a> 
		       for <a class="glossary-reference" href="chapter-26.xhtml#glossary-recognizable subtype">recognizable subtype</a> of <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>;
		    or a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a> 
		       for a <a class="glossary-reference" href="chapter-26.xhtml#glossary-finite">finite</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-recognizable subtype">recognizable subtype</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>;
		    or one of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbols</a> 
                          <span class="symbol-reference error">symbol:signed-byte</span>,
                          <span class="symbol-reference error">symbol:unsigned-byte</span>,
		       or <span class="keyword">:default</span>.
 The default is <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>.<br/><span class="parameter">if-exists</span>&mdash;one of <span class="keyword">:error</span>, <span class="keyword">:new-version</span>, <span class="keyword">:rename</span>,
		  <span class="keyword">:rename-and-delete</span>, <span class="keyword">:overwrite</span>, <span class="keyword">:append</span>,
		  <span class="keyword">:supersede</span>, or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
 The default is <span class="keyword">:new-version</span> if the version component of <span class="parameter">filespec</span> is <span class="keyword">:newest</span>,
          or <span class="keyword">:error</span> otherwise.<br/><span class="parameter">if-does-not-exist</span>&mdash;one of <span class="keyword">:error</span>, <span class="keyword">:create</span>, or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
 The default is <span class="keyword">:error</span> if <span class="parameter">direction</span> is <span class="keyword">:input</span> 
		      or <span class="parameter">if-exists</span> is <span class="keyword">:overwrite</span> or <span class="keyword">:append</span>;
	  <span class="keyword">:create</span> if <span class="parameter">direction</span> is <span class="keyword">:output</span> or <span class="keyword">:io</span>,
		      and <span class="parameter">if-exists</span> is neither <span class="keyword">:overwrite</span> nor <span class="keyword">:append</span>;
       or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> when <span class="parameter">direction</span> is <span class="keyword">:probe</span>.<br/><span class="parameter">external-format</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format designator">external file format designator</a>.
  The default is <span class="keyword">:default</span>.
<span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.

</dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-open">open</a> creates, opens, and returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> 
that is connected to the file specified by <span class="parameter">filespec</span>.
<span class="parameter">Filespec</span> is the name of the file to be opened.  
If the <span class="parameter">filespec</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-designator">designator</a> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>,
that <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is not closed first or otherwise affected.<br/>The keyword arguments to <a class="function-reference" href="#function-open">open</a> specify the characteristics 
of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> that is returned, and how to handle errors.<br/>If <span class="parameter">direction</span> is <span class="keyword">:input</span>
or <span class="keyword">:probe</span>,
or if <span class="parameter">if-exists</span> is not <span class="keyword">:new-version</span>
and the version component of the <span class="parameter">filespec</span> is <span class="keyword">:newest</span>,
then the file opened is that file already existing in the file system
that has a version greater than that of any other file in the file system
whose other pathname components are the same as those of <span class="parameter">filespec</span>.<br/>An implementation is required to recognize all of 
the <a class="function-reference" href="#function-open">open</a> keyword options 
and to do something reasonable in the context of the host operating
system.  
For example, if a file system does not support distinct file
versions and does not distinguish the notions of deletion and expunging,
<span class="keyword">:new-version</span> might be treated the same as
<span class="keyword">:rename</span> or <span class="keyword">:supersede</span>, and <span class="keyword">:rename-and-delete</span> might
be treated the same as <span class="keyword">:supersede</span>.<br/><dl><dt><span class="keyword">:direction</span></dt><dd>These are the possible values for <span class="parameter">direction</span>, 
and how they affect the nature of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is created:<br/><dl><dt><span class="keyword">:input</span></dt><dd>Causes the creation of an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/></dd><dt><span class="keyword">:output</span></dt><dd>Causes the creation of an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/></dd><dt><span class="keyword">:io</span></dt><dd>Causes the creation of a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/></dd><dt><span class="keyword">:probe</span></dt><dd>Causes the creation of a ``no-directional'' <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>; 
in effect, the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> is created 
and then closed prior to being returned by <a class="function-reference" href="#function-open">open</a>.<br/></dd></dl><br/></dd><dt><span class="keyword">:element-type</span></dt><dd>The <span class="parameter">element-type</span> specifies the unit of transaction for the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.
If it is <span class="keyword">:default</span>,
the unit is determined by <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a>,
possibly based on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a>.<br/></dd><dt><span class="keyword">:if-exists</span></dt><dd><span class="parameter">if-exists</span> specifies the action to be taken if <span class="parameter">direction</span> is
<span class="keyword">:output</span> or <span class="keyword">:io</span> and a file of the name <span class="parameter">filespec</span> 
already exists.
If <span class="parameter">direction</span> is <span class="keyword">:input</span>, not supplied, or <span class="keyword">:probe</span>, 
<span class="parameter">if-exists</span> is ignored.
These are the results of <a class="function-reference" href="#function-open">open</a> as modified by <span class="parameter">if-exists</span>:

<dl><dt><span class="keyword">:error</span></dt><dd>An error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-20.xhtml#type-file-error">file-error</a> is signaled.<br/></dd><dt><span class="keyword">:new-version</span></dt><dd>A new file is created with a larger version number.<br/></dd><dt><span class="keyword">:rename</span></dt><dd>The existing file is renamed to some other name and then a new file is created.<br/></dd><dt><span class="keyword">:rename-and-delete</span></dt><dd>The existing file is renamed to some other name,
then it is deleted but not expunged, and then a new file is created.<br/></dd><dt><span class="keyword">:overwrite</span></dt><dd>Output operations on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> destructively modify the existing file.
If <span class="parameter">direction</span> is <span class="keyword">:io</span> the file is opened in a bidirectional mode
that allows both reading and writing.  The file pointer is initially 
positioned at the beginning of the file; however, the file is not truncated
back to length zero when it is opened.<br/></dd><dt><span class="keyword">:append</span></dt><dd>Output operations on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> destructively modify the existing file.
The file pointer is initially positioned at the end of the file.<br/>If <span class="parameter">direction</span> is <span class="keyword">:io</span>,
the file is opened in a bidirectional mode that allows both reading and writing.<br/></dd><dt><span class="keyword">:supersede</span></dt><dd>The existing file is superseded;
that is, a new file with the same name as the old one is created.
If possible, the implementation should not destroy the old file until the new
<a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is closed.<br/></dd><dt><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></dt><dd>No file or <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is created;
instead, <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> is returned to indicate failure.<br/></dd></dl><br/></dd><dt><span class="keyword">:if-does-not-exist</span></dt><dd><span class="parameter">if-does-not-exist</span>
specifies the action to be taken if
a file of name <span class="parameter">filespec</span> does not already exist.
These are the results of <a class="function-reference" href="#function-open">open</a> as modified by <span class="parameter">if-does-not-exist</span>:<br/><dl><dt><span class="keyword">:error</span></dt><dd>An error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-20.xhtml#type-file-error">file-error</a> is signaled.<br/></dd><dt><span class="keyword">:create</span></dt><dd>An empty file is created.
Processing continues  as if the file 
had already existed but no processing as 
directed by <span class="parameter">if-exists</span> is performed.<br/></dd><dt><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></dt><dd>No file or <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is created;
instead, <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a> is returned to indicate failure.<br/></dd></dl><br/></dd><dt><span class="keyword">:external-format</span></dt><dd>This option selects an <a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format">external file format</a> for the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a>:
The only <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> value for this option is <span class="keyword">:default</span>,
although <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementations</a> are permitted to define additional 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format">external file formats</a> and <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> values 
returned by <a class="function-reference" href="#function-stream-external-format">stream-external-format</a> can also be used by <a class="glossary-reference" href="chapter-26.xhtml#glossary-conforming program">conforming programs</a>.<br/>The <span class="parameter">external-format</span> is meaningful for
any kind of <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> whose <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a>
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-subtype">subtype</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a>.
This option is ignored for <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> for which it is not meaningful;
however, <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementations</a> may define other <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element types</a> 
for which it is meaningful.
The consequences are unspecified if a <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> is written 
that cannot be represented by the given <a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format">external file format</a>.
</dd></dl><br/>When a file is opened, a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> is constructed to serve
as the file system's ambassador to the <span class="explicit-roman">Lisp</span> environment;
operations on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a> are reflected by operations on the file
in the file system.  <br/>A file can be deleted, renamed, or destructively modified by <a class="function-reference" href="#function-open">open</a>.<br/>For information about opening relative pathnames,
see <span class="section-reference error">section:MergingPathnames.</span><br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="function-reference" href="#function-open">open</a> <span class="explicit-italic"> filespec</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:probe</span>)</span>  <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;Closed Probe File Stream...&gt;</span>
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">q</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-19.xhtml#function-merge-pathnames">merge-pathnames</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-25.xhtml#function-user-homedir-pathname">user-homedir-pathname</a>)</span> <span class="syntax-string">"test"</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;PATHNAME :HOST NIL :DEVICE \i{device-name} :DIRECTORY \i{directory-name}
    :NAME "test" :TYPE NIL :VERSION :NEWEST&gt;</span>
 <span class="syntax-cons">(<a class="function-reference" href="#function-open">open</a> <span class="explicit-italic"> filespec</span> <span class="syntax-keyword-symbol">:if-does-not-exist</span> <span class="syntax-keyword-symbol">:create</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;Input File Stream...&gt;</span>
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="#function-open">open</a> <span class="explicit-italic"> filespec</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:probe</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;Closed Probe File Stream...&gt;</span>
 <span class="syntax-cons">(<a class="function-reference" href="chapter-20.xhtml#function-truename">truename</a> <span class="syntax-interned-symbol">s</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;PATHNAME :HOST NIL :DEVICE \i{device-name} :DIRECTORY
    \i{directory-name} :NAME \i{filespec} :TYPE \i{extension} :VERSION 1&gt;</span>
 <span class="syntax-cons">(<a class="function-reference" href="#function-open">open</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span> <span class="syntax-keyword-symbol">:if-exists</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> 
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd>The nature and state of the host computer's <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>If <span class="parameter">if-exists</span> is <span class="keyword">:error</span>, (subject to the
constraints on the meaning of <span class="parameter">if-exists</span> listed above),
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-20.xhtml#type-file-error">file-error</a> is signaled.                        <br/>If <span class="parameter">if-does-not-exist</span> is <span class="keyword">:error</span> (subject to the
constraints on the meaning of <span class="parameter">if-does-not-exist</span> listed above),
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-20.xhtml#type-file-error">file-error</a> is signaled.<br/>If it is impossible for an implementation to handle some option
in a manner close to what is specified here,
an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-9.xhtml#type-error">error</a> might be signaled.<br/>An error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-20.xhtml#type-file-error">file-error</a> is signaled if
<span class="explicit-mono">(wild-pathname-p <span class="parameter">filespec</span>)</span> returns true.

An error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-9.xhtml#type-error">error</a> is signaled if the <span class="parameter">external-format</span> 
is not understood by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a>.

The various <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file systems</a> in existence today have widely differing capabilities,
and some aspects of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a> are beyond the scope of this specification
to define.  A given <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> might not be able to support all of these options 
in exactly the manner stated.  An <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> is required to recognize all of 
these option keywords and to try to do something ``reasonable'' in the context of the 
host <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a>.  Where necessary to accomodate the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a>,
an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> deviate slightly from the semantics specified here without 
being disqualified for consideration as a <a class="glossary-reference" href="chapter-26.xhtml#glossary-conforming implementation">conforming implementation</a>.
If it is utterly impossible for an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> to handle some option
in a manner similar to what is specified here, it may simply signal an error.<br/>With regard to the <span class="keyword">:element-type</span> option, if a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> is
requested that is not supported by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a>, a substitution of types 
such as that which goes on in <a class="glossary-reference" href="chapter-26.xhtml#glossary-upgrade">upgrading</a> is permissible.  As a minimum 
requirement, it should be the case that opening an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
to a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> in a given <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a> and later opening 
an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> to the same <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> in the same <a class="glossary-reference" href="chapter-26.xhtml#glossary-element type">element type</a>
should work compatibly.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="macro-reference" href="#macro-with-open-file">with-open-file</a>,
<a class="function-reference" href="#function-close">close</a>,
<a class="type-reference" href="chapter-19.xhtml#type-pathname">pathname</a>,
<a class="type-reference" href="chapter-19.xhtml#type-logical-pathname">logical-pathname</a>,
<a class="section-reference" href="chapter-19.xhtml#section-MergingPathnames">Merging Pathnames</a>,
<a class="section-reference" href="chapter-19.xhtml#section-PathnamesAsFilenames">Pathnames as Filenames</a>
</dd></dl><dl><dt class="label">Notes</dt><dd> 
<a class="function-reference" href="#function-open">open</a> does not automatically close the file when an abnormal
exit occurs.<br/>When <span class="parameter">element-type</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-subtype">subtype</a> of <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>,
<a class="function-reference" href="#function-read-char">read-char</a> and/or <a class="function-reference" href="#function-write-char">write-char</a> can be
used on the resulting <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>. <br/>When <span class="parameter">element-type</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-subtype">subtype</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-integer">integer</a>,
<a class="function-reference" href="#function-read-byte">read-byte</a> and/or <a class="function-reference" href="#function-write-byte">write-byte</a> can be used on the resulting <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/>
When <span class="parameter">element-type</span> is <span class="keyword">:default</span>,
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> can be determined by using <a class="function-reference" href="#function-stream-element-type">stream-element-type</a>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-stream-external-format"><div class="header"><span class="left"><span class="name" id="function-stream-external-format">stream-external-format</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">stream-external-format</span>&nbsp;<span class="lambda-list">stream</span>&nbsp;â†’&nbsp;<span class="return-values">format</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>.<br/><span class="parameter">format</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format">external file format</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns an <a class="glossary-reference" href="chapter-26.xhtml#glossary-external file format designator">external file format designator</a> for the <span class="parameter">stream</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<a class="type-reference" href="#type-stream">stream</a> <span class="syntax-string">"test"</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-stream-external-format">stream-external-format</a> <a class="type-reference" href="#type-stream">stream</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-keyword-symbol">:DEFAULT</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-keyword-symbol">:ISO8859/1-1987</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-cons">(<span class="syntax-keyword-symbol">:ASCII</span> <span class="syntax-keyword-symbol">:SAIL</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-two-package-markers syntax-interned-symbol">ACME::PROPRIETARY-FILE-FORMAT-17</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mover>or<mi>â†’</mi></mover></math> <span class="syntax-verbatim">#&lt;FILE-FORMAT :ISO646-1983 2343673&gt;</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd>the <span class="keyword">:external-format</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-argument">argument</a> to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> <a class="function-reference" href="#function-open">open</a> and
the <a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-macro">macro</a>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd>The <span class="parameter">format</span> returned is not necessarily meaningful 
to other <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementations</a>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="macro-with-open-file"><div class="header"><span class="left"><span class="name" id="macro-with-open-file">with-open-file</span></span><span class="right"><span class="ftype">Macro</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">with-open-file</span>&nbsp;<span class="lambda-list"><span class="explicit-roman">(</span>stream filespec <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">options</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span><span class="explicit-roman">)</span>
		   <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">declaration</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span>
		   <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">form</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span>&nbsp;â†’&nbsp;<span class="return-values">results</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a variable.<br/><span class="parameter">filespec</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-pathname designator">pathname designator</a>.

<span class="parameter">options</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-form">forms</a>; evaluated.<br/><span class="parameter">declaration</span>&mdash;a <a class="symbol-reference" href="chapter-3.xhtml#symbol-declare">declare</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-expression">expression</a>; not evaluated.<br/><span class="parameter">forms</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>.<br/><span class="parameter">results</span>&mdash;the <span class="glossary-reference error">glossary:values</span> returned by the <span class="parameter">forms</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="macro-reference" href="#macro-with-open-file">with-open-file</a> uses <a class="function-reference" href="#function-open">open</a> to create a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>to <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> named by <span class="parameter">filespec</span>. 
<span class="parameter">Filespec</span> is the name of the file to be opened.
<span class="parameter">Options</span> are used as keyword arguments to <a class="function-reference" href="#function-open">open</a>.

The <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-object">object</a> to which the <span class="parameter">stream</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> 
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a> has <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic extent">dynamic extent</a>;
its <a class="glossary-reference" href="chapter-26.xhtml#glossary-extent">extent</a> ends when the <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a> is exited.

<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> evaluates the <span class="parameter">forms</span> as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a> 
with <span class="parameter">stream</span> bound to 
the value returned by <a class="function-reference" href="#function-open">open</a>.

When control leaves the body, either normally or abnormally (such as by
use of <a class="special-operator-reference" href="chapter-5.xhtml#special-operator-throw">throw</a>), the file is automatically closed.  If a new
output file is being written, and control leaves abnormally, the file is
aborted and the file system is left, so far as possible, as if the file
had never been opened.  <br/>It is possible by the use of <pre><code><span class="syntax-root"><span class="syntax-keyword-symbol">:if-exists</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre> 
or <pre><code><span class="syntax-root"><span class="syntax-keyword-symbol">:if-does-not-exist</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre> for
<span class="parameter">stream</span> to be bound to <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>.
Users of <pre><code><span class="syntax-root"><span class="syntax-keyword-symbol">:if-does-not-exist</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre> should check for a valid <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.
<br/>
The consequences are undefined if an attempt is made to <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a> the 
<span class="parameter">stream</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a>.  The compiler may choose to issue a
warning if such an attempt is detected.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">p</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-19.xhtml#function-merge-pathnames">merge-pathnames</a> <span class="syntax-string">"test"</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;PATHNAME :HOST NIL :DEVICE \i{device-name} :DIRECTORY \i{directory-name}
    :NAME "test" :TYPE NIL :VERSION :NEWEST&gt;</span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-interned-symbol">p</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span> <span class="syntax-keyword-symbol">:if-exists</span> <span class="syntax-keyword-symbol">:supersede</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-string">"Here are a couple~%of test data lines~%"</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-interned-symbol">p</span>)</span>
    <span class="syntax-cons">(<a class="macro-reference" href="chapter-6.xhtml#macro-do">do</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">l</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-line">read-line</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-line">read-line</a> <span class="syntax-interned-symbol">s</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">eof</span></span>)</span>)</span>)</span>
        <span class="syntax-cons">(<span class="syntax-cons">(<a class="function-reference" href="chapter-5.xhtml#function-eq">eq</a> <span class="syntax-interned-symbol">l</span> <span class="syntax-quote">'<span class="syntax-interned-symbol">eof</span></span>)</span> <span class="syntax-string">"Reached end of file."</span>)</span>
     <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"~&amp;*** ~A~%"</span> <span class="syntax-interned-symbol">l</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> *** Here are a couple
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> *** of test data lines
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"Reached end of file."</span>
</span></code></pre><br/>
<pre><code><span class="syntax-root">;; Normally one would not do this intentionally because it is
;; not perspicuous, but beware when using :IF-DOES-NOT-EXIST NIL
;; that this doesn't happen to you accidentally...
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">foo</span> <span class="syntax-string">"no-such-file"</span> <span class="syntax-keyword-symbol">:if-does-not-exist</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">foo</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxhello?</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">HELLO?</span> ;This value was read from the terminal, not a file!

;; Here's another bug to avoid...
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-file">with-open-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">foo</span> <span class="syntax-string">"no-such-file"</span> <span class="syntax-keyword-symbol">:direction</span> <span class="syntax-keyword-symbol">:output</span> <span class="syntax-keyword-symbol">:if-does-not-exist</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-interned-symbol">foo</span> <span class="syntax-string">"Hello"</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"Hello"</span> ;FORMAT got an argument of NIL!
</span></code></pre>
</dd></dl><dl><dt class="label">Side Effects</dt><dd>Creates a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> named by <span class="parameter">filename</span> (upon entry),
and closes the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> (upon exit).
In some <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementations</a>,
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> might be locked in some way while it is open.
If the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>,
a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a> might be created.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd>The host computer's file system.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>See the <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> <a class="function-reference" href="#function-open">open</a>.

</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-open">open</a>,
<a class="function-reference" href="#function-close">close</a>,
<a class="type-reference" href="chapter-19.xhtml#type-pathname">pathname</a>,
<a class="type-reference" href="chapter-19.xhtml#type-logical-pathname">logical-pathname</a>,
<a class="section-reference" href="chapter-19.xhtml#section-PathnamesAsFilenames">Pathnames as Filenames</a>
</dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/>
</dd></dl>
</div><br/><br/>
<br/><div class="component" id="function-close"><div class="header"><span class="left"><span class="name" id="function-close">close</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">close</span>&nbsp;<span class="lambda-list">stream <span class="lambda-list-keyword">&amp;key</span> abort</span>&nbsp;â†’&nbsp;<span class="return-values">result</span></span><br/>
</dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> (either <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a>).<br/><span class="parameter">abort</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.<br/><span class="parameter">result</span>&mdash;<a class="symbol-reference" href="chapter-5.xhtml#symbol-t">t</a> if the <span class="parameter">stream</span> was <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> at the time it was
		     received as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-argument">argument</a>,
		 or <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> otherwise.
<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-close">close</a> closes <span class="parameter">stream</span>. 
Closing a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> means
that it may no longer be used in input or output operations.
The act of <span class="glossary-reference error">glossary:closing</span> a <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>
ends the association between the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> and its associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a>; 
the transaction with the <a class="glossary-reference" href="chapter-26.xhtml#glossary-file system">file system</a> is terminated,
and input/output may no longer be performed on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>. <br/>If <span class="parameter">abort</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>, an attempt is made to clean up any side
effects of having created <span class="parameter">stream</span>.
If <span class="parameter">stream</span> performs output to a file
that was created when the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> was created, the
file is deleted and any previously existing file is not superseded.<br/>It is permissible to close an already closed <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>,
but in that case the <span class="parameter">result</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>.<br/>After <span class="parameter">stream</span> is closed, it is still possible to perform 
the following query operations upon it:
<a class="function-reference" href="#function-streamp">streamp</a>, <a class="function-reference" href="chapter-19.xhtml#function-pathname">pathname</a>, <a class="function-reference" href="chapter-20.xhtml#function-truename">truename</a>, 
<a class="function-reference" href="chapter-19.xhtml#function-merge-pathnames">merge-pathnames</a>, <a class="function-reference" href="chapter-19.xhtml#function-pathname-host">pathname-host</a>, <a class="function-reference" href="chapter-19.xhtml#function-pathname-device">pathname-device</a>,
<a class="function-reference" href="chapter-19.xhtml#function-pathname-directory">pathname-directory</a>,<a class="function-reference" href="chapter-19.xhtml#function-pathname-name">pathname-name</a>, 
<a class="function-reference" href="chapter-19.xhtml#function-pathname-type">pathname-type</a>, <a class="function-reference" href="chapter-19.xhtml#function-pathname-version">pathname-version</a>, <a class="function-reference" href="chapter-19.xhtml#function-namestring">namestring</a>, 
<a class="function-reference" href="chapter-19.xhtml#function-file-namestring">file-namestring</a>, <a class="function-reference" href="chapter-19.xhtml#function-directory-namestring">directory-namestring</a>, 
<a class="function-reference" href="chapter-19.xhtml#function-host-namestring">host-namestring</a>, <a class="function-reference" href="chapter-19.xhtml#function-enough-namestring">enough-namestring</a>, <a class="function-reference" href="#function-open">open</a>,
<a class="function-reference" href="chapter-20.xhtml#function-probe-file">probe-file</a>, and <a class="function-reference" href="chapter-20.xhtml#function-directory">directory</a>. 

The effect of <a class="function-reference" href="#function-close">close</a> on a <a class="glossary-reference" href="chapter-26.xhtml#glossary-constructed stream">constructed stream</a> is 
 to close the argument <span class="parameter">stream</span> only. 
There is no effect on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-constituent">constituents</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-composite stream">composite streams</a>.<br/>For a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> created with <a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>,
the result of <a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> is unspecified after <a class="function-reference" href="#function-close">close</a>.
 
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-broadcast-stream">make-broadcast-stream</a>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;BROADCAST-STREAM&gt;</span>
<span class="syntax-cons">(<a class="function-reference" href="#function-close">close</a> <span class="syntax-interned-symbol">s</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a>
<span class="syntax-cons">(<a class="function-reference" href="#function-output-stream-p">output-stream-p</a> <span class="syntax-interned-symbol">s</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">stream</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a> (if necessary).
If <span class="parameter">abort</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> and the <span class="parameter">stream</span> is
an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-file stream">file stream</a>, its associated <a class="glossary-reference" href="chapter-26.xhtml#glossary-file">file</a>
might be deleted.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-open">open</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="macro-with-open-stream"><div class="header"><span class="left"><span class="name" id="macro-with-open-stream">with-open-stream</span></span><span class="right"><span class="ftype">Macro</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">with-open-stream</span>&nbsp;<span class="lambda-list"><span class="explicit-roman">(</span>var stream<span class="explicit-roman">)</span>
		   <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">declaration</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span> 
		   <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">form</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span>&nbsp;â†’&nbsp;<span class="return-values"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">result</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">var</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-name">name</a>.<br/><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a>; evaluated to produce a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">declaration</span>&mdash;a <a class="symbol-reference" href="chapter-3.xhtml#symbol-declare">declare</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-expression">expression</a>; not evaluated.<br/><span class="parameter">forms</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>.<br/><span class="parameter">results</span>&mdash;the <span class="glossary-reference error">glossary:values</span> returned by the <span class="parameter">forms</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a> performs a series of operations on 
<span class="parameter">stream</span>, returns a value, and then closes the <span class="parameter">stream</span>.<br/><span class="parameter">Var</span> is bound to the value of <span class="parameter">stream</span>,
and then <span class="parameter">forms</span> are executed
as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>. 
<span class="parameter">stream</span>
is automatically closed on exit from <a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a>,
no matter whether the exit is normal or abnormal.
The <span class="parameter">stream</span> has <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic extent">dynamic extent</a>;
its <a class="glossary-reference" href="chapter-26.xhtml#glossary-extent">extent</a> ends when the <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a> is exited.

The consequences are undefined if an attempt is made to <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a> the 
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <span class="parameter">var</span> with the <span class="parameter">forms</span>.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"1 2 3 4"</span>)</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-+">+</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">6</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">stream</span> is closed (upon exit).<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-close">close</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/>
<br/><div class="component" id="function-listen"><div class="header"><span class="left"><span class="name" id="function-listen">listen</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">listen</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> input-stream</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if 
there is a character immediately available from <span class="parameter">input-stream</span>;
otherwise, returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.
On a non-interactive <span class="parameter">input-stream</span>,
<a class="function-reference" href="#function-listen">listen</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> except when at <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a><sub>1</sub>.
If an <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a> is encountered, <a class="function-reference" href="#function-listen">listen</a> returns <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>.
<a class="function-reference" href="#function-listen">listen</a> is intended to be used 
when <span class="parameter">input-stream</span> obtains characters
from an interactive device such as a keyboard.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="#function-unread-char">unread-char</a> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a>)</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-14.xhtml#function-list">list</a> <span class="syntax-cons">(<a class="function-reference" href="#function-listen">listen</a>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-read-char">read-char</a>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox1</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-character">#\1</span>)</span>
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="#function-clear-input">clear-input</a>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-listen">listen</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> ;Unless you're a very fast typist!
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a><br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-interactive-stream-p">interactive-stream-p</a>,
<a class="function-reference" href="#function-read-char-no-hang">read-char-no-hang</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-clear-input"><div class="header"><span class="left"><span class="name" id="function-clear-input">clear-input</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">clear-input</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> input-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
  The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Clears any available input from <span class="parameter">input-stream</span>.<br/>If <a class="function-reference" href="#function-clear-input">clear-input</a> does not make sense for <span class="parameter">input-stream</span>, 
then <a class="function-reference" href="#function-clear-input">clear-input</a> does nothing. <br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root">;; The exact I/O behavior of this example might vary from implementation
;; to implementation depending on the kind of interactive buffering that
;; occurs.  (The call to SLEEP here is intended to help even out the 
;; differences in implementations which do not do line-at-a-time buffering.)

<span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-defun">defun</a> <span class="syntax-interned-symbol">read-sleepily</span> <span class="syntax-cons">(<a class="lambda-list-keyword-reference" href="chapter-3.xhtml#lambda-list-keyword-optional">&amp;OPTIONAL</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">clear-p</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">zzz</span> <span class="syntax-number">0</span>)</span>)</span>
  <span class="syntax-cons">(<a class="function-reference" href="chapter-14.xhtml#function-list">list</a> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<a class="function-reference" href="chapter-12.xhtml#function-&gt;">&gt;</a></span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a>)</span>)</span>
        <span class="syntax-line-comment syntax-comment">;; Note that input typed within the first ZZZ seconds 
</span>        <span class="syntax-line-comment syntax-comment">;; will be discarded.
</span>        <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<a class="function-reference" href="chapter-12.xhtml#function-&gt;">&gt;</a></span>)</span> 
               <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-interned-symbol">zzz</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-25.xhtml#function-sleep">sleep</a> <span class="syntax-interned-symbol">zzz</span>)</span>)</span>
               <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-print">print</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">&gt;&gt;</span></span>)</span>
               <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-interned-symbol">clear-p</span> <span class="syntax-cons">(<a class="function-reference" href="#function-clear-input">clear-input</a>)</span>)</span>
               <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a>)</span>)</span>)</span>)</span>

<span class="syntax-cons">(<span class="syntax-interned-symbol">read-sleepily</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox10</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt;
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt;&gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox20</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-number">10</span> <span class="syntax-number">20</span>)</span>

<span class="syntax-cons">(<span class="syntax-interned-symbol">read-sleepily</span> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox10</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt;
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt;&gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox20</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-number">10</span> <span class="syntax-number">20</span>)</span>

<span class="syntax-cons">(<span class="syntax-interned-symbol">read-sleepily</span> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-number">10</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox10</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox20</span></math>  ; Some implementations won't echo typeahead here.
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> &gt;&gt; <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hbox30</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-number">10</span> <span class="syntax-number">30</span>)</span>
</span></code></pre><br/>
</dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">input-stream</span> is modified.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a><br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">input-stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-clear-output">clear-output</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-finish-output"><div class="header"><span class="left"><span class="name" id="function-finish-output">finish-output</span>, <span class="name" id="function-force-output">force-output</span>, <span class="name" id="function-clear-output">clear-output</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">finish-output</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/>
<span class="function-definition"><span class="name">force-output</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/>
<span class="function-definition"><span class="name">clear-output</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> output-stream</span>&nbsp;â†’&nbsp;<span class="return-values"><a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.
 The default is <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-finish-output">finish-output</a>, <a class="function-reference" href="#function-force-output">force-output</a>, and <a class="function-reference" href="#function-clear-output">clear-output</a>
exercise control over the internal handling of buffered stream output.  <br/><a class="function-reference" href="#function-finish-output">finish-output</a> attempts to ensure that any buffered output
sent to <span class="parameter">output-stream</span> has reached its destination, and then returns.<br/><a class="function-reference" href="#function-force-output">force-output</a> initiates the emptying of any
internal buffers but does not wait for completion
or acknowledgment to return.<br/><a class="function-reference" href="#function-clear-output">clear-output</a> attempts to abort any
outstanding output operation in progress in order
to allow as little output as possible
to continue to the destination.  <br/>If any of these operations does not make sense for <span class="parameter">output-stream</span>, 
then it does nothing. 
The precise actions of these <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">functions</a> are <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root">;; Implementation A
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-princ">princ</a> <span class="syntax-string">"am i seen?"</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-clear-output">clear-output</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>

;; Implementation B
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-princ">princ</a> <span class="syntax-string">"am i seen?"</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="#function-clear-output">clear-output</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> am i seen?
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a><br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">output-stream</span> is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream designator">stream designator</a>.<br/>
</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-clear-input">clear-input</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-y-or-n-p"><div class="header"><span class="left"><span class="name" id="function-y-or-n-p">y-or-n-p</span>, <span class="name" id="function-yes-or-no-p">yes-or-no-p</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">y-or-n-p</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> control <span class="lambda-list-keyword">&amp;rest</span> arguments</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/>
<span class="function-definition"><span class="name">yes-or-no-p</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;optional</span> control <span class="lambda-list-keyword">&amp;rest</span> arguments</span>&nbsp;â†’&nbsp;<span class="return-values">generalized-boolean</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">control</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-format control">format control</a>.

<span class="parameter">arguments</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-format argument">format arguments</a> for <span class="parameter">control</span>.<br/><span class="parameter">generalized-boolean</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized boolean">generalized boolean</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>These functions ask a question and parse a response from the user.
They return <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a> if the answer is affirmative,
or <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a> if the answer is negative.<br/><a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> is for asking the user a question whose answer is either
``yes'' or ``no.''  
It is intended that the reply require
the user to answer a yes-or-no question with a single
character.
<a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> is also for asking the user a question
whose answer is either ``Yes'' or ``No.''  
It is intended that the reply require
the user to take more action than just a single keystroke, such as typing
the full word <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">yes</span>
</span></code></pre> or <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">no</span>
</span></code></pre> followed by a newline.<br/>
<br/><a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> types out a message (if supplied), reads an answer
in some <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> manner (intended to be short and simple,
such as reading a single character such as <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">Y</span>
</span></code></pre> or <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">N</span>
</span></code></pre>).
<a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> types out a message (if supplied), 
attracts the user's attention (for example, by ringing
the terminal's bell),
and reads an answer
in some <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a> manner (intended to be multiple characters,
such as <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">YES</span>
</span></code></pre> or <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">NO</span>
</span></code></pre>).<br/>If <span class="parameter">format-control</span> is supplied and not <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>,
then a <a class="function-reference" href="#function-fresh-line">fresh-line</a> operation is performed; then
a message is printed as if <span class="parameter">format-control</span> and <span class="parameter">arguments</span>
were given to <a class="function-reference" href="chapter-22.xhtml#function-format">format</a>.
In any case, <a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> and <a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> will provide 
a prompt such as ``<pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">Y</span> <a class="macro-reference" href="chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">N</span>)</span>
</span></code></pre>'' or ``<pre><code><span class="syntax-root"><span class="syntax-cons">(<span class="syntax-interned-symbol">Yes</span> <a class="macro-reference" href="chapter-5.xhtml#macro-or">or</a> <span class="syntax-interned-symbol">No</span>)</span>
</span></code></pre>'' if appropriate.<br/>All input and output are performed using <a class="glossary-reference" href="chapter-26.xhtml#glossary-query i/o">query I/O</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> <span class="syntax-string">"(t or nil) given by"</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> (t or nil) given by (Y or N) <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxY</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-true">true</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> <span class="syntax-string">"a ~S message"</span> <span class="syntax-quote">'<span class="syntax-interned-symbol">frightening</span></span>)</span> 
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> a FRIGHTENING message (Yes or No) <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxno</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
 <span class="syntax-cons">(<a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> <span class="syntax-string">"Produce listing file?"</span>)</span> 
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> Produce listing file?
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> Please respond with Y or N. <math xmlns="http://www.w3.org/1998/Math/MathML"><span style="text-decoration: underline;">\hboxn</span></math>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>Output to and input from <a class="glossary-reference" href="chapter-26.xhtml#glossary-query i/o">query I/O</a> will occur.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><a class="variable-reference" href="#variable-*query-io*">*query-io*</a>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="chapter-22.xhtml#function-format">format</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> and <a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> do not add question marks
to the end of the prompt string, so any desired question mark or other
punctuation should be explicitly included in the text query.<br/></dd></dl></div><br/><br/><br/>

<br/><div class="component" id="function-make-synonym-stream"><div class="header"><span class="left"><span class="name" id="function-make-synonym-stream">make-synonym-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-synonym-stream</span>&nbsp;<span class="lambda-list">symbol</span>&nbsp;â†’&nbsp;<span class="return-values">synonym-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">symbol</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbol</a> that names a <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic variable">dynamic variable</a>.<br/><span class="parameter">synonym-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a>.

</dd></dl><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a> whose <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream symbol">synonym stream symbol</a> is <span class="parameter">symbol</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">a-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"a-stream"</span>)</span>
        <span class="syntax-interned-symbol">b-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"b-stream"</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;String Input Stream&gt;</span> 
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">s-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-synonym-stream">make-synonym-stream</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">c-stream</span></span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;SYNONYM-STREAM for C-STREAM&gt;</span> 
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">c-stream</span> <span class="syntax-interned-symbol">a-stream</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;String Input Stream&gt;</span> 
 <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">A-STREAM</span>
 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">c-stream</span> <span class="syntax-interned-symbol">b-stream</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;String Input Stream&gt;</span> 
 <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">B-STREAM</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a> if its argument is not a <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbol</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="section-reference" href="#section-StreamConcepts">Stream Concepts</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-synonym-stream-symbol"><div class="header"><span class="left"><span class="name" id="function-synonym-stream-symbol">synonym-stream-symbol</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">synonym-stream-symbol</span>&nbsp;<span class="lambda-list">synonym-stream</span>&nbsp;â†’&nbsp;<span class="return-values">symbol</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">synonym-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-synonym stream">synonym stream</a>.<br/><span class="parameter">symbol</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbol</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns the <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbol</a> whose <a class="function-reference" href="chapter-10.xhtml#function-symbol-value">symbol-value</a> the <span class="parameter">synonym-stream</span> is using.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-synonym-stream">make-synonym-stream</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/>
<br/><div class="component" id="function-broadcast-stream-streams"><div class="header"><span class="left"><span class="name" id="function-broadcast-stream-streams">broadcast-stream-streams</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">broadcast-stream-streams</span>&nbsp;<span class="lambda-list">broadcast-stream</span>&nbsp;â†’&nbsp;<span class="return-values">streams</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">broadcast-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a>.<br/><span class="parameter">streams</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-list">list</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-list">list</a> of output <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> that constitute
all the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> to which the <span class="parameter">broadcast-stream</span> is broadcasting.  <br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="function-make-broadcast-stream"><div class="header"><span class="left"><span class="name" id="function-make-broadcast-stream">make-broadcast-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-broadcast-stream</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;rest</span> streams</span>&nbsp;â†’&nbsp;<span class="return-values">broadcast-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>
<span class="parameter">broadcast-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a>.<br/><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-broadcast stream">broadcast stream</a>.
</dd></dl>
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">a-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>
       <span class="syntax-interned-symbol">b-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-verbatim">#&lt;String Output Stream&gt;</span>
<span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-broadcast-stream">make-broadcast-stream</a> <span class="syntax-interned-symbol">a-stream</span> <span class="syntax-interned-symbol">b-stream</span>)</span>
         <span class="syntax-string">"this will go to both streams"</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>
<span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">a-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"this will go to both streams"</span>
<span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">b-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"this will go to both streams"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/> 
</dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if any <span class="parameter">stream</span> is not an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-broadcast-stream-streams">broadcast-stream-streams</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-make-two-way-stream"><div class="header"><span class="left"><span class="name" id="function-make-two-way-stream">make-two-way-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-two-way-stream</span>&nbsp;<span class="lambda-list">input-stream output-stream</span>&nbsp;â†’&nbsp;<span class="return-values">two-way-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">output-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">two-way-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-two-way stream">two-way stream</a>.

</dd></dl><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-two-way stream">two-way stream</a> 
that gets  its input  from <span class="parameter">input-stream</span>
and  sends its output to   <span class="parameter">output-stream</span>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">out</span>)</span>
   <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">in</span> <span class="syntax-string">"input..."</span>)</span>
     <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">two</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-two-way-stream">make-two-way-stream</a> <span class="syntax-interned-symbol">in</span> <span class="syntax-interned-symbol">out</span>)</span>)</span>)</span>
       <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-interned-symbol">two</span> <span class="syntax-string">"output..."</span>)</span>
       <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">what-is-read</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">two</span>)</span>)</span>)</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"output..."</span>
<span class="syntax-interned-symbol">what-is-read</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">INPUT...</span> 
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">input-stream</span> is not an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.
Should signal an error of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a>
			      if <span class="parameter">output-stream</span> is not an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-two-way-stream-input-stream"><div class="header"><span class="left"><span class="name" id="function-two-way-stream-input-stream">two-way-stream-input-stream</span>, <span class="name" id="function-two-way-stream-output-stream">two-way-stream-output-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">two-way-stream-input-stream</span>&nbsp;<span class="lambda-list">two-way-stream</span>&nbsp;â†’&nbsp;<span class="return-values">input-stream</span></span><br/>
<span class="function-definition"><span class="name">two-way-stream-output-stream</span>&nbsp;<span class="lambda-list">two-way-stream</span>&nbsp;â†’&nbsp;<span class="return-values">output-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">two-way-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-two-way stream">two-way stream</a>.<br/><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-two-way-stream-input-stream">two-way-stream-input-stream</a> returns the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
from which <span class="parameter">two-way-stream</span> receives input.<br/><a class="function-reference" href="#function-two-way-stream-output-stream">two-way-stream-output-stream</a> returns the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
to which <span class="parameter">two-way-stream</span> sends output.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/>
<br/><div class="component" id="function-echo-stream-input-stream"><div class="header"><span class="left"><span class="name" id="function-echo-stream-input-stream">echo-stream-input-stream</span>, <span class="name" id="function-echo-stream-output-stream">echo-stream-output-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">echo-stream-input-stream</span>&nbsp;<span class="lambda-list">echo-stream</span>&nbsp;â†’&nbsp;<span class="return-values">input-stream</span></span><br/>
<span class="function-definition"><span class="name">echo-stream-output-stream</span>&nbsp;<span class="lambda-list">echo-stream</span>&nbsp;â†’&nbsp;<span class="return-values">output-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">echo-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a>.<br/><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="function-reference" href="#function-echo-stream-input-stream">echo-stream-input-stream</a> returns the <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
from which <span class="parameter">echo-stream</span> receives input.<br/><a class="function-reference" href="#function-echo-stream-output-stream">echo-stream-output-stream</a> returns the <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
to which <span class="parameter">echo-stream</span> sends output.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>!<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="function-make-echo-stream"><div class="header"><span class="left"><span class="name" id="function-make-echo-stream">make-echo-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd>
<span class="function-definition"><span class="name">make-echo-stream</span>&nbsp;<span class="lambda-list">input-stream output-stream</span>&nbsp;â†’&nbsp;<span class="return-values">echo-stream</span></span><br/><br/><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">output-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">echo-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Creates and returns an <a class="glossary-reference" href="chapter-26.xhtml#glossary-echo stream">echo stream</a> 
that takes input  from <span class="parameter">input-stream</span>
and  sends output to   <span class="parameter">output-stream</span>.<br/></dd></dl>
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">out</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>)</span>)</span>
    <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-open-stream">with-open-stream</a> 
        <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-echo-stream">make-echo-stream</a>
            <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"this-is-read-and-echoed"</span>)</span>
            <span class="syntax-interned-symbol">out</span>)</span>)</span>
      <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span>
      <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-string">" * this-is-direct-output"</span>)</span>
      <span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">out</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"this-is-read-and-echoed * this-is-direct-output"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-echo-stream-input-stream">echo-stream-input-stream</a>,
<a class="function-reference" href="#function-echo-stream-output-stream">echo-stream-output-stream</a>,
<a class="function-reference" href="#function-make-two-way-stream">make-two-way-stream</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-concatenated-stream-streams"><div class="header"><span class="left"><span class="name" id="function-concatenated-stream-streams">concatenated-stream-streams</span></span><span class="right"><span class="ftype">Function</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">concatenated-stream-streams</span>&nbsp;<span class="lambda-list">concatenated-stream</span>&nbsp;â†’&nbsp;<span class="return-values">streams</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">concatenated-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a>.<br/><span class="parameter">streams</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-list">list</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-list">list</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> that constitute the
ordered set of <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> the <span class="parameter">concatenated-stream</span> still 
has to read from, starting with the current one it is reading from.
The list may be <span class="glossary-reference error">glossary:empty</span> if no more <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> remain to be read.<br/>The consequences are undefined if the <a class="glossary-reference" href="chapter-26.xhtml#glossary-list structure">list structure</a> of the <span class="parameter">streams</span>
is ever modified.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="function-make-concatenated-stream"><div class="header"><span class="left"><span class="name" id="function-make-concatenated-stream">make-concatenated-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-concatenated-stream</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;rest</span> input-streams</span>&nbsp;â†’&nbsp;<span class="return-values">concatenated-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">input-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>
<span class="parameter">concatenated-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a>.<br/><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-concatenated stream">concatenated stream</a> that has the indicated <span class="parameter">input-streams</span>
initially associated with it.<br/></dd></dl>
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-concatenated-stream">make-concatenated-stream</a>
        <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"1"</span>)</span>
        <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"2"</span>)</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">12</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>Should signal <a class="type-reference" href="chapter-4.xhtml#type-type-error">type-error</a> if any argument is not an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-concatenated-stream-streams">concatenated-stream-streams</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-get-output-stream-string"><div class="header"><span class="left"><span class="name" id="function-get-output-stream-string">get-output-stream-string</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">get-output-stream-string</span>&nbsp;<span class="lambda-list">string-output-stream</span>&nbsp;â†’&nbsp;<span class="return-values">string</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">string-output-stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/><span class="parameter">string</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> containing, in order, all the <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> 
that have been output to <span class="parameter">string-output-stream</span>.
This operation clears any <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> on <span class="parameter">string-output-stream</span>,
so the <span class="parameter">string</span> contains only those <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> which have been output
   since the last call to <a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a>
or since the creation of the <span class="parameter">string-output-stream</span>,
whichever occurred most recently.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">a-stream</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>
       <span class="syntax-interned-symbol">a-string</span> <span class="syntax-string">"abcdefghijklm"</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"abcdefghijklm"</span>
<span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-interned-symbol">a-string</span> <span class="syntax-interned-symbol">a-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"abcdefghijklm"</span>
<span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">a-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"abcdefghijklm"</span>
<span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">a-stream</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">""</span>
</span></code></pre><br/>
</dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">string-output-stream</span> is cleared.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>The consequences are undefined if <span class="parameter">stream-output-string</span> is <a class="glossary-reference" href="chapter-26.xhtml#glossary-closed">closed</a>.

The consequences are undefined if <span class="parameter">string-output-stream</span> is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that
was not produced by <a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>.
The consequences are undefined if <span class="parameter">string-output-stream</span> was 
created implicitly by <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> or <a class="function-reference" href="chapter-22.xhtml#function-format">format</a>.<br/>
</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="function-make-string-input-stream"><div class="header"><span class="left"><span class="name" id="function-make-string-input-stream">make-string-input-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-string-input-stream</span>&nbsp;<span class="lambda-list">string <span class="lambda-list-keyword">&amp;optional</span> start end</span>&nbsp;â†’&nbsp;<span class="return-values">string-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">string</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.<br/><span class="parameter">start</span>, <span class="parameter">end</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounding index designator">bounding index designators</a> of <span class="parameter">string</span>.
 The defaults for <span class="parameter">start</span> and <span class="parameter">end</span> are <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre> and <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>, respectively.
<span class="parameter">string-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>.

</dd></dl><dl><dt class="label">Description</dt><dd>Returns an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>.  
This <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> will supply, in order, the <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> in the substring
of <span class="parameter">string</span> <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by <span class="parameter">start</span> and <span class="parameter">end</span>.
After the last <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">character</a> has been supplied, 
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> will then be at <a class="glossary-reference" href="chapter-26.xhtml#glossary-end of file">end of file</a>.<br/>
</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<a class="type-reference" href="#type-string-stream">string-stream</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"1 one "</span>)</span>)</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-14.xhtml#function-list">list</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <a class="type-reference" href="#type-string-stream">string-stream</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
         <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <a class="type-reference" href="#type-string-stream">string-stream</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>
         <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <a class="type-reference" href="#type-string-stream">string-stream</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-number">1</span> <span class="syntax-interned-symbol">ONE</span> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a>)</span>

 <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a> <span class="syntax-string">"prefixtargetsuffix"</span> <span class="syntax-number">6</span> <span class="syntax-number">12</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">TARGET</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="function-make-string-output-stream"><div class="header"><span class="left"><span class="name" id="function-make-string-output-stream">make-string-output-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">make-string-output-stream</span>&nbsp;<span class="lambda-list"><span class="lambda-list-keyword">&amp;key</span> element-type</span>&nbsp;â†’&nbsp;<span class="return-values">string-stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">element-type</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a>.
  The default is <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>.
<span class="parameter">string-stream</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>.

</dd></dl><dl><dt class="label">Description</dt><dd>Returns
an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> that accepts <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a>
and makes available (via <a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a>)
a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> that contains the <a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> that were actually output.<br/>The <span class="parameter">element-type</span> names the <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a>
of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>; a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> is constructed of the most specialized
<a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> that can accommodate <a class="glossary-reference" href="chapter-26.xhtml#glossary-element">elements</a> of that <span class="glossary-reference error">glossary:element-type</span>.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-let">let</a> <span class="syntax-cons">(<span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-cons">(<a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>)</span>)</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-write-string">write-string</a> <span class="syntax-string">"testing... "</span> <span class="syntax-interned-symbol">s</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a> <span class="syntax-number">1234</span> <span class="syntax-interned-symbol">s</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"testing... 1234"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-get-output-stream-string">get-output-stream-string</a>, <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/><br/><div class="component" id="macro-with-input-from-string"><div class="header"><span class="left"><span class="name" id="macro-with-input-from-string">with-input-from-string</span></span><span class="right"><span class="ftype">Macro</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">with-input-from-string</span>&nbsp;<span class="lambda-list"><span class="explicit-roman">(</span>var string <span class="lambda-list-keyword">&amp;key</span> index start end<span class="explicit-roman">)</span>
			  <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">declaration</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span>
			  <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">form</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span>&nbsp;â†’&nbsp;<span class="return-values"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">result</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">var</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-name">name</a>.<br/><span class="parameter">string</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a>; evaluated to produce a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.<br/><span class="parameter">index</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-place">place</a>.<br/><span class="parameter">start</span>, <span class="parameter">end</span>&mdash;<a class="glossary-reference" href="chapter-26.xhtml#glossary-bounding index designator">bounding index designators</a> of <span class="parameter">string</span>.
 The defaults for <span class="parameter">start</span> and <span class="parameter">end</span> are <pre><code><span class="syntax-root"><span class="syntax-number">0</span>
</span></code></pre> and <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>, respectively.
<span class="parameter">declaration</span>&mdash;a <a class="symbol-reference" href="chapter-3.xhtml#symbol-declare">declare</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-expression">expression</a>; not evaluated.<br/><span class="parameter">forms</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>.<br/><span class="parameter">result</span>&mdash;the <span class="glossary-reference error">glossary:values</span> returned by the <span class="parameter">forms</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Creates an
<a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>, 
provides an opportunity to perform operations on the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
 (returning zero or more <span class="glossary-reference error">glossary:values</span>),
and then closes the <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>.<br/><span class="parameter">String</span> is evaluated first, and <span class="parameter">var</span> is bound to
a character <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> that supplies 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-character">characters</a> from the subsequence of the resulting <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-bounded">bounded</a> by
<span class="parameter">start</span> and <span class="parameter">end</span>. 
The body is executed as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> is automatically closed on exit from
<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a>, no matter whether the exit is normal or abnormal.
The <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> to which the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <span class="parameter">var</span>
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a> has <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic extent">dynamic extent</a>;
its <a class="glossary-reference" href="chapter-26.xhtml#glossary-extent">extent</a> ends when the <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a> is exited.


The <span class="parameter">index</span> is a pointer within the <span class="parameter">string</span> to be advanced.
If <a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a>
is exited normally, then <span class="parameter">index</span> will have
as its <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a>
the index into the <span class="parameter">string</span> indicating the first character not read
which is <span class="explicit-mono">(length <span class="parameter">string</span>)</span> if all characters were used.
The place specified by <span class="parameter">index</span>
is not updated as reading progresses, but only at the
end of the operation. <br/>
<span class="parameter">start</span> and <span class="parameter">index</span> may both specify the same variable, 
which is a pointer within the <span class="parameter">string</span> to be advanced,
perhaps repeatedly by some containing loop.<br/>The consequences are undefined if an attempt is made to <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a> 
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <span class="parameter">var</span>.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"XXX1 2 3 4xxx"</span>
                            <span class="syntax-keyword-symbol">:index</span> <span class="syntax-interned-symbol">ind</span>
                            <span class="syntax-keyword-symbol">:start</span> <span class="syntax-number">3</span> <span class="syntax-keyword-symbol">:end</span> <span class="syntax-number">10</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-+">+</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">6</span>
<span class="syntax-interned-symbol">ind</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">9</span>
<span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"Animal Crackers"</span> <span class="syntax-keyword-symbol">:index</span> <span class="syntax-interned-symbol">j</span> <span class="syntax-keyword-symbol">:start</span> <span class="syntax-number">6</span>)</span>
  <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">CRACKERS</span>
</span></code></pre>
The variable <pre><code><span class="syntax-root"><span class="syntax-interned-symbol">j</span>
</span></code></pre> is set to <pre><code><span class="syntax-root"><span class="syntax-number">15</span>
</span></code></pre>.<br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-place">place</a> named by <span class="parameter">index</span>, if any, is modified.<br/>
</dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-string-input-stream">make-string-input-stream</a>,
<a class="section-reference" href="chapter-3.xhtml#section-TraversalRules">Traversal Rules and Side Effects</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/><br/><div class="component" id="macro-with-output-to-string"><div class="header"><span class="left"><span class="name" id="macro-with-output-to-string">with-output-to-string</span></span><span class="right"><span class="ftype">Macro</span></span></div><br/>
<dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">with-output-to-string</span>&nbsp;<span class="lambda-list"><span class="explicit-roman">(</span>var <span class="lambda-list-keyword">&amp;optional</span> string-form <span class="lambda-list-keyword">&amp;key</span> element-type<span class="explicit-roman">)</span>
 			  <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">declaration</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span>
 			  <math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">form</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span>&nbsp;â†’&nbsp;<span class="return-values"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>{</mo></math><span class="parameter">result</span><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>}</mo></math><span class="explicit-roman">*</span></span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">var</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-name">name</a>.<br/><span class="parameter">string-form</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a> or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>;
		      if <a class="glossary-reference" href="chapter-26.xhtml#glossary-non-nil">non-nil</a>, evaluated to produce <span class="parameter">string</span>.<br/><span class="parameter">string</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> that has a <a class="glossary-reference" href="chapter-26.xhtml#glossary-fill pointer">fill pointer</a>.<br/><span class="parameter">element-type</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-type specifier">type specifier</a>; evaluated.
  The default is <a class="type-reference" href="chapter-13.xhtml#type-character">character</a>.
<span class="parameter">declaration</span>&mdash;a <a class="symbol-reference" href="chapter-3.xhtml#symbol-declare">declare</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-expression">expression</a>; not evaluated.<br/><span class="parameter">forms</span>&mdash;an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a>.<br/><span class="parameter">results</span>&mdash;If a <span class="parameter">string-form</span> is not supplied or <a class="symbol-reference" href="chapter-1.xhtml#symbol-nil">nil</a>,
		  a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>; otherwise, 
		  the <span class="glossary-reference error">glossary:values</span> returned by the <span class="parameter">forms</span>.<br/></dd></dl><dl><dt class="label">Description</dt><dd><a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> creates a
character <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, performs a series of operations
that may send results to this <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, and then closes the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>. 

The <span class="parameter">element-type</span> names the <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> of the elements
of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>; a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> is constructed of the most specialized
<a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> that can accommodate elements of the given <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a>.  

The body is executed as an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implicit progn">implicit progn</a> with <span class="parameter">var</span>
bound to an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a>.  
All output to that <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> is saved in a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a>.  <br/>If <span class="parameter">string</span> is supplied, <span class="parameter">element-type</span> is ignored, 
and the output is incrementally appended to <span class="parameter">string</span> as
if by use of <a class="function-reference" href="chapter-15.xhtml#function-vector-push-extend">vector-push-extend</a>.

The <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
is automatically closed on exit from <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a>,
no matter whether the exit is normal or abnormal.
The <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-string stream">string stream</a> to which the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <span class="parameter">var</span>
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a> has <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic extent">dynamic extent</a>;
its <a class="glossary-reference" href="chapter-26.xhtml#glossary-extent">extent</a> ends when the <a class="glossary-reference" href="chapter-26.xhtml#glossary-form">form</a> is exited.
<br/>If no <span class="parameter">string</span> is provided, then <a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> 
produces a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that accepts characters and returns a <a class="glossary-reference" href="chapter-26.xhtml#glossary-string">string</a> 
of the indicated <span class="parameter">element-type</span>.
If <span class="parameter">string</span> is provided,
<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> returns the results of evaluating the last <span class="parameter">form</span>.<br/>The consequences are undefined if an attempt is made to <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a>
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> <span class="parameter">var</span>.

</dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"><span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">fstr</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-15.xhtml#function-make-array">make-array</a> <span class="syntax-quote">'<span class="syntax-cons">(<span class="syntax-number">0</span>)</span></span> <span class="syntax-keyword-symbol">:element-type</span> <span class="syntax-quote">'<a class="type-reference" href="chapter-13.xhtml#type-base-char">base-char</a></span>
                            <span class="syntax-keyword-symbol">:fill-pointer</span> <span class="syntax-number">0</span> <span class="syntax-keyword-symbol">:adjustable</span> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">""</span>
<span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-interned-symbol">fstr</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <span class="syntax-interned-symbol">s</span> <span class="syntax-string">"here's some output"</span>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="#function-input-stream-p">input-stream-p</a> <span class="syntax-interned-symbol">s</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <a class="glossary-reference" href="chapter-26.xhtml#glossary-false">false</a>
<span class="syntax-interned-symbol">fstr</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"here's some output"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Side Effects</dt><dd>The <span class="parameter">string</span> is modified.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd>The consequences are undefined if destructive modifications are performed
directly on the <span class="parameter">string</span> during the <a class="glossary-reference" href="chapter-26.xhtml#glossary-dynamic extent">dynamic extent</a> of the call.

</dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-make-string-output-stream">make-string-output-stream</a>,
<a class="function-reference" href="chapter-15.xhtml#function-vector-push-extend">vector-push-extend</a>,
<a class="section-reference" href="chapter-3.xhtml#section-TraversalRules">Traversal Rules and Side Effects</a>
</dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl>
</div><br/><br/>

<br/><div class="component" id="variable-*debug-io*"><div class="header"><span class="left"><span class="name" id="variable-*debug-io*">*debug-io*</span>, <span class="name" id="variable-*error-output*">*error-output*</span>, <span class="name" id="variable-*query-io*">*query-io*</span>, <span class="name" id="variable-*standard-input*">*standard-input*</span>, <span class="name" id="variable-*standard-output*">*standard-output*</span>, <span class="name" id="variable-*trace-output*">*trace-output*</span></span><span class="right"><span class="ftype">Variable</span></span></div><br/><dl><dt class="label">Value Type</dt><dd>For <a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>:
 an <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a><br/>For <a class="variable-reference" href="#variable-*error-output*">*error-output*</a>, <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>, and <a class="variable-reference" href="#variable-*trace-output*">*trace-output*</a>:
 an <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>For <a class="variable-reference" href="#variable-*debug-io*">*debug-io*</a>, <a class="variable-reference" href="#variable-*query-io*">*query-io*</a>:
 a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Initial Value</dt><dd><a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>, but
it must be an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
that is not a  <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized synonym stream">generalized synonym stream</a>
to an <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variables</a>
but that might be a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized synonym stream">generalized synonym stream</a> to 
the value of some <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variable</a>.
The initial value might also be a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized synonym stream">generalized synonym stream</a> 
to either the <a class="glossary-reference" href="chapter-26.xhtml#glossary-symbol">symbol</a> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a> or to the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
that is its <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>These <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variables</a> are collectively called the
<a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variables</a>.
They can be <a class="glossary-reference" href="chapter-26.xhtml#glossary-bound">bound</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assigned</a> in order to 
change the default destinations for input and/or output 
used by various <a class="glossary-reference" href="chapter-26.xhtml#glossary-standardized">standardized</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> and facilities.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*debug-io*">*debug-io*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-debug i/o">debug I/O</a>,
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> to be used for interactive debugging purposes.  <br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*error-output*">*error-output*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-error output">error output</a>,
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> to which warnings and non-interactive error messages should be sent.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*query-io*">*query-io*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-query i/o">query I/O</a>,
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
to be used when asking questions of the user.  The question should be output 
to this <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, and the answer read from it.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>,
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is used by many <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> 
as a default source of input when no specific <a class="glossary-reference" href="chapter-26.xhtml#glossary-input">input</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
is explicitly supplied.
 <br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>,
is a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that is used by many <a class="glossary-reference" href="chapter-26.xhtml#glossary-operator">operators</a> 
as a default destination for output when no specific <a class="glossary-reference" href="chapter-26.xhtml#glossary-output">output</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>
is explicitly supplied.<br/>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*trace-output*">*trace-output*</a>, called <a class="glossary-reference" href="chapter-26.xhtml#glossary-trace output">trace output</a>,
is the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> on which traced functions (see <a class="macro-reference" href="chapter-25.xhtml#macro-trace">trace</a>)
and the <a class="macro-reference" href="chapter-25.xhtml#macro-time">time</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-macro">macro</a> print their output.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<a class="variable-reference" href="#variable-*error-output*">*error-output*</a>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-9.xhtml#function-warn">warn</a> <span class="syntax-string">"this string is sent to *error-output*"</span>)</span>)</span>
 <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"Warning: this string is sent to *error-output*
"</span> ;The exact format of this string is \term{implementation-dependent}.

 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a> <span class="syntax-string">"1001"</span>)</span>
    <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-+">+</a> <span class="syntax-number">990</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a>)</span>)</span>)</span> <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-number">1991</span>                       

 <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-setq">setq</a> <span class="syntax-interned-symbol">out</span> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>)</span>
                     <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-print">print</a> <span class="syntax-string">"print and format t send things to"</span>)</span>
                     <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-26.xhtml#section-T">T</a> <span class="syntax-string">"*standard-output* now going to a string"</span>)</span>)</span>)</span>
        <span class="syntax-keyword-symbol">:done</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-keyword-symbol">:DONE</span>
 <span class="syntax-interned-symbol">out</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"
\"print and format t send things to\" *standard-output* now going to a string"</span>

 <span class="syntax-cons">(<a class="macro-reference" href="chapter-5.xhtml#macro-defun">defun</a> <span class="syntax-interned-symbol">fact</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">n</span>)</span> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-if">if</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-&lt;">&lt;</a> <span class="syntax-interned-symbol">n</span> <span class="syntax-number">2</span>)</span> <span class="syntax-number">1</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function-*">*</a> <span class="syntax-interned-symbol">n</span> <span class="syntax-cons">(<span class="syntax-interned-symbol">fact</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-12.xhtml#function--">-</a> <span class="syntax-interned-symbol">n</span> <span class="syntax-number">1</span>)</span>)</span>)</span>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">FACT</span>
 <span class="syntax-cons">(<a class="macro-reference" href="chapter-25.xhtml#macro-trace">trace</a> <span class="syntax-interned-symbol">fact</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-cons">(<span class="syntax-interned-symbol">FACT</span>)</span>
;; Of course, the format of traced output is implementation-dependent.
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<a class="variable-reference" href="#variable-*trace-output*">*trace-output*</a>)</span>
   <span class="syntax-cons">(<span class="syntax-interned-symbol">fact</span> <span class="syntax-number">3</span>)</span>)</span> 
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"
1 Enter FACT 3
| 2 Enter FACT 2
|   3 Enter FACT 1
|   3 Exit FACT 1
| 2 Exit FACT 2
1 Exit FACT 6"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>,
<a class="type-reference" href="#type-synonym-stream">synonym-stream</a>,
<a class="macro-reference" href="chapter-25.xhtml#macro-time">time</a>,
<a class="macro-reference" href="chapter-25.xhtml#macro-trace">trace</a>,
<a class="section-reference" href="chapter-9.xhtml#section-ChapNine">Conditions</a>,
<a class="section-reference" href="chapter-23.xhtml#section-ChapTwentyThree">Reader</a>,
<a class="section-reference" href="chapter-22.xhtml#section-ChapTwentyTwo">Printer</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd>The intent of the constraints on the initial <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> 
of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variables</a> is to ensure that it
is always safe to <a class="glossary-reference" href="chapter-26.xhtml#glossary-bind">bind</a> or <a class="glossary-reference" href="chapter-26.xhtml#glossary-assign">assign</a> such a <a class="glossary-reference" href="chapter-26.xhtml#glossary-variable">variable</a> to 
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of another <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variable</a>, without
unduly restricting <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> flexibility.

It is common for an <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation">implementation</a> to make
the initial <span class="glossary-reference error">glossary:values</span> of <a class="variable-reference" href="#variable-*debug-io*">*debug-io*</a> and <a class="variable-reference" href="#variable-*query-io*">*query-io*</a> 
be the <a class="glossary-reference" href="chapter-26.xhtml#glossary-same">same</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, 
and to make
the initial <span class="glossary-reference error">glossary:values</span> of <a class="variable-reference" href="#variable-*error-output*">*error-output*</a> and <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a> 
be the <a class="glossary-reference" href="chapter-26.xhtml#glossary-same">same</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/>The functions <a class="function-reference" href="#function-y-or-n-p">y-or-n-p</a> and <a class="function-reference" href="#function-yes-or-no-p">yes-or-no-p</a> use <a class="glossary-reference" href="chapter-26.xhtml#glossary-query i/o">query I/O</a>
for their input and output.<br/>In the normal <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp read-eval-print loop">Lisp read-eval-print loop</a>,
input is read from <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.
Many input functions, including <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> and <a class="function-reference" href="#function-read-char">read-char</a>,
take a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> argument that defaults to <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard input">standard input</a>.<br/>In the normal <a class="glossary-reference" href="chapter-26.xhtml#glossary-lisp read-eval-print loop">Lisp read-eval-print loop</a>, output is sent to <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.
Many output functions, including <a class="function-reference" href="chapter-22.xhtml#function-print">print</a> and <a class="function-reference" href="#function-write-char">write-char</a>, 
take a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> argument that defaults to <a class="glossary-reference" href="chapter-26.xhtml#glossary-standard output">standard output</a>.<br/>A program that wants, for example, to divert output to a file should do so by 
<a class="glossary-reference" href="chapter-26.xhtml#glossary-binding">binding</a> <a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>; that way error messages sent to
<a class="variable-reference" href="#variable-*error-output*">*error-output*</a> can still get to the user by going through
<a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a> (if <a class="variable-reference" href="#variable-*error-output*">*error-output*</a> is bound to <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>),
which is usually what is desired.<br/></dd></dl></div><br/><br/>
<br/><div class="component" id="variable-*terminal-io*"><div class="header"><span class="left"><span class="name" id="variable-*terminal-io*">*terminal-io*</span></span><span class="right"><span class="ftype">Variable</span></span></div><br/><dl><dt class="label">Value Type</dt><dd>a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Initial Value</dt><dd><a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>, but
it must be an <a class="glossary-reference" href="chapter-26.xhtml#glossary-open">open</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
that is not a  <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized synonym stream">generalized synonym stream</a>
to an <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variables</a>
but that might be a <a class="glossary-reference" href="chapter-26.xhtml#glossary-generalized synonym stream">generalized synonym stream</a> to 
the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of some <a class="glossary-reference" href="chapter-26.xhtml#glossary-i/o customization variable">I/O customization variable</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>, called  <a class="glossary-reference" href="chapter-26.xhtml#glossary-terminal i/o">terminal I/O</a>, is ordinarily 
a <a class="glossary-reference" href="chapter-26.xhtml#glossary-bidirectional">bidirectional</a> <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> that connects to the user's console.
Typically, writing to this <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> 
would cause the output to appear
on a display screen, for example, and reading from the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> would
accept input from a keyboard.  It is intended
that standard input functions such as <a class="function-reference" href="chapter-23.xhtml#function-read">read</a> and <a class="function-reference" href="#function-read-char">read-char</a>,
when used with this <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>, cause echoing of the input
into the output side of the <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>. The means by which this is
accomplished are <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-dependent">implementation-dependent</a>.<br/>The effect of changing the <a class="glossary-reference" href="chapter-26.xhtml#glossary-value">value</a> of <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>,
either by <a class="glossary-reference" href="chapter-26.xhtml#glossary-binding">binding</a> or <span class="glossary-reference error">glossary:assignment</span>,
is <a class="glossary-reference" href="chapter-26.xhtml#glossary-implementation-defined">implementation-defined</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="special-operator-reference" href="chapter-5.xhtml#special-operator-progn">progn</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">foo</span></span>)</span> <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">bar</span></span> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> FOOBAR
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-interned-symbol">BAR</span>
 <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-output-to-string">with-output-to-string</a> <span class="syntax-cons">(<a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>)</span>
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">foo</span></span>)</span> 
   <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-prin1">prin1</a> <span class="syntax-quote">'<span class="syntax-interned-symbol">bar</span></span> <a class="variable-reference" href="#variable-*terminal-io*">*terminal-io*</a>)</span>)</span>
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â–·</mi></math> BAR
<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>â†’</mi></math> <span class="syntax-string">"FOO"</span>
</span></code></pre><br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="variable-reference" href="#variable-*debug-io*">*debug-io*</a>,
<a class="variable-reference" href="#variable-*error-output*">*error-output*</a>,
<a class="variable-reference" href="#variable-*query-io*">*query-io*</a>,
<a class="variable-reference" href="#variable-*standard-input*">*standard-input*</a>,
<a class="variable-reference" href="#variable-*standard-output*">*standard-output*</a>,
<a class="variable-reference" href="#variable-*trace-output*">*trace-output*</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/></dd></dl></div><br/><br/>

<br/><div class="component" id="type-stream-error"><div class="header"><span class="left"><span class="name" id="type-stream-error">stream-error</span></span><span class="right"><span class="ftype">Condition Type</span></span></div><br/><dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-stream-error">stream-error</a>,
<a class="type-reference" href="chapter-9.xhtml#type-error">error</a>,
<a class="type-reference" href="chapter-9.xhtml#type-serious-condition">serious-condition</a>,
<a class="type-reference" href="chapter-9.xhtml#type-condition">condition</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-stream-error">stream-error</a>
consists of error conditions that are related to receiving input from
or sending output to a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.  
The ``offending stream'' is initialized by
the <span class="keyword">:stream</span> initialization argument to <a class="function-reference" href="chapter-9.xhtml#function-make-condition">make-condition</a>, 
and is <a class="glossary-reference" href="chapter-26.xhtml#glossary-access">accessed</a> by the <a class="glossary-reference" href="chapter-26.xhtml#glossary-function">function</a> <a class="function-reference" href="#function-stream-error-stream">stream-error-stream</a>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-stream-error-stream">stream-error-stream</a><br/></dd></dl></div><br/>
<br/><div class="component" id="function-stream-error-stream"><div class="header"><span class="left"><span class="name" id="function-stream-error-stream">stream-error-stream</span></span><span class="right"><span class="ftype">Function</span></span></div><br/><dl><dt class="label">Syntax</dt><dd><span class="function-definition"><span class="name">stream-error-stream</span>&nbsp;<span class="lambda-list">condition</span>&nbsp;â†’&nbsp;<span class="return-values">stream</span></span><br/><br/></dd></dl><dl><dt class="label">Arguments and Values</dt><dd><span class="parameter">condition</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-condition">condition</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-stream-error">stream-error</a>.<br/><span class="parameter">stream</span>&mdash;a <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a>.<br/></dd></dl><dl><dt class="label">Description</dt><dd>Returns the offending <a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">stream</a> of a <a class="glossary-reference" href="chapter-26.xhtml#glossary-condition">condition</a> of <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-stream-error">stream-error</a>.<br/></dd></dl><dl><dt class="label">Examples</dt><dd><pre><code><span class="syntax-root"> <span class="syntax-cons">(<a class="macro-reference" href="#macro-with-input-from-string">with-input-from-string</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">s</span> <span class="syntax-string">"(FOO"</span>)</span>
   <span class="syntax-cons">(<a class="macro-reference" href="chapter-9.xhtml#macro-handler-case">handler-case</a> <span class="syntax-cons">(<a class="function-reference" href="chapter-23.xhtml#function-read">read</a> <span class="syntax-interned-symbol">s</span>)</span>
     <span class="syntax-cons">(<a class="type-reference" href="#type-end-of-file">end-of-file</a> <span class="syntax-cons">(<span class="syntax-interned-symbol">c</span>)</span>
       <span class="syntax-cons">(<a class="function-reference" href="chapter-22.xhtml#function-format">format</a> <a class="section-reference" href="chapter-1.xhtml#section-NIL">NIL</a> <span class="syntax-string">"~&amp;End of file on ~S."</span> <span class="syntax-cons">(<a class="function-reference" href="#function-stream-error-stream">stream-error-stream</a> <span class="syntax-interned-symbol">c</span>)</span>)</span>)</span>)</span>)</span>
<span class="syntax-string">"End of file on #&lt;String Stream&gt;."</span>
</span></code></pre>

</dd></dl><dl><dt class="label">Side Effects</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Affected By</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">Exceptional Situations</dt><dd><span class="none">None</span>.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="type-reference" href="#type-stream-error">stream-error</a>,
<a class="section-reference" href="chapter-9.xhtml#section-ChapNine">Conditions</a><br/></dd></dl><dl><dt class="label">Notes</dt><dd><span class="none">None</span>.<br/>
</dd></dl></div><br/><br/><br/><div class="component" id="type-end-of-file"><div class="header"><span class="left"><span class="name" id="type-end-of-file">end-of-file</span></span><span class="right"><span class="ftype">Condition Type</span></span></div><br/><dl><dt class="label">Class Precedence List</dt><dd><a class="type-reference" href="#type-end-of-file">end-of-file</a>,
<a class="type-reference" href="#type-stream-error">stream-error</a>,
<a class="type-reference" href="chapter-9.xhtml#type-error">error</a>,
<a class="type-reference" href="chapter-9.xhtml#type-serious-condition">serious-condition</a>,
<a class="type-reference" href="chapter-9.xhtml#type-condition">condition</a>,
<a class="type-reference" href="chapter-4.xhtml#type-t">t</a><br/></dd></dl><dl><dt class="label">Description</dt><dd>The <a class="glossary-reference" href="chapter-26.xhtml#glossary-type">type</a> <a class="type-reference" href="#type-end-of-file">end-of-file</a> consists of
error conditions related to read operations that are done on
<a class="glossary-reference" href="chapter-26.xhtml#glossary-stream">streams</a> that have no more data.<br/></dd></dl><dl><dt class="label">See Also</dt><dd><a class="function-reference" href="#function-stream-error-stream">stream-error-stream</a><br/></dd></dl></div><br/></section></section></div></main><footer>Copyright Â© 2021 Jan Moringen</footer></body></html>